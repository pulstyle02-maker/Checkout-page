<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pharmacology - Inflammation Module</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a0b2e; /* Deep Purple Background */
            color: #ffffff;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #2d1b4e; 
        }
        ::-webkit-scrollbar-thumb {
            background: #fbbf24; 
            border-radius: 4px;
        }

        /* Animations */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .btn-glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .btn-glass:hover {
            background: rgba(255, 215, 0, 0.2);
            border-color: #fbbf24;
            transform: translateY(-2px);
        }

        .option-btn {
            transition: all 0.2s;
        }
        
        .option-btn.selected {
            border-color: #fbbf24;
            background: rgba(251, 191, 36, 0.1);
        }

        .correct-anim {
            background-color: #22c55e !important;
            border-color: #22c55e !important;
            color: white !important;
        }

        .wrong-anim {
            background-color: #ef4444 !important;
            border-color: #ef4444 !important;
            color: white !important;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Navbar -->
    <nav class="p-4 bg-opacity-90 backdrop-blur-md bg-[#2d1b4e] border-b border-yellow-500/30 sticky top-0 z-50 shadow-lg">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <i class="fa-solid fa-capsules text-yellow-400 text-2xl"></i>
                <h1 class="text-xl md:text-2xl font-bold tracking-wider text-white">
                    PHARMA<span class="text-yellow-400">QUIZ</span>
                </h1>
            </div>
            <button onclick="goHome()" class="text-sm text-gray-300 hover:text-yellow-400 transition">
                <i class="fa-solid fa-house"></i> Home
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto p-4 md:p-6 flex flex-col items-center justify-center">
        
        <!-- Section Selection Screen -->
        <div id="section-menu" class="w-full max-w-4xl grid gap-6 fade-in">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-yellow-400 mb-2">Inflammation Module</h2>
                <p class="text-gray-400">Select a Learning Objective to begin</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- Buttons generated by JS -->
            </div>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-container" class="w-full max-w-2xl hidden fade-in">
            <!-- Progress Header -->
            <div class="flex justify-between items-center mb-4 text-sm text-gray-400">
                <span id="progress-text">Question 1/20</span>
                <span id="score-badge" class="bg-yellow-500/20 text-yellow-400 px-3 py-1 rounded-full border border-yellow-500/30">
                    Score: 0
                </span>
            </div>
            
            <!-- Progress Bar -->
            <div class="w-full bg-gray-700 h-2 rounded-full mb-6 overflow-hidden">
                <div id="progress-bar" class="bg-gradient-to-r from-yellow-400 to-orange-500 h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
            </div>

            <!-- Question Card -->
            <div class="bg-[#2d1b4e] border border-purple-500/30 rounded-2xl p-6 md:p-8 shadow-2xl relative overflow-hidden">
                <div class="absolute top-0 right-0 w-32 h-32 bg-yellow-500/10 rounded-full blur-3xl -mr-16 -mt-16"></div>
                
                <h3 id="question-text" class="text-xl md:text-2xl font-semibold mb-8 leading-relaxed text-gray-100">
                    Loading Question...
                </h3>

                <!-- Options -->
                <div id="options-container" class="grid gap-3">
                    <!-- Options injected here -->
                </div>

                <!-- Explanation Box -->
                <div id="explanation-box" class="mt-6 p-4 bg-blue-900/30 border border-blue-500/30 rounded-xl hidden">
                    <p class="text-blue-200 text-sm"><i class="fa-solid fa-circle-info mr-2"></i><span id="explanation-text"></span></p>
                </div>

                <!-- Next Button -->
                <button id="next-btn" onclick="nextQuestion()" class="mt-8 w-full bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-3 px-6 rounded-xl shadow-lg transform transition hover:-translate-y-1 hidden">
                    Next Question <i class="fa-solid fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="w-full max-w-3xl hidden fade-in text-center">
            <div class="bg-[#2d1b4e] border border-yellow-500/30 rounded-3xl p-8 shadow-2xl">
                <div class="w-24 h-24 bg-yellow-400 rounded-full flex items-center justify-center mx-auto mb-6 shadow-[0_0_20px_rgba(251,191,36,0.5)]">
                    <i class="fa-solid fa-trophy text-4xl text-black"></i>
                </div>
                
                <h2 class="text-3xl font-bold text-white mb-2">Module Completed!</h2>
                <p class="text-gray-400 mb-6">Here is how you performed</p>

                <div class="text-6xl font-bold text-yellow-400 mb-8" id="final-score">0%</div>

                <div class="flex flex-col md:flex-row gap-4 justify-center mb-8">
                    <button onclick="restartModule()" class="btn-glass text-white px-8 py-3 rounded-xl font-semibold hover:bg-white/10">
                        <i class="fa-solid fa-rotate-right mr-2"></i> Retry Module
                    </button>
                    <button onclick="goHome()" class="bg-yellow-400 text-black px-8 py-3 rounded-xl font-semibold hover:bg-yellow-500 transition">
                        <i class="fa-solid fa-list mr-2"></i> Main Menu
                    </button>
                </div>

                <!-- Wrong Answers Section -->
                <div id="review-section" class="text-left mt-8 border-t border-gray-700 pt-8 hidden">
                    <h3 class="text-xl font-bold text-red-400 mb-4"><i class="fa-solid fa-circle-exclamation mr-2"></i>Review Incorrect Answers</h3>
                    <div id="wrong-answers-list" class="space-y-4">
                        <!-- Wrong answers injected here -->
                    </div>
                </div>
            </div>
        </div>

    </main>

    <footer class="text-center p-6 text-gray-600 text-sm">
        <p>Pharmacology Inflammation Module • Designed for Mobile</p>
    </footer>

    <script>
        // --- DATA: 100 MCQs ---
        const questionBank = [
            // IN-Ph-001: Prostaglandin Analogues (1-20)
            {
                id: 1, section: "IN-Ph-001", question: "Which of the following is a PGF2α derivative used specifically to lower intraocular pressure in glaucoma?",
                options: ["Alprostadil", "Epoprostenol", "Latanoprost", "Misoprostol"], answer: 2,
                explanation: "Latanoprost is a PGF2α analogue that increases uveoscleral outflow, treating glaucoma."
            },
            {
                id: 2, section: "IN-Ph-001", question: "A patient with rheumatoid arthritis taking NSAIDs is prescribed a prostaglandin analogue to prevent gastric ulcers. Which drug is it?",
                options: ["Latanoprost", "Misoprostol", "Dinoprostone", "Carboprost"], answer: 1,
                explanation: "Misoprostol (PGE1 analogue) is cytoprotective for gastric mucosa against NSAID injury."
            },
            {
                id: 3, section: "IN-Ph-001", question: "Which adverse effect is unique to the ophthalmic use of prostaglandin analogues like Latanoprost?",
                options: ["Retinal detachment", "Permanent brown pigmentation of the iris", "Cataract formation", "Corneal ulceration"], answer: 1,
                explanation: "Increased iris pigmentation is a unique side effect of prostaglandin analogues like latanoprost."
            },
            {
                id: 4, section: "IN-Ph-001", question: "Alprostadil is clinically indicated for which of the following conditions in neonates?",
                options: ["Closing a patent ductus arteriosus", "Maintaining patency of the ductus arteriosus", "Pulmonary hypertension", "RDS"], answer: 1,
                explanation: "Alprostadil (PGE1) maintains the patency of the ductus arteriosus in neonates with heart defects."
            },
            {
                id: 5, section: "IN-Ph-001", question: "Which drug is a prostacyclin (PGI2) analogue used in the treatment of severe pulmonary hypertension?",
                options: ["Epoprostenol", "Lubiprostone", "Travoprost", "Dinoprostone"], answer: 0,
                explanation: "Epoprostenol is a synthetic PGI2 (prostacyclin) used for pulmonary hypertension."
            },
            {
                id: 6, section: "IN-Ph-001", question: "A known adverse effect of systemic misoprostol that makes it contraindicated in pregnancy is:",
                options: ["Hypertension", "Uterine contractions and abortion", "Hyperglycemia", "Thrombosis"], answer: 1,
                explanation: "Misoprostol stimulates uterine contractions, posing a high risk of abortion."
            },
            {
                id: 7, section: "IN-Ph-001", question: "Which prostaglandin analogue is used effectively for the treatment of erectile dysfunction via intracavernosal injection?",
                options: ["Latanoprost", "Alprostadil", "Misoprostol", "Treprostinil"], answer: 1,
                explanation: "Alprostadil relaxes smooth muscle in the corpus cavernosum, aiding erection."
            },
            {
                id: 8, section: "IN-Ph-001", question: "Carboprost tromethamine is a PGF2α analogue clinically used for:",
                options: ["Glaucoma", "Controlling intractable postpartum hemorrhage", "Pulmonary hypertension", "Peptic ulcer"], answer: 1,
                explanation: "Carboprost is a potent oxytocic used to stop postpartum hemorrhage."
            },
            {
                id: 9, section: "IN-Ph-001", question: "Lubiprostone is a derivative of PGE1 that is indicated for:",
                options: ["Glaucoma", "Chronic idiopathic constipation and IBS", "Induction of labor", "Erectile dysfunction"], answer: 1,
                explanation: "Lubiprostone activates chloride channels in the gut, treating constipation."
            },
            {
                id: 10, section: "IN-Ph-001", question: "Which of the following drugs acts by activating chloride channels (ClC-2) in the intestinal epithelium?",
                options: ["Misoprostol", "Lubiprostone", "Treprostinil", "Bimatoprost"], answer: 1,
                explanation: "Lubiprostone works via ClC-2 chloride channel activation."
            },
            {
                id: 11, section: "IN-Ph-001", question: "A patient taking inhaled Iloprost for pulmonary hypertension may experience which common side effect?",
                options: ["Bradycardia", "Flushing and headache", "Bronchoconstriction", "Dry mouth"], answer: 1,
                explanation: "Iloprost causes vasodilation, leading to flushing and headaches."
            },
            {
                id: 12, section: "IN-Ph-001", question: "Dinoprostone is a synthetic preparation of which naturally occurring prostaglandin?",
                options: ["PGI2", "PGF2α", "PGE2", "TXA2"], answer: 2,
                explanation: "Dinoprostone is synthetic PGE2."
            },
            {
                id: 13, section: "IN-Ph-001", question: "What is the primary clinical use of Dinoprostone?",
                options: ["Cervical ripening and induction of labor", "Glaucoma treatment", "Gastric cytoprotection", "Pulmonary hypertension"], answer: 0,
                explanation: "It is used vaginally for cervical ripening."
            },
            {
                id: 14, section: "IN-Ph-001", question: "Bimatoprost is marketed under a different trade name for which cosmetic indication?",
                options: ["Skin lightening", "Hypotrichosis (eyelash growth)", "Acne treatment", "Hair loss on scalp"], answer: 1,
                explanation: "Bimatoprost promotes eyelash growth (Latisse)."
            },
            {
                id: 15, section: "IN-Ph-001", question: "Which drug is an analogue of PGI2 that has a longer half-life than Epoprostenol?",
                options: ["Alprostadil", "Treprostinil", "Misoprostol", "Latanoprost"], answer: 1,
                explanation: "Treprostinil is a more stable PGI2 analogue."
            },
            {
                id: 16, section: "IN-Ph-001", question: "In the treatment of glaucoma, Latanoprost works primarily by:",
                options: ["Decreasing aqueous humor production", "Increasing uveoscleral outflow", "Contracting ciliary muscle", "Dilating pupil"], answer: 1,
                explanation: "PGF2α analogues increase uveoscleral outflow."
            },
            {
                id: 17, section: "IN-Ph-001", question: "The primary limiting factor for the use of Epoprostenol is:",
                options: ["Extremely short half-life (needs continuous IV)", "Renal toxicity", "Constipation", "Antibiotic interaction"], answer: 0,
                explanation: "Epoprostenol degrades in minutes and requires a pump."
            },
            {
                id: 18, section: "IN-Ph-001", question: "Which prostaglandin analogue causes bronchoconstriction and should be used with caution in asthmatics?",
                options: ["Epoprostenol", "Carboprost (PGF2α)", "Lubiprostone", "Treprostinil"], answer: 1,
                explanation: "PGF2α (Carboprost) constricts bronchial smooth muscle."
            },
            {
                id: 19, section: "IN-Ph-001", question: "Selexipag is a newer agent for pulmonary hypertension that acts as a:",
                options: ["Selective IP receptor agonist", "COX inhibitor", "Thromboxane synthase inhibitor", "Endothelin antagonist"], answer: 0,
                explanation: "Selexipag targets the Prostacyclin (IP) receptor."
            },
            {
                id: 20, section: "IN-Ph-001", question: "When using Misoprostol for NSAID-induced ulcers, the dose-limiting side effect is:",
                options: ["Diarrhea and abdominal cramping", "Headache", "Tachycardia", "Fluid retention"], answer: 0,
                explanation: "Prostaglandins increase gut motility, causing diarrhea."
            },
            // IN-Ph-002: Anti-inflammatory Drugs (21-40)
            {
                id: 21, section: "IN-Ph-002", question: "The fundamental mechanism differentiating SAIDs from NSAIDs is:",
                options: ["SAIDs inhibit COX-1; NSAIDs inhibit COX-2", "SAIDs inhibit Phospholipase A2; NSAIDs inhibit COX", "SAIDs block histamine", "SAIDs increase arachidonic acid"], answer: 1,
                explanation: "Steroids act upstream on Phospholipase A2; NSAIDs act downstream on COX."
            },
            {
                id: 22, section: "IN-Ph-002", question: "Which molecule is induced by glucocorticoids to inhibit Phospholipase A2?",
                options: ["Annexin-1 (Lipocortin)", "Arachidonic Acid", "Thromboxane A2", "Glutathione"], answer: 0,
                explanation: "Lipocortins (Annexins) inhibit Phospholipase A2."
            },
            {
                id: 23, section: "IN-Ph-002", question: "NSAIDs are generally unable to block the production of which mediator that Steroids CAN block?",
                options: ["Prostaglandin E2", "Prostacyclin", "Leukotrienes", "Thromboxane"], answer: 2,
                explanation: "NSAIDs only block the COX pathway; Steroids block Arachidonic acid release, thus blocking Leukotrienes (LOX pathway) too."
            },
            {
                id: 24, section: "IN-Ph-002", question: "Which physiological effect is characteristic of Glucocorticoids but NOT NSAIDs?",
                options: ["Analgesia", "Antipyresis", "Hyperglycemia and protein catabolism", "Anti-platelet effects"], answer: 2,
                explanation: "Steroids have profound metabolic effects (glucose, protein, fat)."
            },
            {
                id: 25, section: "IN-Ph-002", question: "Regarding mechanism of action, most NSAIDs (like Ibuprofen) are:",
                options: ["Reversible inhibitors of COX enzymes", "Irreversible inhibitors", "Selective antagonists", "Inhibitors of LOX"], answer: 0,
                explanation: "Most NSAIDs are reversible; Aspirin is irreversible."
            },
            {
                id: 26, section: "IN-Ph-002", question: "Aspirin is unique among NSAIDs because it:",
                options: ["Selectively inhibits COX-2", "Irreversibly acetylates the COX enzyme", "Has no GI side effects", "Is a prodrug"], answer: 1,
                explanation: "Aspirin forms a covalent bond with COX."
            },
            {
                id: 27, section: "IN-Ph-002", question: "Why do NSAIDs cause bronchospasm in 'aspirin-sensitive' asthmatics?",
                options: ["Direct airway irritation", "Shunting arachidonic acid to Leukotriene pathway", "Histamine release", "Beta-2 blockade"], answer: 1,
                explanation: "Blocking COX pushes arachidonic acid towards the LOX pathway, creating bronchoconstrictive leukotrienes."
            },
            {
                id: 28, section: "IN-Ph-002", question: "Which drug class is considered 'Disease-Modifying' (DMARD) in RA, whereas NSAIDs are symptomatic?",
                options: ["Aspirin", "Methotrexate", "Ibuprofen", "Acetaminophen"], answer: 1,
                explanation: "Methotrexate alters the disease course; NSAIDs just treat pain."
            },
            {
                id: 29, section: "IN-Ph-002", question: "The anti-inflammatory effect of NSAIDs is primarily due to the reduction of:",
                options: ["Histamine", "Bradykinin", "Prostaglandins at the site of injury", "Interleukins"], answer: 2,
                explanation: "Prostaglandins mediate inflammation, pain, and fever."
            },
            {
                id: 30, section: "IN-Ph-002", question: "Which adverse effect is a hallmark of chronic high-dose Steroid use but NOT NSAID use?",
                options: ["Gastric Ulcers", "Iatrogenic Cushing’s Syndrome", "Renal vasoconstriction", "Bleeding tendency"], answer: 1,
                explanation: "Cushing's syndrome (moon face, hump) is specific to steroids."
            },
            {
                id: 31, section: "IN-Ph-002", question: "How do Steroidal drugs affect the immune system compared to NSAIDs?",
                options: ["NSAIDs are potent immunosuppressants", "Steroids cause lymphopenia and suppress cell-mediated immunity", "Both increase antibodies", "Neither affects it"], answer: 1,
                explanation: "Steroids are potent immunosuppressants; NSAIDs are not."
            },
            {
                id: 32, section: "IN-Ph-002", question: "Which of the following is a Steroidal Anti-inflammatory drug?",
                options: ["Indomethacin", "Piroxicam", "Dexamethasone", "Ketorolac"], answer: 2,
                explanation: "Dexamethasone is a potent glucocorticoid."
            },
            {
                id: 33, section: "IN-Ph-002", question: "Which of the following is a Non-Steroidal Anti-inflammatory drug (NSAID)?",
                options: ["Betamethasone", "Naproxen", "Prednisolone", "Triamcinolone"], answer: 1,
                explanation: "Naproxen is a classic NSAID."
            },
            {
                id: 34, section: "IN-Ph-002", question: "Glucocorticoids exert their effects primarily via:",
                options: ["Cell membrane channels", "Intracellular genomic receptors", "Plasma enzyme inhibition", "G-protein coupled receptors"], answer: 1,
                explanation: "They bind cytoplasmic receptors that translocate to the nucleus to alter gene transcription."
            },
            {
                id: 35, section: "IN-Ph-002", question: "The 'mineralocorticoid' effect (sodium and water retention) is most prominent in:",
                options: ["Celecoxib", "Hydrocortisone (Cortisol)", "Ibuprofen", "Aspirin"], answer: 1,
                explanation: "Hydrocortisone has significant mineralocorticoid activity."
            },
            {
                id: 36, section: "IN-Ph-002", question: "In terms of bone health, chronic use of steroids differs from NSAIDs because steroids cause:",
                options: ["Increased bone density", "Osteoporosis and osteonecrosis", "Bone spurs", "No effect"], answer: 1,
                explanation: "Steroids inhibit osteoblasts and reduce calcium absorption."
            },
            {
                id: 37, section: "IN-Ph-002", question: "Which enzyme converts membrane phospholipids into Arachidonic Acid?",
                options: ["Cyclooxygenase", "Lipoxygenase", "Phospholipase A2", "Thromboxane Synthase"], answer: 2,
                explanation: "Phospholipase A2 releases arachidonic acid from the membrane."
            },
            {
                id: 38, section: "IN-Ph-002", question: "NSAIDs can cause renal impairment by blocking the synthesis of which vasodilatory prostaglandins?",
                options: ["PGF2α", "PGE2 and PGI2", "TXA2", "PGD2"], answer: 1,
                explanation: "PGE2 and PGI2 maintain renal blood flow."
            },
            {
                id: 39, section: "IN-Ph-002", question: "Steroids are often preferred over NSAIDs for which condition due to immunosuppression?",
                options: ["Headache", "Dysmenorrhea", "Transplant rejection prevention", "PDA closure"], answer: 2,
                explanation: "Transplants require immune suppression, which steroids provide."
            },
            {
                id: 40, section: "IN-Ph-002", question: "Regarding platelet function:",
                options: ["Steroids destroy platelets", "Aspirin permanently inhibits aggregation; Steroids do not", "NSAIDs increase count", "Steroids are anticoagulants"], answer: 1,
                explanation: "Aspirin irreversibly blocks TXA2 production in platelets."
            },
            // IN-Ph-003: Steroids (41-60)
            {
                id: 41, section: "IN-Ph-003", question: "The anti-inflammatory action of glucocorticoids is primarily mediated by the induction of which protein?",
                options: ["COX-2", "Lipocortin (Annexin-1)", "IL-2", "Phospholipase A2"], answer: 1,
                explanation: "Lipocortin inhibits Phospholipase A2."
            },
            {
                id: 42, section: "IN-Ph-003", question: "Which of the following is a short-to-medium acting glucocorticoid?",
                options: ["Dexamethasone", "Betamethasone", "Prednisone", "Aldosterone"], answer: 2,
                explanation: "Prednisone is intermediate-acting; Dexamethasone is long-acting."
            },
            {
                id: 43, section: "IN-Ph-003", question: "The most serious risk associated with abrupt withdrawal of long-term corticosteroids is:",
                options: ["Hyperglycemia", "Acute adrenal insufficiency (Adrenal Crisis)", "Peptic ulcer", "Hypertension"], answer: 1,
                explanation: "The HPA axis is suppressed, so the body cannot produce cortisol abruptly."
            },
            {
                id: 44, section: "IN-Ph-003", question: "Which agent is preferred for fetal lung maturation because it crosses the placenta efficiently?",
                options: ["Hydrocortisone", "Betamethasone", "Prednisone", "Cortisone"], answer: 1,
                explanation: "Betamethasone (and Dexamethasone) crosses the placenta well."
            },
            {
                id: 45, section: "IN-Ph-003", question: "Which metabolic effect is a known consequence of chronic glucocorticoid therapy?",
                options: ["Hypoglycemia", "Increased muscle mass", "Gluconeogenesis and insulin resistance", "Hypolipidemia"], answer: 2,
                explanation: "Steroids raise blood sugar via gluconeogenesis."
            },
            {
                id: 46, section: "IN-Ph-003", question: "Moon face, buffalo hump, and central obesity are signs of:",
                options: ["Addison’s disease", "Iatrogenic Cushing’s syndrome", "Conn’s syndrome", "Graves’ disease"], answer: 1,
                explanation: "These are classic signs of Cushing's syndrome."
            },
            {
                id: 47, section: "IN-Ph-003", question: "Glucocorticoids reduce inflammation by inhibiting the synthesis of:",
                options: ["Only Prostaglandins", "Only Leukotrienes", "Both Prostaglandins and Leukotrienes", "Histamine only"], answer: 2,
                explanation: "By blocking PLA2, they stop the source of both pathways."
            },
            {
                id: 48, section: "IN-Ph-003", question: "Which ocular adverse effect is associated with long-term corticosteroid use?",
                options: ["Miosis", "Posterior subcapsular cataracts and Glaucoma", "Retinal detachment", "Conjunctivitis"], answer: 1,
                explanation: "Steroids increase IOP and cause cataracts."
            },
            {
                id: 49, section: "IN-Ph-003", question: "In acute severe asthma, corticosteroids are used primarily to:",
                options: ["Cause immediate bronchodilation", "Reduce bronchial inflammation", "Block histamine", "Inhibit cough"], answer: 1,
                explanation: "They reduce airway inflammation and edema."
            },
            {
                id: 50, section: "IN-Ph-003", question: "Osteoporosis induced by corticosteroids is due to:",
                options: ["Increased calcium absorption", "Inhibition of osteoblasts and decreased Ca absorption", "Activation of Vitamin D", "Increased renal reabsorption"], answer: 1,
                explanation: "They reduce bone formation and calcium absorption."
            },
            {
                id: 51, section: "IN-Ph-003", question: "Which drug is a mineralocorticoid antagonist used in heart failure?",
                options: ["Spironolactone", "Dexamethasone", "Triamcinolone", "Methylprednisolone"], answer: 0,
                explanation: "Spironolactone blocks aldosterone receptors."
            },
            {
                id: 52, section: "IN-Ph-003", question: "The mechanism of action of glucocorticoids involves binding to receptors located in the:",
                options: ["Cell membrane", "Cytoplasm", "Mitochondria", "Endoplasmic reticulum"], answer: 1,
                explanation: "Glucocorticoid receptors are cytosolic."
            },
            {
                id: 53, section: "IN-Ph-003", question: "Why is Prednisone inactive when applied topically?",
                options: ["Too hydrophilic", "It is a prodrug requiring hepatic conversion", "Causes irritation", "Evaporates"], answer: 1,
                explanation: "Prednisone must be converted to Prednisolone by the liver."
            },
            {
                id: 54, section: "IN-Ph-003", question: "Which psychiatric adverse effect can occur with high-dose corticosteroids?",
                options: ["Sedation", "Euphoria, mania, or depression", "Memory loss", "Hallucinations"], answer: 1,
                explanation: "Steroid psychosis includes mania and mood swings."
            },
            {
                id: 55, section: "IN-Ph-003", question: "Glucocorticoids suppress the immune system by:",
                options: ["Increasing T-cells", "Sequestering lymphocytes (lymphopenia)", "Enhancing antibodies", "Stimulating macrophages"], answer: 1,
                explanation: "They cause lymphocytes to move out of the blood into lymphoid tissue."
            },
            {
                id: 56, section: "IN-Ph-003", question: "A diabetic patient prescribed corticosteroids requires close monitoring of:",
                options: ["Potassium", "Blood glucose levels", "Uric acid", "Platelets"], answer: 1,
                explanation: "Steroids cause hyperglycemia."
            },
            {
                id: 57, section: "IN-Ph-003", question: "Alternate-day therapy with glucocorticoids is used to:",
                options: ["Increase effect", "Minimize suppression of the HPA axis", "Reduce cost", "Prevent gastric irritation"], answer: 1,
                explanation: "It allows the HPA axis to recover on the 'off' day."
            },
            {
                id: 58, section: "IN-Ph-003", question: "Topical corticosteroids are contraindicated in viral skin infections because they:",
                options: ["Are ineffective", "Suppress local immunity and spread infection", "Cause allergy", "Interact with antivirals"], answer: 1,
                explanation: "Immunosuppression allows viral replication."
            },
            {
                id: 59, section: "IN-Ph-003", question: "Which is a potent, long-acting glucocorticoid with no sodium-retaining activity?",
                options: ["Hydrocortisone", "Cortisone", "Dexamethasone", "Prednisolone"], answer: 2,
                explanation: "Dexamethasone has zero mineralocorticoid activity."
            },
            {
                id: 60, section: "IN-Ph-003", question: "The 'permissive' effect of glucocorticoids refers to:",
                options: ["Allowing bacteria growth", "Potentiating catecholamines on smooth muscle", "Permitting water excretion", "DNA replication"], answer: 1,
                explanation: "They increase sensitivity to catecholamines."
            },
            // IN-Ph-004: NSAIDs (61-80)
            {
                id: 61, section: "IN-Ph-004", question: "The primary mechanism of action of NSAIDs is the inhibition of:",
                options: ["Phospholipase A2", "Cyclooxygenase (COX) enzymes", "Lipoxygenase enzymes", "Thromboxane synthase"], answer: 1,
                explanation: "NSAIDs block COX-1 and/or COX-2."
            },
            {
                id: 62, section: "IN-Ph-004", question: "Which NSAID is the drug of choice for closing a patent ductus arteriosus (PDA)?",
                options: ["Aspirin", "Indomethacin (or Ibuprofen)", "Celecoxib", "Diclofenac"], answer: 1,
                explanation: "Indomethacin is traditionally used to close the PDA."
            },
            {
                id: 63, section: "IN-Ph-004", question: "Ketorolac is unique among NSAIDs because it is:",
                options: ["Selective COX-2", "Potent analgesic for short-term post-op pain", "Free of renal toxicity", "Safe in pregnancy"], answer: 1,
                explanation: "Ketorolac has analgesic potency similar to opioids."
            },
            {
                id: 64, section: "IN-Ph-004", question: "A patient with peptic ulcer disease presents with gout. Which NSAID is most hazardous?",
                options: ["Ibuprofen", "Indomethacin", "Celecoxib", "Acetaminophen"], answer: 1,
                explanation: "Indomethacin has a high incidence of GI toxicity."
            },
            {
                id: 65, section: "IN-Ph-004", question: "Which NSAID has the longest half-life, allowing for once-daily dosing?",
                options: ["Ibuprofen", "Piroxicam", "Diclofenac", "Aspirin"], answer: 1,
                explanation: "Piroxicam has a very long half-life (~50 hours)."
            },
            {
                id: 66, section: "IN-Ph-004", question: "The antipyretic effect of NSAIDs is mediated by inhibiting PG production in the:",
                options: ["Liver", "Hypothalamus", "Kidney", "Peripheral tissues"], answer: 1,
                explanation: "The thermoregulatory center is in the hypothalamus."
            },
            {
                id: 67, section: "IN-Ph-004", question: "Salicylism is a toxicity syndrome characterized by:",
                options: ["Tinnitus, vertigo, and hearing loss", "Blindness", "Paralysis", "Hypertension"], answer: 0,
                explanation: "Tinnitus is the hallmark of salicylate toxicity."
            },
            {
                id: 68, section: "IN-Ph-004", question: "NSAIDs can reduce the efficacy of which class of antihypertensives?",
                options: ["Calcium channel blockers", "ACE Inhibitors and Diuretics", "Alpha blockers", "Direct vasodilators"], answer: 1,
                explanation: "ACEIs and Diuretics rely on renal prostaglandins."
            },
            {
                id: 69, section: "IN-Ph-004", question: "Which population is at highest risk for 'Aspirin-exacerbated respiratory disease'?",
                options: ["Peptic ulcer patients", "Patients with nasal polyps and asthma", "Heart failure patients", "Children"], answer: 1,
                explanation: "Samter's triad: Asthma, Nasal Polyps, Aspirin sensitivity."
            },
            {
                id: 70, section: "IN-Ph-004", question: "Naproxen is often preferred for chronic conditions because:",
                options: ["No GI effects", "Intermediate half-life & favorable cardio profile", "Selective COX-2", "More potent"], answer: 1,
                explanation: "Naproxen is considered safer for the heart than other NSAIDs."
            },
            {
                id: 71, section: "IN-Ph-004", question: "The primary cause of NSAID-induced gastric mucosal injury is:",
                options: ["Acidic irritation", "Inhibition of COX-1 mediated protective PGs", "Increased motility", "Pepsin inhibition"], answer: 1,
                explanation: "Loss of protective PGE2 leads to ulcers."
            },
            {
                id: 72, section: "IN-Ph-004", question: "Diclofenac is an NSAID notable for accumulating in:",
                options: ["Brain", "Synovial fluid", "Liver", "Adipose"], answer: 1,
                explanation: "This makes it effective for joint inflammation."
            },
            {
                id: 73, section: "IN-Ph-004", question: "Sulindac is a prodrug. This theoretically reduces toxicity to the:",
                options: ["Kidney", "Stomach (direct mucosal contact)", "Liver", "Bone marrow"], answer: 1,
                explanation: "Being inactive until absorbed spares the stomach lining directly."
            },
            {
                id: 74, section: "IN-Ph-004", question: "Mefenamic acid is frequently used for:",
                options: ["Gout", "Primary dysmenorrhea", "PDA", "Fever"], answer: 1,
                explanation: "It is commonly used for menstrual pain."
            },
            {
                id: 75, section: "IN-Ph-004", question: "Phenylbutazone is rarely used today due to risk of:",
                options: ["Aplastic anemia and agranulocytosis", "Liver failure", "Heart failure", "Seizures"], answer: 0,
                explanation: "Bone marrow suppression is a severe risk."
            },
            {
                id: 76, section: "IN-Ph-004", question: "Why does Aspirin's anti-platelet effect last 7-10 days?",
                options: ["Long half-life", "Covalent, irreversible bond with COX-1", "Stored in platelet", "Alters membrane"], answer: 1,
                explanation: "Platelets cannot synthesize new COX, so the effect lasts until they die."
            },
            {
                id: 77, section: "IN-Ph-004", question: "NSAIDs are avoided in late pregnancy because they can cause:",
                options: ["Prolonged labor", "Fetal malformations", "Maternal hypertension", "Prolonged labor and premature PDA closure"], answer: 3,
                explanation: "They stop labor contractions and close the ductus arteriosus."
            },
            {
                id: 78, section: "IN-Ph-004", question: "Renal toxicity of NSAIDs is most likely in patients with:",
                options: ["Normal kidneys", "Congestive heart failure or renal disease", "Liver failure", "Asthma"], answer: 1,
                explanation: "These patients depend on PGs for renal blood flow."
            },
            {
                id: 79, section: "IN-Ph-004", question: "Diflunisal differs from aspirin because it:",
                options: ["Lacks antipyretic effect (doesn't cross BBB)", "Is COX-2 selective", "Causes Reye's", "IV only"], answer: 0,
                explanation: "It is a poor antipyretic due to poor CNS penetration."
            },
            {
                id: 80, section: "IN-Ph-004", question: "Ibuprofen interferes with Aspirin's cardioprotection if:",
                options: ["Taken 2 hours after", "Taken concomitantly or before", "Taken weekly", "Taken with food"], answer: 1,
                explanation: "It blocks the binding site, preventing Aspirin from acetylating COX."
            },
            // IN-Ph-005: COX/Others (81-100)
            {
                id: 81, section: "IN-Ph-005", question: "The 'Constitutive' isoform of COX responsible for housekeeping is:",
                options: ["COX-1", "COX-2", "COX-3", "LOX"], answer: 0,
                explanation: "COX-1 is always present (constitutive)."
            },
            {
                id: 82, section: "IN-Ph-005", question: "The 'Inducible' isoform of COX upregulated in inflammation is:",
                options: ["COX-1", "COX-2", "COX-3", "Phospholipase"], answer: 1,
                explanation: "COX-2 is induced by cytokines."
            },
            {
                id: 83, section: "IN-Ph-005", question: "Celecoxib carries a potential warning for:",
                options: ["Cardiovascular thrombotic events", "Liver failure", "Aplastic anemia", "Pulmonary fibrosis"], answer: 0,
                explanation: "COX-2 inhibitors tilt the balance towards thrombosis (TXA2 > PGI2)."
            },
            {
                id: 84, section: "IN-Ph-005", question: "Why is Paracetamol NOT considered a true NSAID?",
                options: ["It is a steroid", "Lacks peripheral anti-inflammatory activity", "Causes sedation", "Not an acid"], answer: 1,
                explanation: "It works in the CNS but is inactivated by peroxides in inflamed tissues."
            },
            {
                id: 85, section: "IN-Ph-005", question: "The toxic metabolite of Paracetamol is:",
                options: ["Salicylic acid", "N-acetyl-p-benzoquinone imine (NAPQI)", "Acetaldehyde", "Gentisic acid"], answer: 1,
                explanation: "NAPQI causes liver necrosis."
            },
            {
                id: 86, section: "IN-Ph-005", question: "The antidote for Paracetamol poisoning is:",
                options: ["Flumazenil", "N-acetylcysteine (NAC)", "Naloxone", "Atropine"], answer: 1,
                explanation: "NAC replenishes glutathione."
            },
            {
                id: 87, section: "IN-Ph-005", question: "Aspirin is contraindicated in children with viral infections due to:",
                options: ["Reye’s Syndrome", "SJS", "GBS", "Kawasaki"], answer: 0,
                explanation: "Reye's syndrome causes liver/brain damage."
            },
            {
                id: 88, section: "IN-Ph-005", question: "Which is a Second-Generation (Non-sedating) H1 Antihistamine?",
                options: ["Diphenhydramine", "Chlorpheniramine", "Loratadine", "Promethazine"], answer: 2,
                explanation: "Loratadine does not cross the BBB."
            },
            {
                id: 89, section: "IN-Ph-005", question: "First-generation antihistamines treat motion sickness by blocking:",
                options: ["H2 receptors", "Muscarinic receptors", "Dopamine receptors", "5-HT3"], answer: 1,
                explanation: "The anticholinergic effect helps vestibular symptoms."
            },
            {
                id: 90, section: "IN-Ph-005", question: "Sedation from first-generation antihistamines is due to:",
                options: ["Hypoglycemia", "Crossing BBB and blocking central H1", "Blocking GABA", "Dopamine release"], answer: 1,
                explanation: "Blockade of H1 receptors in the brain causes sedation."
            },
            {
                id: 91, section: "IN-Ph-005", question: "Which antihistamine causes Torsades de Pointes with CYP3A4 inhibitors?",
                options: ["Cetirizine", "Terfenadine", "Fexofenadine", "Loratadine"], answer: 1,
                explanation: "Terfenadine blocks cardiac K+ channels."
            },
            {
                id: 92, section: "IN-Ph-005", question: "Fexofenadine is the active metabolite of:",
                options: ["Loratadine", "Terfenadine", "Diphenhydramine", "Hydroxyzine"], answer: 1,
                explanation: "Fexofenadine is safe; Terfenadine is toxic."
            },
            {
                id: 93, section: "IN-Ph-005", question: "H1 antihistamines are most effective when used to:",
                options: ["Reverse bronchospasm", "Prevent symptoms (prophylaxis)", "Treat asthma", "Treat delayed hypersensitivity"], answer: 1,
                explanation: "They block the receptor but cannot displace bound histamine easily."
            },
            {
                id: 94, section: "IN-Ph-005", question: "Which physiological effect is mediated by H1 receptors?",
                options: ["Acid secretion", "Bronchoconstriction and permeability", "Tachycardia", "Inhibition of NTs"], answer: 1,
                explanation: "H1 mediates allergic symptoms; H2 mediates acid."
            },
            {
                id: 95, section: "IN-Ph-005", question: "Cetirizine is unique among 2nd gen antihistamines because:",
                options: ["Causes arrhythmias", "Higher incidence of sedation", "Liver metabolism", "Prodrug"], answer: 1,
                explanation: "It can cause mild sedation in some users."
            },
            {
                id: 96, section: "IN-Ph-005", question: "Cyproheptadine is an H1 antagonist that also blocks:",
                options: ["Dopamine", "Serotonin (5-HT2)", "Beta", "Opioid"], answer: 1,
                explanation: "Used for serotonin syndrome and appetite stimulation."
            },
            {
                id: 97, section: "IN-Ph-005", question: "Promethazine is used as an antihistamine and a powerful:",
                options: ["Antiemetic", "Anticonvulsant", "Anticoagulant", "Antidepressant"], answer: 0,
                explanation: "Effective for nausea/vomiting."
            },
            {
                id: 98, section: "IN-Ph-005", question: "Unlike NSAIDs, Paracetamol can be safely used in:",
                options: ["Liver failure", "Peptic ulcer or hemophilia", "Alcoholics", "Depleted glutathione"], answer: 1,
                explanation: "It does not damage the stomach or affect bleeding."
            },
            {
                id: 99, section: "IN-Ph-005", question: "Which drug is a 'COX-2 Selective' inhibitor?",
                options: ["Ibuprofen", "Naproxen", "Celecoxib", "Ketorolac"], answer: 2,
                explanation: "Celecoxib is the prototype COX-2 inhibitor."
            },
            {
                id: 100, section: "IN-Ph-005", question: "The 'triple response of Lewis' is caused by:",
                options: ["Bradykinin", "Histamine", "Prostaglandins", "Leukotrienes"], answer: 1,
                explanation: "Histamine causes Red spot, Flare, and Wheal."
            }
        ];

        // --- STATE MANAGEMENT ---
        let currentSectionQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let wrongAnswers = [];

        // --- DOM ELEMENTS ---
        const sectionMenu = document.getElementById('section-menu');
        const quizContainer = document.getElementById('quiz-container');
        const resultScreen = document.getElementById('result-screen');
        
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const scoreBadge = document.getElementById('score-badge');
        const explanationBox = document.getElementById('explanation-box');
        const explanationText = document.getElementById('explanation-text');
        const nextBtn = document.getElementById('next-btn');
        const finalScoreDisplay = document.getElementById('final-score');
        const reviewSection = document.getElementById('review-section');
        const wrongAnswersList = document.getElementById('wrong-answers-list');

        // --- INITIALIZATION ---
        function init() {
            const sections = [
                { id: "IN-Ph-001", title: "Prostaglandin Analogues", desc: "Q1-20: Uses & Adverse Effects" },
                { id: "IN-Ph-002", title: "Anti-Inflammatory Drugs", desc: "Q21-40: Classification & Steroids vs NSAIDs" },
                { id: "IN-Ph-003", title: "Steroids (Glucocorticoids)", desc: "Q41-60: Mechanism & Toxicity" },
                { id: "IN-Ph-004", title: "NSAIDs", desc: "Q61-80: Pharmacology & Side Effects" },
                { id: "IN-Ph-005", title: "COX, Aspirin & Antihistamines", desc: "Q81-100: Specific Agents" }
            ];

            const container = sectionMenu.querySelector('.grid');
            container.innerHTML = '';

            sections.forEach(sec => {
                const btn = document.createElement('button');
                btn.className = "bg-[#2d1b4e] border border-purple-500/30 hover:border-yellow-400 p-6 rounded-2xl text-left transition-all hover:bg-purple-900/50 group shadow-lg";
                btn.onclick = () => startQuiz(sec.id);
                btn.innerHTML = `
                    <div class="flex items-center justify-between mb-2">
                        <span class="bg-yellow-400/10 text-yellow-400 text-xs px-2 py-1 rounded uppercase tracking-wide">${sec.id}</span>
                        <i class="fa-solid fa-chevron-right text-gray-500 group-hover:text-yellow-400 transition"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-1 group-hover:text-yellow-300 transition">${sec.title}</h3>
                    <p class="text-sm text-gray-400">${sec.desc}</p>
                `;
                container.appendChild(btn);
            });
        }

        // --- QUIZ LOGIC ---
        function startQuiz(sectionId) {
            currentSectionQuestions = questionBank.filter(q => q.section === sectionId);
            currentQuestionIndex = 0;
            score = 0;
            wrongAnswers = [];
            
            sectionMenu.classList.add('hidden');
            resultScreen.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            
            renderQuestion();
        }

        function renderQuestion() {
            const q = currentSectionQuestions[currentQuestionIndex];
            
            // Update UI
            questionText.innerText = `${currentQuestionIndex + 1}. ${q.question}`;
            progressText.innerText = `Question ${currentQuestionIndex + 1}/${currentSectionQuestions.length}`;
            scoreBadge.innerText = `Score: ${score}`;
            progressBar.style.width = `${((currentQuestionIndex) / currentSectionQuestions.length) * 100}%`;
            
            // Reset State
            optionsContainer.innerHTML = '';
            explanationBox.classList.add('hidden');
            nextBtn.classList.add('hidden');

            // Create Options
            q.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = "option-btn w-full text-left p-4 rounded-xl border border-gray-600 bg-gray-800/50 hover:bg-gray-700 text-gray-200 font-medium relative";
                btn.innerHTML = `<span class="inline-block w-6 h-6 rounded-full bg-gray-700 text-center text-xs leading-6 mr-3 border border-gray-600">${String.fromCharCode(65 + index)}</span> ${opt}`;
                btn.onclick = () => checkAnswer(index, btn);
                optionsContainer.appendChild(btn);
            });
        }

        function checkAnswer(selectedIndex, btnElement) {
            // Disable all buttons
            const buttons = optionsContainer.querySelectorAll('button');
            buttons.forEach(b => b.disabled = true);

            const q = currentSectionQuestions[currentQuestionIndex];
            const isCorrect = selectedIndex === q.answer;

            if (isCorrect) {
                score++;
                btnElement.classList.add('correct-anim');
                btnElement.querySelector('span').classList.replace('bg-gray-700', 'bg-green-600');
                scoreBadge.innerText = `Score: ${score}`;
            } else {
                btnElement.classList.add('wrong-anim');
                btnElement.querySelector('span').classList.replace('bg-gray-700', 'bg-red-600');
                
                // Highlight correct answer
                buttons[q.answer].classList.add('correct-anim');
                buttons[q.answer].querySelector('span').classList.replace('bg-gray-700', 'bg-green-600');
                
                wrongAnswers.push({
                    question: q.question,
                    yourAnswer: q.options[selectedIndex],
                    correctAnswer: q.options[q.answer],
                    explanation: q.explanation
                });
            }

            // Show Explanation
            explanationText.innerHTML = `<strong>${isCorrect ? "Correct!" : "Incorrect."}</strong> ${q.explanation}`;
            explanationBox.classList.remove('hidden');
            
            // Show Next Button
            nextBtn.classList.remove('hidden');
            
            // Update Progress Bar
            progressBar.style.width = `${((currentQuestionIndex + 1) / currentSectionQuestions.length) * 100}%`;
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < currentSectionQuestions.length) {
                renderQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            quizContainer.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            
            const percentage = Math.round((score / currentSectionQuestions.length) * 100);
            finalScoreDisplay.innerText = `${percentage}%`;
            finalScoreDisplay.className = `text-6xl font-bold mb-8 ${percentage >= 70 ? 'text-green-400' : 'text-red-400'}`;

            // Render Wrong Answers
            if (wrongAnswers.length > 0) {
                reviewSection.classList.remove('hidden');
                wrongAnswersList.innerHTML = '';
                wrongAnswers.forEach(item => {
                    const div = document.createElement('div');
                    div.className = "bg-gray-800/50 p-4 rounded-xl border border-red-500/20";
                    div.innerHTML = `
                        <p class="text-white font-semibold mb-2 text-sm md:text-base">${item.question}</p>
                        <div class="text-xs md:text-sm grid gap-1">
                            <p class="text-red-400"><i class="fa-solid fa-xmark mr-2"></i>Your Answer: ${item.yourAnswer}</p>
                            <p class="text-green-400"><i class="fa-solid fa-check mr-2"></i>Correct Answer: ${item.correctAnswer}</p>
                            <p class="text-blue-300 mt-2 italic border-t border-gray-700 pt-2"><i class="fa-solid fa-lightbulb mr-1"></i> ${item.explanation}</p>
                        </div>
                    `;
                    wrongAnswersList.appendChild(div);
                });
            } else {
                reviewSection.classList.add('hidden');
            }
        }

        function restartModule() {
            // Identify current section ID by checking the first question of the last set
            // Or simply reload the section menu for simplicity, but user asked for 'Retry'
            // We can store the last section ID
            const currentSecID = currentSectionQuestions[0].section;
            startQuiz(currentSecID);
        }

        function goHome() {
            quizContainer.classList.add('hidden');
            resultScreen.classList.add('hidden');
            sectionMenu.classList.remove('hidden');
        }

        // Run
        init();

    </script>
</body>
</html>


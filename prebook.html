<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Pre-Order | MIND YOUR MINORS BLOCK 6</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
<style>
/* --- All your CSS unchanged --- */
body {
    font-family: 'Poppins', sans-serif;
    margin: 0;
    padding: 0;
    min-height: 100vh;
    background: repeating-linear-gradient(45deg,#e6f0ff,#e6f0ff 40px,#ffffff 40px,#ffffff 80px);
    display: flex; justify-content: center; align-items: flex-start;
    padding: 20px;
}
.checkout-container {
    width: 95%; max-width: 600px; background: #fff;
    border-radius: 12px; box-shadow: 0 15px 40px rgba(0,0,0,0.1);
    padding: 30px; box-sizing: border-box;
}
/* ... keep all other styles same ... */
.hidden{display:none;}
</style>
</head>
<body>

<div class="checkout-container">
    <h2>Pre-Order: MIND YOUR MINORS BLOCK 6</h2>

    <div id="messageBox"></div>

    <div class="progress-bar">
        <div class="progress" id="progress"></div>
        <div class="circle active"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
    </div>

    <form id="preOrderForm" onsubmit="return false;">
        <div class="step step-1">
            <label for="fullName">Full Name</label>
            <input type="text" id="fullName" placeholder="e.g., Ayesha Khan" required>
            <button type="button" class="js-next">Next: Select College</button>
        </div>

        <div class="step step-2 hidden">
            <label for="college">Please select your college</label>
            <select id="college" required>
                <option value="">-- Select Medical College --</option>
                <option>King Edward Medical University (KEMU), Lahore</option>
                <option>Allama Iqbal Medical College (AIMC), Lahore</option>
                <option>Services Institute of Medical Sciences (SIMS), Lahore</option>
                <option>Fatima Jinnah Medical University (FJMU), Lahore</option>
            </select>
            <div class="button-group">
                <button type="button" class="js-prev">Previous</button>
                <button type="button" class="js-next">Next: Notification</button>
            </div>
        </div>

        <div class="step step-3 hidden">
            <label for="notificationMethod">Notification via</label>
            <select id="notificationMethod" onchange="toggleContactInput(this.value)" required>
                <option value="">-- Select Method --</option>
                <option value="WhatsApp">WhatsApp</option>
                <option value="Email">Email</option>
            </select>

            <div id="whatsappField" class="contact-field">
                <label for="contact">WhatsApp Number</label>
                <input type="tel" id="contact" placeholder="03XX-XXXXXXX">
            </div>

            <div id="emailField" class="contact-field">
                <label for="email">Email Address</label>
                <input type="email" id="email" placeholder="ayesha@example.com">
            </div>

            <div class="button-group">
                <button type="button" class="js-prev">Previous</button>
                <button type="button" class="js-next">Next: Review</button>
            </div>
        </div>

        <div class="step step-4 hidden">
            <h4>Review Your Order</h4>
            <div id="preOrderDetails" class="summary-card"></div>
            <div class="button-group">
                <button type="button" class="js-prev">Previous</button>
                <button type="button" class="js-next">Confirm</button>
            </div>
        </div>

        <div class="step step-5 hidden thankyou">
            <h3>✅ Pre-Order Confirmed!</h3>
            <p>Your reference ID: <span id="orderNumber">...</span></p>
        </div>
    </form>
</div>

<!-- ✅ Firebase scripts (non-module, compatible with GitHub Pages) -->
<script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js"></script>

<script>
/* --- JS FIXED SECTION --- */

const firebaseConfig = {
    apiKey: "dummy", authDomain: "dummy", projectId: "dummy"
}; // <- Replace with your config

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const auth = firebase.auth();

let currentStep = 1, totalSteps = 5, isAuthReady = true;
const preOrderDetails = {};

function alertUser(msg){
    const box=document.getElementById("messageBox");
    box.innerText=msg; box.style.display='block';
    setTimeout(()=>box.style.display='none',3000);
}

function updateProgress(){
    const progress=document.getElementById("progress");
    const circles=document.querySelectorAll(".circle");
    circles.forEach((c,i)=>c.classList.toggle("active",i<currentStep));
    progress.style.width=((currentStep-1)/(totalSteps-1))*100+"%";
}

window.toggleContactInput=function(method){
    document.getElementById("emailField").style.display=method==="Email"?"block":"none";
    document.getElementById("whatsappField").style.display=method==="WhatsApp"?"block":"none";
};

function displayPreOrderDetails(){
    document.getElementById("preOrderDetails").innerHTML =
        `<p><b>Name:</b> ${preOrderDetails.fullName}</p>
         <p><b>College:</b> ${preOrderDetails.college}</p>
         <p><b>Notify via:</b> ${preOrderDetails.notificationMethod}</p>`;
}

function prevStep(){
    if(currentStep>1){
        document.querySelector(`.step-${currentStep}`).classList.add("hidden");
        currentStep--; updateProgress();
        document.querySelector(`.step-${currentStep}`).classList.remove("hidden");
    }
}

async function nextStep(){
    let valid=true;
    const cur=document.querySelector(`.step-${currentStep}`);

    if(currentStep===1){
        const name=document.getElementById("fullName").value.trim();
        if(!name){alertUser("Enter your full name."); valid=false;}
        else preOrderDetails.fullName=name;
    }
    else if(currentStep===2){
        const college=document.getElementById("college").value;
        if(!college){alertUser("Select your college."); valid=false;}
        else preOrderDetails.college=college;
    }
    else if(currentStep===3){
        const method=document.getElementById("notificationMethod").value;
        if(!method){alertUser("Select notification method."); valid=false;}
        else {
            preOrderDetails.notificationMethod=method;
            preOrderDetails.contact=document.getElementById("contact").value.trim();
            preOrderDetails.email=document.getElementById("email").value.trim();
        }
    }
    else if(currentStep===4){
        preOrderDetails.timestamp=new Date().toISOString();
        document.getElementById("orderNumber").innerText=Math.random().toString(36).substr(2,6).toUpperCase();
    }

    if(valid && currentStep<totalSteps){
        cur.classList.add("hidden");
        currentStep++; updateProgress();
        document.querySelector(`.step-${currentStep}`).classList.remove("hidden");
        if(currentStep===4) displayPreOrderDetails();
    }
}

document.addEventListener("DOMContentLoaded",()=>{
    document.querySelectorAll(".js-next").forEach(b=>b.addEventListener("click",nextStep));
    document.querySelectorAll(".js-prev").forEach(b=>b.addEventListener("click",prevStep));
    updateProgress();
});
</script>
</body>
</html>

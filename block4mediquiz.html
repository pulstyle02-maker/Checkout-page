<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MEDIQUIZ Block 4</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        glass: "rgba(255, 255, 255, 0.9)",
                        glassDark: "rgba(30, 41, 59, 0.95)",
                    }
                }
            }
        }
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/dist/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

        body { -webkit-tap-highlight-color: transparent; }
        
        .glass-card {
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.05);
        }
        
        /* Animations */
        .view-transition { animation: fadeIn 0.3s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Flashcard Flip */
        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .flip-card.flipped .flip-card-inner { transform: rotateY(180deg); }
        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            padding: 20px;
            border-radius: 1.5rem;
        }
        .flip-card-back { transform: rotateY(180deg); background-color: #f0f9ff; }
        .dark .flip-card-back { background-color: #1e293b; }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 10px; }

        /* Toggle Switch */
        .toggle-checkbox:checked { right: 0; border-color: #3b82f6; }
        .toggle-checkbox:checked + .toggle-label { background-color: #3b82f6; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 dark:bg-slate-900 dark:text-slate-100 max-w-md mx-auto min-h-screen flex flex-col transition-colors duration-300">

<!-- Header -->
<header class="p-6 bg-white/90 dark:bg-slate-900/90 backdrop-blur-md border-b dark:border-slate-800 sticky top-0 z-50">
    <div class="flex justify-between items-center">
        <div>
            <h1 class="text-2xl font-bold text-blue-800 dark:text-blue-400 tracking-tight">MEDIQUIZ</h1>
            <p class="text-xs font-semibold text-blue-500 uppercase tracking-widest">Block 4 Review</p>
        </div>
        <div class="h-10 w-10 bg-blue-100 dark:bg-slate-800 rounded-full flex items-center justify-center border border-blue-50 dark:border-slate-700">
            <i class="fa-solid fa-user-doctor text-blue-600 dark:text-blue-400"></i>
        </div>
    </div>
</header>

<!-- Main Content -->
<main id="app-container" class="flex-1 p-5 space-y-6 overflow-y-auto pb-24">
    
    <!-- Home View -->
    <section id="home-view" class="view-transition space-y-6">
        <div class="bg-gradient-to-br from-blue-600 to-indigo-700 p-6 rounded-3xl text-white shadow-xl relative overflow-hidden">
            <div class="absolute top-0 right-0 p-4 opacity-10"><i class="fa-solid fa-brain text-6xl"></i></div>
            <h2 class="text-xl font-semibold mb-2 relative z-10">Mind Your Minors</h2>
            <p class="text-blue-100 text-sm relative z-10">Select a module to practice LO-based MCQs derived from your study guide.</p>
        </div>

        <!-- Modules -->
        <div>
            <h3 class="text-slate-400 text-xs font-bold uppercase mb-3 px-1">Study Modules</h3>
            <div class="grid grid-cols-2 gap-4">
                <button onclick="navigateTo('git-module')" class="module-btn glass-card bg-white dark:bg-glassDark p-5 rounded-2xl flex flex-col items-center justify-center space-y-3 border-b-4 border-orange-400 dark:border-orange-500">
                    <div class="h-14 w-14 bg-orange-50 dark:bg-orange-900/30 rounded-2xl flex items-center justify-center">
                        <i class="fa-solid fa-burger text-3xl text-orange-500"></i>
                    </div>
                    <span class="font-bold text-slate-700 dark:text-slate-200">GIT</span>
                </button>
                
                <button onclick="navigateTo('renal-module')" class="module-btn glass-card bg-white dark:bg-glassDark p-5 rounded-2xl flex flex-col items-center justify-center space-y-3 border-b-4 border-blue-400 dark:border-blue-500">
                    <div class="h-14 w-14 bg-blue-50 dark:bg-blue-900/30 rounded-2xl flex items-center justify-center">
                        <i class="fa-solid fa-droplet text-3xl text-blue-500"></i>
                    </div>
                    <span class="font-bold text-slate-700 dark:text-slate-200">RENAL</span>
                </button>
            </div>
        </div>

        <!-- Tools -->
        <div>
            <h3 class="text-slate-400 text-xs font-bold uppercase mb-3 px-1">Tools</h3>
            <div class="space-y-3">
                <button onclick="navigateTo('flashcards')" class="w-full glass-card bg-white dark:bg-glassDark p-4 rounded-2xl flex items-center space-x-4">
                    <div class="h-10 w-10 bg-purple-100 dark:bg-purple-900/40 rounded-xl flex items-center justify-center">
                        <i class="fa-solid fa-layer-group text-purple-600 dark:text-purple-400"></i>
                    </div>
                    <div class="text-left flex-1">
                        <p class="font-bold text-slate-700 dark:text-slate-200">Flashcards</p>
                        <p class="text-xs text-slate-500">Visual Mnemonics</p>
                    </div>
                    <i class="fa-solid fa-chevron-right text-slate-300"></i>
                </button>

                <button onclick="navigateTo('past-papers')" class="w-full glass-card bg-white dark:bg-glassDark p-4 rounded-2xl flex items-center space-x-4">
                    <div class="h-10 w-10 bg-green-100 dark:bg-green-900/40 rounded-xl flex items-center justify-center">
                        <i class="fa-solid fa-clock-rotate-left text-green-600 dark:text-green-400"></i>
                    </div>
                    <div class="text-left flex-1">
                        <p class="font-bold text-slate-700 dark:text-slate-200">Past Papers</p>
                        <p class="text-xs text-slate-500">Updating Soon</p>
                    </div>
                    <i class="fa-solid fa-chevron-right text-slate-300"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- Subpage View -->
    <section id="subpage-view" class="hidden view-transition pb-10">
        <button onclick="navigateTo('home')" class="mb-6 text-blue-600 dark:text-blue-400 flex items-center space-x-2 font-semibold text-sm hover:opacity-80">
            <i class="fa-solid fa-arrow-left"></i>
            <span>Back to Dashboard</span>
        </button>
        <div id="subpage-content" class="space-y-4"></div>
    </section>

    <!-- Settings View -->
    <section id="settings-view" class="hidden view-transition pb-10">
        <h2 class="text-2xl font-bold mb-6 text-slate-800 dark:text-white">Settings</h2>
        <div class="glass-card bg-white dark:bg-glassDark p-6 rounded-3xl space-y-6">
            <div class="flex items-center justify-between">
                <div>
                    <h3 class="font-bold text-slate-800 dark:text-white">Dark Mode</h3>
                    <p class="text-xs text-slate-500">Toggle application theme</p>
                </div>
                <div class="relative inline-block w-12 mr-2 align-middle select-none transition duration-200 ease-in">
                    <input type="checkbox" name="toggle" id="theme-toggle" class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer border-gray-300 dark:border-slate-600 transition-all duration-300"/>
                    <label for="theme-toggle" class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 dark:bg-slate-700 cursor-pointer"></label>
                </div>
            </div>
        </div>
    </section>
</main>

<!-- Footer -->
<nav class="bg-white/90 dark:bg-slate-900/90 backdrop-blur-lg border-t dark:border-slate-800 p-3 flex justify-around items-center sticky bottom-0 z-50">
    <button onclick="navigateTo('home')" id="nav-home" class="flex flex-col items-center space-y-1 text-blue-600 dark:text-blue-400 transition-colors">
        <i class="fa-solid fa-house text-xl"></i>
        <span class="text-[10px] font-bold">Home</span>
    </button>
    <div class="w-px h-8 bg-slate-200 dark:bg-slate-700"></div>
    <button onclick="navigateTo('settings')" id="nav-settings" class="flex flex-col items-center space-y-1 text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors">
        <i class="fa-solid fa-gear text-xl"></i>
        <span class="text-[10px] font-bold">Settings</span>
    </button>
</nav>

<script>
    // DATA SOURCE
    const rawData = {
        git: {
            'Pathology': [
                ["What is the most common cause of Chronic Gastritis?", "H. Pylori", "Autoimmune", "NSAIDs", "Alcohol", 1, "Source: H. Pylori is the most common cause. Autoimmune is <10%."],
                ["In which part of the stomach does H. Pylori primarily colonize?", "Antrum", "Body", "Fundus", "Cardia", 1, "Source: H. Pylori = ANTrum (PANTs mnemonic)."],
                ["Autoimmune gastritis is characterized by antibodies against:", "Parietal cells & Intrinsic factor", "Chief cells", "G Cells", "Mucous cells", 1, "Source: B-AN PARty After 12 (Antibodies to Parietal cells)."],
                ["Which type of ulcer is associated with severe burns?", "Curling ulcer", "Cushing ulcer", "Stress ulcer", "Peptic ulcer", 1, "Source: CUS-ST-URd (cURling = bURns)."],
                ["Cushing ulcers are caused by:", "Intracranial disease", "Burns", "Trauma", "NSAIDs", 2, "Source: CUS-ST-URd (CUShing = CNS/Intracranial)."],
                ["A 'Leather Bottle' stomach (Linitis Plastica) is seen in:", "Diffuse Gastric Cancer", "Intestinal Gastric Cancer", "GIST", "Lymphoma", 1, "Source: Diffuse type = Signet ring cells = Linitis Plastica."],
                ["H. Pylori virulence factor 'Urease' functions to:", "Neutralize acid via ammonia production", "Adhere to cells", "Cause direct toxicity", "Move bacteria", 1, "Source: Urease generates ammonia to raise local pH."],
                ["Which condition presents with 'Signet Ring Cells'?", "Diffuse Gastric Adenocarcinoma", "Intestinal Adenocarcinoma", "H. Pylori Gastritis", "MALToma", 1, "Source: Mucin displaces nucleus to periphery."],
                ["Zollinger-Ellison syndrome is caused by:", "Gastrin-secreting tumor", "H. Pylori", "Autoimmunity", "NSAIDs", 1, "Source: Excess gastrin leads to multiple ulcers."],
                ["Morphology of acute gastritis is characterized by:", "Neutrophils", "Lymphocytes", "Plasma cells", "Granulomas", 1, "Source: Neutrophils = Active/Acute inflammation."],
                ["Autoimmune gastritis spares which part of the stomach?", "Antrum", "Body", "Fundus", "Entire stomach", 1, "Source: Autoimmune affects Body/Fundus, spares Antrum."],
                ["Intestinal metaplasia is a precursor to:", "Gastric Adenocarcinoma", "Lymphoma", "GIST", "Carcinoid", 1, "Source: Metaplasia -> Dysplasia -> Cancer."],
                ["Common site for Peptic Ulcer Disease:", "Proximal Duodenum", "Distal Duodenum", "Fundus", "Greater Curvature", 1, "Source: 4x more common in proximal duodenum."],
                ["Virchow's node is located in:", "Left Supraclavicular fossa", "Right Supraclavicular fossa", "Axilla", "Groin", 1, "Source: Sign of metastatic gastric cancer."],
                ["Krukenberg tumor is metastasis to:", "Ovary", "Liver", "Lung", "Brain", 1, "Source: Signet ring cells metastasize to ovaries."],
                ["Which factor decreases mucus secretion?", "NSAIDs", "Prostaglandins", "Food", "Bicarbonate", 1, "Source: NSAIDs inhibit COX -> decreased Prostaglandins -> decreased Mucus."],
                ["Typhoid fever is caused by:", "Salmonella Typhi", "E. Coli", "Vibrio Cholera", "Shigella", 1, "Source: Enteric fever agent."],
                ["Rice water stool is characteristic of:", "Vibrio Cholera", "Typhoid", "Amoebiasis", "Giardiasis", 1, "Source: Massive secretory diarrhea."],
                ["Which organism causes 'Pea Soup' diarrhea?", "Salmonella Typhi", "Cholera", "Rotavirus", "Norovirus", 1, "Source: Seen in 2nd/3rd week of Typhoid."],
                ["Giardia Lamblia causes:", "Fatty diarrhea (Steatorrhea)", "Bloody diarrhea", "Rice water stool", "Dysentery", 1, "Source: G.L = Greasy Looser."],
                ["Most common cause of severe childhood diarrhea:", "Rotavirus", "Norovirus", "Adenovirus", "E. Coli", 1, "Source: Rota hua baby (Crying baby)."],
                ["Norovirus is commonly associated with:", "Cruise ships/Closed communities", "Hospitals", "Forests", "Pets", 1, "Source: Norway Cruise mnemonic."],
                ["Entamoeba Histolytica causes:", "Flask-shaped ulcers", "Pseudomembranes", "Granulomas", "Polyps", 1, "Source: Amoebic dysentery."],
                ["Pseudomembranous colitis is caused by:", "Clostridium Difficile", "E. Coli", "Salmonella", "Shigella", 1, "Source: Antibiotic associated diarrhea."],
                ["Whipple disease is characterized by:", "PAS positive macrophages", "Granulomas", "Ulcers", "Neutrophils", 1, "Source: Tropheryma whipplei infection."]
            ],
            'Pharmacology': [
                ["Loperamide mechanism of action:", "Mu-opioid receptor agonist", "D2 antagonist", "5-HT3 antagonist", "H1 blocker", 1, "Source: LOOP for Loperamide (Opioid)."],
                ["Why is Atropine added to Diphenoxylate?", "To discourage abuse", "To enhance effect", "To prevent constipation", "To kill bacteria", 1, "Source: Causes unpleasant side effects if abused."],
                ["Which drug causes blackening of the tongue?", "Bismuth Subsalicylate", "Loperamide", "Octreotide", "Kaolin", 1, "Source: Black BIS(c)ycle mnemonic."],
                ["Octreotide (Sandostatin) is used for:", "VIPomas / Carcinoid tumors", "Infectious diarrhea", "Traveler's diarrhea", "Constipation", 1, "Source: 'Car standing on sand' - Neuroendocrine tumors."],
                ["Mechanism of action of Octreotide:", "Inhibits hormone secretion", "Increases motility", "Blocks opioid receptors", "Absorbs toxins", 1, "Source: Somatostatin analog."],
                ["Bile acid binding resins include:", "Cholestyramine", "Loperamide", "Bismuth", "Kaolin", 1, "Source: BILLy on CROws (Cholestyramine)."],
                ["Kaolin and Pectin act as:", "Adsorbents", "Antimotility agents", "Antisecretory agents", "Antibiotics", 1, "Source: Bulk and solidify stools."],
                ["Side effect of Bismuth Subsalicylate:", "Black stools", "Diarrhea", "Headache", "Tachycardia", 1, "Source: Bismuth sulfide formation."],
                ["Which anti-diarrheal does NOT cross the BBB?", "Loperamide", "Diphenoxylate", "Codeine", "Morphine", 1, "Source: Hence low abuse potential."],
                ["Contraindication for anti-motility drugs:", "Bloody diarrhea/High fever", "Mild diarrhea", "IBS", "Chronic diarrhea", 1, "Source: Risk of toxic megacolon in infection."],
                ["Drug used for chemotherapy induced diarrhea:", "Octreotide", "Kaolin", "Bismuth", "Psyllium", 1, "Source: Secretory diarrhea management."],
                ["Cholestyramine is useful in diarrhea due to:", "Resection of terminal ileum", "Gastrectomy", "Appendectomy", "Cholecystectomy", 1, "Source: Malabsorption of bile salts."],
                ["Adverse effect of Adsorbents:", "Interference with drug absorption", "Euphoria", "Bleeding", "Infection", 1, "Source: Binds other drugs."],
                ["Mechanism of Bismuth in H. Pylori:", "Inhibits bacterial adherence", "Increases acid", "Increases motility", "Blocks gastrin", 1, "Source: Part of Quadruple therapy."],
                ["Which drug is an opioid agonist?", "Diphenoxylate", "Kaolin", "Pectin", "Bismuth", 1, "Source: Structural analog of meperidine."],
                ["Primary use of Lactulose:", "Hepatic Encephalopathy", "Infectious diarrhea", "Ulcer", "Gastritis", 1, "Source: Traps ammonia."],
                ["Side effect of Octreotide:", "Gallstones", "Diarrhea", "Hypertension", "Fever", 1, "Source: Biliary sludge."],
                ["Diphenoxylate is a schedule drug because:", "It crosses BBB", "It causes bleeding", "It is toxic", "It is weak", 1, "Source: Potential for addiction."],
                ["ORS mechanism relies on:", "Sodium-Glucose cotransport", "Passive diffusion", "Potassium transport", "Calcium channels", 1, "Source: Glucose enhances Na absorption."],
                ["Constipation is a common side effect of:", "Loperamide", "Magnesium", "Lactulose", "Castor oil", 1, "Source: Anti-motility effect."]
            ],
            'Community Medicine': [
                ["Polio vaccine given at birth:", "OPV (0 dose)", "IPV", "Both", "None", 1, "Source: 2 drops at birth."],
                ["IPV (Salk) vaccine type:", "Killed", "Live attenuated", "Toxoid", "Subunit", 1, "Source: Inactivated Polio Vaccine."],
                ["OPV (Sabin) advantage:", "Provides Gut Immunity", "No VAPP", "Safe in immunocompromised", "Injectable", 1, "Source: Live vaccine replicates in gut."],
                ["Incubation period of Cholera:", "Few hours to 5 days", "14 days", "1 month", "2 months", 1, "Source: Short incubation = explosive epidemic."],
                ["Best method to prevent Hep A:", "Hand washing & Safe water", "Masks", "Insect repellant", "Shoes", 1, "Source: Fecal-oral transmission."],
                ["Typhoid transmission:", "Fecal-oral", "Vector", "Droplet", "Sexual", 1, "Source: Contaminated food/water."],
                ["Period of communicability for Hep A:", "Late incubation (before jaundice)", "During jaundice", "After recovery", "Chronic carrier", 1, "Source: Max infectivity before symptoms."],
                ["Prevention of Ascariasis:", "Safe excreta disposal", "Vaccine", "Masks", "Bed nets", 1, "Source: Soil transmitted helminth."],
                ["Breastfeeding should start:", "Within 1 hour of birth", "After 24 hours", "After 3 days", "After 1 week", 1, "Source: Early initiation."],
                ["Exclusive breastfeeding duration:", "6 months", "3 months", "9 months", "1 year", 1, "Source: No water/solids."],
                ["Weaning foods should be:", "Calorie dense & soft", "Liquid only", "Spicy", "Hard", 1, "Source: Complementary feeding."],
                ["Definition of Balanced Diet:", "Adequate nutrients for health", "Only proteins", "Only veg", "Low calorie", 1, "Source: Prudent diet concept."],
                ["Vitamin A prophylaxis dose at 9 months:", "100,000 IU", "200,000 IU", "50,000 IU", "500,000 IU", 1, "Source: With measles vaccine."],
                ["PEM Marasmus characteristic:", "Severe wasting", "Edema", "Moon face", "Fatty liver", 1, "Source: Calorie + Protein deficiency."],
                ["Kwashiorkor characteristic:", "Edema", "Severe wasting", "Alertness", "Good appetite", 1, "Source: Protein deficiency."],
                ["Danger signal on Growth Chart:", "Flat line", "Upward curve", "Curved line", "Straight line", 1, "Source: No weight gain."],
                ["Vitamin D deficiency in children:", "Rickets", "Osteomalacia", "Scurvy", "Beriberi", 1, "Source: Bone deformity."],
                ["Food poisoning danger zone:", "10-49 degrees C", "0-4 degrees", ">60 degrees", "<0 degrees", 1, "Source: Bacteria multiply rapidly."],
                ["Typhoid carrier organ:", "Gallbladder", "Liver", "Spleen", "Kidney", 1, "Source: Chronic reservoir."],
                ["Hookworm prevention:", "Wearing shoes", "Boiling water", "Vaccine", "Masks", 1, "Source: Penetrates skin."]
            ],
            'Behavioural Sciences': [
                ["Operant Conditioning involves:", "Learning through consequences", "Association", "Observation", "Cognition", 1, "Source: Reward/Punishment."],
                ["Positive Reinforcement:", "Behavior followed by reward", "Removing unpleasant stimulus", "Punishment", "Ignoring", 1, "Source: Increases behavior."],
                ["Negative Reinforcement:", "Removing unpleasant stimulus", "Adding reward", "Punishment", "Extinction", 1, "Source: Increases behavior (e.g. pain relief)."],
                ["Health Belief Model component:", "Perceived Susceptibility", "Unconscious drive", "Social norm", "Genes", 1, "Source: 'Am I at risk?'"],
                ["Transtheoretical Model 'Precontemplation':", "No intention to change", "Thinking about change", "Planning", "Action", 1, "Source: Denial phase."],
                ["Motivational Interviewing principle:", "Roll with resistance", "Confrontation", "Order", "Argue", 1, "Source: Patient-centered."],
                ["CBT for obesity targets:", "Unhelpful thoughts & behaviors", "Metabolism", "Surgery", "Diet only", 1, "Source: Cognitive restructuring."],
                ["Medically Unexplained Symptoms (MUS):", "Physical symptoms without organic cause", "Faking", "Cancer", "Infection", 1, "Source: Somatization."],
                ["Management of MUS:", "Reassurance & Bio-psycho-social care", "Surgery", "Ignore", "Placebo", 1, "Source: Holistic approach."],
                ["Iodine deficiency affects:", "Mental development (IQ)", "Height only", "Weight", "Vision", 1, "Source: Cretinism."],
                ["Iron deficiency affects:", "Cognition & Attention", "Bones", "Skin", "Hair", 1, "Source: Neurotransmitter synthesis."],
                ["DHA (Omega-3) is essential for:", "Brain/Visual development", "Bones", "Muscles", "Teeth", 1, "Source: Synaptogenesis."],
                ["Emotional eating is triggered by:", "Stress/Boredom", "Hunger", "Low sugar", "Routine", 1, "Source: Coping mechanism."],
                ["Extinction in learning:", "Removal of reinforcement", "Punishment", "Reward", "Association", 1, "Source: Decreases behavior."],
                ["Bio-psycho-social model applies to:", "MUS and Chronic disease", "Surgery", "Trauma", "Acute infection", 1, "Source: Holistic view."],
                ["SMART goals in obesity:", "Specific, Measurable, Achievable", "Vague", "Impossible", "Rigid", 1, "Source: Goal setting."],
                ["'Contemplation' stage:", "Aware but not acting", "Denial", "Action", "Relapse", 1, "Source: Thinking about change."],
                ["'Maintenance' stage duration:", "> 6 months", "< 1 month", "1 week", "Forever", 1, "Source: Sustained change."],
                ["Anorexia Nervosa feature:", "Distorted body image", "Binge eating", "Obesity", "Normal weight", 1, "Source: Fear of weight gain."],
                ["Bulimia Nervosa feature:", "Bingeing and Purging", "Restriction only", "Low weight", "Loss of appetite", 1, "Source: Compensatory behavior."]
            ],
            'Aging': [
                ["Common cause of malnutrition in elderly:", "Depression & Dental issues", "Overeating", "High activity", "Good absorption", 1, "Source: Psychological/Physical factors."],
                ["Physiological change in elderly GIT:", "Reduced taste/smell", "Increased acid", "Faster motility", "Increased enzymes", 1, "Source: Anorexia of aging."],
                ["Social factor for elderly malnutrition:", "Isolation & Poverty", "Family support", "Wealth", "Travel", 1, "Source: 'Meals on wheels' need."],
                ["Strategy to improve elderly nutrition:", "Enhance social environment", "Force feeding", "Liquid diet only", "Ignore", 1, "Source: Shared meals."],
                ["Preventive medicine in geriatrics focuses on:", "Improving Quality of Life", "Cure", "Surgery", "Growth", 1, "Source: Functional independence."]
            ]
        },
        renal: {
            'Pathology': [
                ["Most common type of renal stone:", "Calcium Oxalate", "Struvite", "Uric Acid", "Cystine", 1, "Source: 80% of stones."],
                ["Struvite stones are associated with:", "UTI (Proteus/Urease+)", "Gout", "Hypercalcemia", "Acidic urine", 1, "Source: Magnesium Ammonium Phosphate."],
                ["Shape of Struvite stones:", "Staghorn calculi", "Round", "Spikey", "Smooth", 1, "Source: Fills pelvis & calyces."],
                ["Uric acid stones form in:", "Acidic urine", "Alkaline urine", "Infected urine", "Neutral urine", 1, "Source: pH < 5.5."],
                ["Hydronephrosis is:", "Dilation of renal pelvis/calyces", "Shrinkage", "Tumor", "Infection", 1, "Source: Due to obstruction."],
                ["Acute Pyelonephritis hallmark:", "Abscesses & Pus (Neutrophils)", "Scarring", "Cysts", "Stones", 1, "Source: Suppurative inflammation."],
                ["Chronic Pyelonephritis hallmark:", "Thyroidization & Scarring", "Abscesses", "Edema", "Hemorrhage", 1, "Source: Tubular atrophy."],
                ["Ascending infection is the most common route for:", "Pyelonephritis", "GN", "AKI", "Stones", 1, "Source: From bladder to kidney."],
                ["Cystitis symptoms triad:", "Frequency, Dysuria, Pain", "Fever, Chills, Flank pain", "Edema, HTN", "Proteinuria", 1, "Source: Lower UTI symptoms."],
                ["Hunner ulcers are seen in:", "Interstitial Cystitis", "Acute Cystitis", "Polypoid Cystitis", "Malakoplakia", 1, "Source: Chronic painful bladder."],
                ["Malakoplakia is characterized by:", "Michaelis-Gutmann bodies", "Granulomas", "Ulcers", "Polyps", 1, "Source: Defective macrophage function."],
                ["Most common cause of UTI:", "E. Coli", "Proteus", "Klebsiella", "Staph", 1, "Source: UPEC (P-fimbriae)."],
                ["Staph Saprophyticus causes UTI in:", "Young sexually active women", "Elderly", "Children", "Men", 1, "Source: Common pathogen."],
                ["Proteus causes UTI and:", "Struvite stones", "Ca stones", "Uric acid stones", "Cystine stones", 1, "Source: Urease producer."],
                ["Nephrotic syndrome hallmark:", "Proteinuria >3.5g/day", "Hematuria", "HTN", "Oliguria", 1, "Source: O in NephrOtic = PrOtein."],
                ["Nephritic syndrome hallmark:", "Hematuria (RBC casts)", "Massive proteinuria", "Hyperlipidemia", "Hypoalbuminemia", 1, "Source: I in NephrItic = Inflamation."],
                ["Post-streptococcal GN presents as:", "Nephritic syndrome", "Nephrotic syndrome", "AKI", "UTI", 1, "Source: Cola colored urine."],
                ["Minimal Change Disease is common in:", "Children", "Adults", "Elderly", "Infants", 1, "Source: Nephrotic syndrome in kids."],
                ["Acute Kidney Injury (AKI) definition:", "Sudden decline in GFR", "Chronic loss", "Proteinuria", "Hematuria", 1, "Source: Azotemia."],
                ["Pre-renal AKI cause:", "Hypovolemia/Shock", "ATN", "Stone", "BPH", 1, "Source: Reduced perfusion."],
                ["Post-renal AKI cause:", "Obstruction (BPH/Stones)", "Shock", "Drugs", "Infection", 1, "Source: Blockage."],
                ["Acute Tubular Necrosis (ATN) is:", "Intra-renal AKI", "Pre-renal", "Post-renal", "Chronic", 1, "Source: Ischemia/Toxins."],
                ["Hemorrhagic cystitis is caused by:", "Adenovirus / Cyclophosphamide", "E. Coli", "Proteus", "Candida", 1, "Source: Viral or Drug induced."],
                ["Emphysematous cystitis is seen in:", "Diabetics (Gas forming bacteria)", "Children", "Women", "Smokers", 1, "Source: Gas in bladder wall."],
                ["Fungal UTI is common in:", "Immunocompromised/Catheters", "Healthy women", "Children", "Men", 1, "Source: Candida species."]
            ],
            'Pharmacology': [
                ["Loop diuretics (Furosemide) act on:", "Ascending limb of Loop of Henle", "PCT", "DCT", "Collecting duct", 1, "Source: Tall Upright Ears (Ascending)."],
                ["Side effect of Loop diuretics:", "Ototoxicity", "Hypercalcemia", "Hyperglycemia", "Acidosis", 1, "Source: Ears mnemonic."],
                ["Thiazides act on:", "DCT", "PCT", "Loop", "Collecting duct", 1, "Source: Na/Cl transporter."],
                ["Thiazide side effect mnemonic:", "HyperGLUC", "HypoGLUC", "Ototoxicity", "Hyperkalemia", 1, "Source: Glycemia, Lipidemia, Uricemia, Calcemia."],
                ["K+ sparing diuretics act on:", "Collecting duct/tubule", "PCT", "Loop", "DCT", 1, "Source: Aldosterone antagonists/Na channel blockers."],
                ["Spironolactone mechanism:", "Aldosterone antagonist", "Na channel blocker", "Osmotic", "CA inhibitor", 1, "Source: K+ sparing."],
                ["Amiloride mechanism:", "Na channel blocker (ENaC)", "Aldosterone antagonist", "Osmotic", "Loop", 1, "Source: K+ sparing."],
                ["Acetazolamide mechanism:", "Carbonic Anhydrase Inhibitor", "Loop", "Thiazide", "Osmotic", 1, "Source: ACE the Game."],
                ["Acetazolamide use:", "Glaucoma / Mountain sickness", "HTN", "Edema", "Hypercalcemia", 1, "Source: Reduces IOP/CSF."],
                ["Mannitol is a:", "Osmotic diuretic", "Loop", "Thiazide", "K+ sparing", 1, "Source: AweSOMe."],
                ["Mannitol is contraindicated in:", "CHF / Pulmonary edema", "Glaucoma", "ICP", "Renal failure", 1, "Source: Expands volume initially."],
                ["Gynecomastia is a side effect of:", "Spironolactone", "Furosemide", "HCTZ", "Mannitol", 1, "Source: Anti-androgen effect."],
                ["Diuretic causing Hyperkalemia:", "Spironolactone", "Furosemide", "HCTZ", "Acetazolamide", 1, "Source: K+ sparing."],
                ["Diuretic causing Hypokalemia:", "Loop & Thiazides", "Spironolactone", "Amiloride", "Triamterene", 1, "Source: K+ wasting."],
                ["Ethacrynic acid is special because:", "Not a sulfa drug", "K+ sparing", "No ototoxicity", "Weak", 1, "Source: Use in sulfa allergy."],
                ["Hyperuricemia (Gout) is caused by:", "Thiazides & Loops", "Spironolactone", "Mannitol", "Acetazolamide", 1, "Source: Competes for secretion."],
                ["Which diuretic increases Calcium reabsorption?", "Thiazides", "Loop", "K+ sparing", "Osmotic", 1, "Source: HyperCalcemia."],
                ["Which diuretic causes Calcium excretion?", "Loop diuretics", "Thiazides", "K+ sparing", "Osmotic", 1, "Source: Treat Hypercalcemia."],
                ["Acetazolamide causes:", "Metabolic Acidosis", "Alkalosis", "Hyperkalemia", "Hypernatremia", 1, "Source: HCO3 loss."],
                ["Lithium toxicity is increased by:", "Thiazides & Loops", "K+ sparing", "Osmotic", "CA inhibitors", 1, "Source: Na/Li handling."]
            ],
            'Community Medicine': [
                ["QoL stands for:", "Quality of Life", "Quantity of Life", "Quick Life", "Quote of Life", 1, "Source: Well-being indicator."],
                ["DALY stands for:", "Disability Adjusted Life Year", "Daily Adjusted Life", "Disease Adjusted Life", "Death Adjusted Life", 1, "Source: YLL + YLD."],
                ["1 DALY equals:", "1 lost year of healthy life", "1 year of life", "1 year of disability", "Death", 1, "Source: Disease burden metric."],
                ["QALY stands for:", "Quality Adjusted Life Year", "Quantity Adjusted", "Quick Adjusted", "Quiz Adjusted", 1, "Source: Quality x Duration."],
                ["Prevention of renal stones (Primary):", "Hydration", "Surgery", "Dialysis", "Transplant", 1, "Source: Preventing onset."],
                ["Secondary prevention of renal disease:", "Screening (Urine/BP)", "Diet", "Dialysis", "Transplant", 1, "Source: Early detection."],
                ["Tertiary prevention of renal disease:", "Dialysis & Transplant", "Screening", "Vaccination", "Hydration", 1, "Source: Rehab/Complications."],
                ["Leading cause of ESRD:", "Diabetes & Hypertension", "Infection", "Trauma", "Stones", 1, "Source: Chronic diseases."],
                ["Vaccination to prevent Bladder Cancer:", "HPV", "Hep B", "Polio", "Flu", 1, "Source: Prevention."],
                ["Metabolic syndrome includes:", "Obesity, HTN, Hyperglycemia", "Low BP", "Weight loss", "Infection", 1, "Source: Risk factor."],
                ["Life expectancy is:", "Average years expected to live", "Maximum age", "Death rate", "Birth rate", 1, "Source: Health indicator."],
                ["Social well-being in QoL involves:", "Relationships", "Money", "Health", "Mind", 1, "Source: Component of QoL."],
                ["Psychological well-being involves:", "Mental health/Happiness", "Body", "Friends", "Job", 1, "Source: Component of QoL."],
                ["Patient-centered decisions use:", "QoL metrics", "Cost only", "Doctor's wish", "Random", 1, "Source: Clinical guide."],
                ["Primary prevention of bladder cancer:", "Smoking cessation", "Screening", "Chemo", "Surgery", 1, "Source: Avoid carcinogens."],
                ["Hydration helps prevent:", "Kidney stones", "Cancer", "Diabetes", "HTN", 1, "Source: Primary prevention."],
                ["Regular urine screening is:", "Secondary prevention", "Primary", "Tertiary", "Quaternary", 1, "Source: Early diagnosis."],
                ["Rehabilitation for renal patients:", "Tertiary prevention", "Primary", "Secondary", "None", 1, "Source: Improving function."],
                ["Impact of renal disease on family:", "Caregiver burden", "Joy", "Money", "Health", 1, "Source: Social impact."],
                ["Financial burden of dialysis is a:", "Public health concern", "Benefit", "Joy", "None", 1, "Source: Economic impact."]
            ],
            'Behavioral Sciences': [
                ["Uremic Encephalopathy symptoms:", "Confusion, Delirium", "Happiness", "Focus", "Sleep", 1, "Source: Toxin accumulation."],
                ["Psychological impact of CKD:", "Depression & Anxiety", "Joy", "Energy", "Calm", 1, "Source: Chronic illness burden."],
                ["Dementia in renal failure is due to:", "Toxins & Vascular damage", "Genes", "Virus", "Trauma", 1, "Source: Cognitive decline."],
                ["Delusion in uremia:", "False belief", "Hallucination", "Confusion", "Coma", 1, "Source: Psychosis."],
                ["Caregiver burden refers to:", "Stress on family", "Cost", "Patient pain", "Doctor stress", 1, "Source: Social impact."],
                ["Muscle paralysis in renal failure is due to:", "Electrolyte imbalance", "Stroke", "Trauma", "Genetic", 1, "Source: Hyperkalemia etc."],
                ["Appetite changes in CKD are due to:", "Metabolic shifts", "Happiness", "Choice", "Diet", 1, "Source: Uremia."],
                ["Fatigue in CKD is caused by:", "Anemia & Toxins", "Sleep", "Food", "Exercise", 1, "Source: Physical symptom."],
                ["Sleep issues in renal failure:", "Worsen fatigue & mood", "Improve health", "None", "Minor", 1, "Source: Quality of life."],
                ["Financial burden of CKD:", "High", "Low", "None", "Positive", 1, "Source: Dialysis costs."]
            ],
            'Aging': [
                ["Urinary incontinence in elderly:", "Involuntary leakage", "Retention", "Infection", "Pain", 1, "Source: Common issue."],
                ["Stress incontinence:", "Leakage on coughing/sneezing", "Urge", "Overflow", "Functional", 1, "Source: Weak floor."],
                ["Urge incontinence:", "Sudden need to void", "Leakage", "Blockage", "Infection", 1, "Source: Overactive bladder."],
                ["Overflow incontinence:", "Dribbling / Incomplete emptying", "Stress", "Urge", "Pain", 1, "Source: Obstruction (BPH)."],
                ["Kegel exercises help:", "Stress incontinence", "Overflow", "Urge", "None", 1, "Source: Physiotherapy."],
                ["Bladder retraining is for:", "Urge incontinence", "Stress", "Overflow", "Infection", 1, "Source: Behavioral therapy."],
                ["Anticholinergics treat:", "Urge incontinence", "Stress", "Overflow", "Retention", 1, "Source: Relax bladder."],
                ["Catheterization is used for:", "Overflow/Neurogenic", "Stress", "Urge", "Mild cases", 1, "Source: Obstruction."],
                ["Risk factor for incontinence:", "Obesity/Childbirth", "Youth", "Male", "Thin", 1, "Source: Etiology."],
                ["Weight reduction helps:", "Stress incontinence", "Urge", "Overflow", "None", 1, "Source: Reduces pressure."]
            ]
        }
    };

    // LOGIC
    const views = {
        home: document.getElementById('home-view'),
        subpage: document.getElementById('subpage-view'),
        settings: document.getElementById('settings-view'),
        content: document.getElementById('subpage-content'),
    };

    let currentQuiz = [];
    let currentQuestionIndex = 0;
    let score = 0;

    function navigateTo(page) {
        window.scrollTo(0, 0);
        views.home.classList.add('hidden');
        views.subpage.classList.add('hidden');
        views.settings.classList.add('hidden');

        if (page === 'home') {
            views.home.classList.remove('hidden');
        } else if (page === 'settings') {
            views.settings.classList.remove('hidden');
        } else if (page === 'flashcards') {
            views.subpage.classList.remove('hidden');
            renderFlashcardMenu();
        } else if (page === 'past-papers') {
            views.subpage.classList.remove('hidden');
            views.content.innerHTML = `
                <div class="flex flex-col items-center justify-center h-64 text-center">
                    <i class="fa-solid fa-clock-rotate-left text-4xl text-slate-300 mb-4"></i>
                    <h3 class="text-lg font-bold text-slate-700 dark:text-slate-200">Updating Soon</h3>
                    <p class="text-sm text-slate-500">Past papers are being digitized.</p>
                </div>
            `;
        } else {
            const module = page.split('-')[0];
            views.subpage.classList.remove('hidden');
            renderSubjectMenu(module);
        }
    }

    function renderSubjectMenu(module) {
        const subjects = Object.keys(rawData[module]);
        const color = module === 'git' ? 'orange' : 'blue';
        const displayTitle = module === 'git' ? 'Gastrointestinal' : 'Renal System';
        
        views.content.innerHTML = `
            <div class="glass-card bg-white dark:bg-glassDark p-6 rounded-3xl">
                <h2 class="text-2xl font-bold text-slate-800 dark:text-white mb-2">${displayTitle}</h2>
                <p class="text-sm text-slate-500 mb-6 italic">Select a subject to begin quiz.</p>
                <div class="space-y-3">
                    ${subjects.map(sub => `
                        <div class="flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl border border-transparent hover:border-${color}-200 transition-colors">
                            <span class="font-medium text-slate-700 dark:text-slate-200">${sub}</span>
                            <button onclick="startQuiz('${module}', '${sub}')" class="bg-${color}-500 hover:bg-${color}-600 text-white px-4 py-1.5 rounded-full text-xs font-bold shadow-sm">START</button>
                        </div>
                    `).join('')}
                </div>
            </div>`;
    }

    function startQuiz(module, subject) {
        // Get questions and shuffle
        const questions = [...rawData[module][subject]];
        for (let i = questions.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [questions[i], questions[j]] = [questions[j], questions[i]];
        }
        
        currentQuiz = questions;
        currentQuestionIndex = 0;
        score = 0;
        renderQuestion();
    }

    function renderQuestion() {
        const qData = currentQuiz[currentQuestionIndex];
        const progress = ((currentQuestionIndex + 1) / currentQuiz.length) * 100;
        
        // Create option objects
        let options = [
            { text: qData[1], correct: qData[5] === 1 },
            { text: qData[2], correct: qData[5] === 2 },
            { text: qData[3], correct: qData[5] === 3 },
            { text: qData[4], correct: qData[5] === 4 }
        ];
        
        // Shuffle options
        for (let i = options.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [options[i], options[j]] = [options[j], options[i]];
        }

        views.content.innerHTML = `
            <div class="space-y-4">
                <div class="flex justify-between items-center text-xs font-bold text-slate-400 uppercase">
                    <span>Q ${currentQuestionIndex + 1} / ${currentQuiz.length}</span>
                    <span>Score: ${score}</span>
                </div>
                <div class="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-1.5">
                    <div class="bg-blue-600 h-1.5 rounded-full transition-all duration-300" style="width: ${progress}%"></div>
                </div>

                <div class="glass-card bg-white dark:bg-glassDark p-6 rounded-3xl shadow-lg mt-4">
                    <p class="font-semibold text-lg text-slate-800 dark:text-white mb-6 leading-relaxed">${qData[0]}</p>
                    
                    <div class="space-y-3" id="options-container">
                        ${options.map((opt, index) => `
                            <button onclick="checkAnswer(this, ${opt.correct}, '${qData[6].replace(/'/g, "\\'")}')" class="w-full p-4 text-left rounded-xl border border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-slate-700 dark:text-slate-300">
                                ${opt.text}
                            </button>
                        `).join('')}
                    </div>
                    
                    <div id="explanation" class="hidden mt-4 p-4 bg-blue-50 dark:bg-slate-700/50 rounded-xl border-l-4 border-blue-500 text-sm text-slate-700 dark:text-slate-300"></div>
                    
                    <button id="next-btn" onclick="nextQuestion()" class="hidden w-full mt-4 bg-blue-600 text-white py-3 rounded-xl font-bold">Next</button>
                </div>
            </div>
        `;
    }

    window.checkAnswer = function(btn, isCorrect, explanation) {
        const container = document.getElementById('options-container');
        const buttons = container.querySelectorAll('button');
        buttons.forEach(b => b.disabled = true);

        if (isCorrect) {
            score++;
            btn.classList.add('bg-green-100', 'border-green-500', 'text-green-800', 'dark:bg-green-900', 'dark:text-green-100');
            btn.classList.remove('hover:bg-slate-50', 'dark:hover:bg-slate-700');
        } else {
            btn.classList.add('bg-red-100', 'border-red-500', 'text-red-800', 'dark:bg-red-900', 'dark:text-red-100');
            btn.classList.remove('hover:bg-slate-50', 'dark:hover:bg-slate-700');
            // Highlight correct one logic would require tracking indices or text, for simplicity we show explanation
        }

        const expDiv = document.getElementById('explanation');
        expDiv.innerHTML = `<strong>Note:</strong> ${explanation}`;
        expDiv.classList.remove('hidden');
        document.getElementById('next-btn').classList.remove('hidden');
    }

    window.nextQuestion = function() {
        currentQuestionIndex++;
        if (currentQuestionIndex < currentQuiz.length) {
            renderQuestion();
        } else {
            showResults();
        }
    }

    function showResults() {
        const percentage = Math.round((score / currentQuiz.length) * 100);
        views.content.innerHTML = `
            <div class="text-center p-8 glass-card bg-white dark:bg-glassDark rounded-3xl shadow-lg">
                <div class="h-24 w-24 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mx-auto mb-6">
                    <i class="fa-solid fa-trophy text-4xl text-blue-600 dark:text-blue-400"></i>
                </div>
                <h2 class="text-3xl font-bold text-slate-800 dark:text-white mb-2">${score} / ${currentQuiz.length}</h2>
                <p class="text-slate-500 dark:text-slate-400 mb-6">${percentage}% - ${percentage > 70 ? 'Great Job!' : 'Keep Practicing'}</p>
                
                <button onclick="navigateTo('home')" class="w-full bg-blue-600 text-white py-3 rounded-xl font-bold shadow-lg shadow-blue-500/30">
                    Back to Home
                </button>
            </div>
        `;
    }

    // Flashcards Logic
    let currentDeck = [];
    let fcIndex = 0;

    function renderFlashcardMenu() {
        views.content.innerHTML = `
            <div class="text-center p-4">
                <h2 class="text-xl font-bold text-slate-800 dark:text-white mb-4">Select Deck</h2>
                <div class="space-y-3">
                    <button onclick="startFlashcards('git')" class="w-full glass-card bg-white dark:bg-glassDark p-5 rounded-xl shadow-sm font-bold text-orange-600 border-l-4 border-orange-500">GIT Mnemonics & Facts</button>
                    <button onclick="startFlashcards('renal')" class="w-full glass-card bg-white dark:bg-glassDark p-5 rounded-xl shadow-sm font-bold text-blue-600 border-l-4 border-blue-500">Renal Mnemonics & Facts</button>
                </div>
            </div>`;
    }

    window.startFlashcards = function(module) {
        currentDeck = [];
        // Flatten module questions for flashcards
        Object.values(rawData[module]).forEach(arr => {
            arr.forEach(q => currentDeck.push(q));
        });
        currentDeck.sort(() => Math.random() - 0.5);
        fcIndex = 0;
        renderFlashcard();
    }

    function renderFlashcard() {
        const item = currentDeck[fcIndex];
        // item structure: [Q, O1, O2, O3, O4, CorrectIndex, Explanation]
        // Answer is item[item[5]]
        
        views.content.innerHTML = `
            <div class="h-[400px] w-full perspective-1000 cursor-pointer group" onclick="this.querySelector('.flip-card').classList.toggle('flipped')">
                <div class="flip-card relative w-full h-full duration-500 transform-style-preserve-3d">
                    <!-- Front -->
                    <div class="flip-card-front bg-white dark:bg-glassDark shadow-xl border border-slate-200 dark:border-slate-700">
                        <span class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-4">Question</span>
                        <p class="text-xl font-semibold text-slate-800 dark:text-white">${item[0]}</p>
                        <p class="mt-8 text-xs text-slate-400 animate-pulse">Tap to reveal answer</p>
                    </div>
                    <!-- Back -->
                    <div class="flip-card-back shadow-xl border border-blue-200 dark:border-slate-600">
                        <span class="text-xs font-bold text-blue-500 uppercase tracking-widest mb-4">Answer</span>
                        <p class="text-lg font-bold text-slate-800 dark:text-white mb-4">${item[item[5]]}</p>
                        <p class="text-sm text-slate-600 dark:text-slate-300 italic">"${item[6]}"</p>
                    </div>
                </div>
            </div>
            <div class="flex justify-between mt-6">
                <button onclick="event.stopPropagation(); prevCard()" class="px-6 py-2 rounded-lg bg-slate-200 dark:bg-slate-700 font-bold"><i class="fa-solid fa-arrow-left"></i></button>
                <span class="py-2 text-slate-400 font-mono">${fcIndex + 1} / ${currentDeck.length}</span>
                <button onclick="event.stopPropagation(); nextCard()" class="px-6 py-2 rounded-lg bg-blue-600 text-white font-bold"><i class="fa-solid fa-arrow-right"></i></button>
            </div>
        `;
    }

    window.nextCard = function() { if (fcIndex < currentDeck.length - 1) { fcIndex++; renderFlashcard(); } }
    window.prevCard = function() { if (fcIndex > 0) { fcIndex--; renderFlashcard(); } }

    // Theme Toggle
    const themeToggle = document.getElementById('theme-toggle');
    if (localStorage.getItem('theme') === 'dark' || (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
        themeToggle.checked = true;
    }
    themeToggle.addEventListener('change', function() {
        if(this.checked) {
            document.documentElement.classList.add('dark');
            localStorage.setItem('theme', 'dark');
        } else {
            document.documentElement.classList.remove('dark');
            localStorage.setItem('theme', 'light');
        }
    });
</script>
</body>
</html>

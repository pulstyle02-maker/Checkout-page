<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GI Embryology - Dark Mode</title>
    <style>
        :root {
            --bg: #000000;
            --card-bg: #121212;
            --text-main: #e2e2e2;
            --text-sub: #888888;
            --accent: #3b82f6; /* Blue for context */
            --answer: #4ade80; /* Neon Green for answers */
            --cloze-bg: #2d2d2d;
            --progress: #2563eb;
        }

        body {
            background-color: var(--bg);
            color: var(--text-main);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, sans-serif;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            user-select: none; /* Prevents text highlighting on rapid taps */
            -webkit-tap-highlight-color: transparent;
        }

        /* Top Bar */
        header {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #333;
            background: #0a0a0a;
        }

        .category-badge {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--accent);
            font-weight: 700;
        }

        .counter {
            font-family: monospace;
            color: var(--text-sub);
            font-size: 0.9rem;
        }

        /* Main Content Area */
        #app-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            cursor: pointer;
        }

        /* The Sentence */
        #content-text {
            font-size: 1.6rem;
            line-height: 1.6;
            text-align: left;
            max-width: 600px;
            width: 100%;
            font-weight: 400;
        }

        /* The Hidden/Revealed Word */
        .cloze-box {
            display: inline-block;
            background-color: var(--cloze-bg);
            color: transparent;
            border-radius: 6px;
            padding: 0 12px;
            margin: 0 4px;
            min-width: 60px;
            text-align: center;
            transition: all 0.2s ease;
            font-weight: 600;
            border-bottom: 2px solid #444;
        }

        .cloze-box.revealed {
            background-color: transparent;
            color: var(--answer);
            border-bottom: 2px solid var(--answer);
            transform: scale(1.05);
        }

        /* Instruction text at bottom */
        .instruction {
            position: absolute;
            bottom: 40px;
            color: #444;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Progress Bar */
        .progress-rail {
            width: 100%;
            height: 4px;
            background: #222;
        }
        .progress-fill {
            height: 100%;
            background: var(--progress);
            width: 0%;
            transition: width 0.2s;
            box-shadow: 0 0 10px var(--progress);
        }

        /* Animation for transition */
        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

    </style>
</head>
<body>

    <div class="progress-rail">
        <div class="progress-fill" id="progress-bar"></div>
    </div>

    <header>
        <span class="category-badge" id="category-display">FOREGUT</span>
        <span class="counter" id="counter-display">1 / 60</span>
    </header>

    <div id="app-container">
        <div id="content-text" class="fade-in">
            Loading...
        </div>
        <div class="instruction" id="instruction-text">Tap or Press Vol Up to Reveal</div>
    </div>

    <script>
        // --- DATASET: 60 HIGH YIELD UHS POINTS ---
        const db = [
             // GENERAL
        { q: "The epithelial lining of the digestive tract and parenchyma of glands is derived from [...].", a: "Endoderm", cat: "General" },
        { q: "Connective tissue, muscle, and peritoneum of the gut wall are derived from [...].", a: "Visceral Mesoderm", cat: "General" },
        { q: "Molecular regulation of gut regionalization is initiated by [...] which establishes a HOX gene gradient.", a: "SHH", cat: "Molecular" },
        
        // MESENTERIES & PERITONEUM
        { q: "Organs suspended by mesenteries are called [...].", a: "Intraperitoneal", cat: "Mesenteries" },
        { q: "Organs lying against the posterior body wall covered by peritoneum only anteriorly are called [...].", a: "Retroperitoneal", cat: "Mesenteries" },
        { q: "The ventral mesentery is derived from the [...].", a: "Septum Transversum", cat: "Mesenteries" },
        { q: "The ventral mesentery persists as the [...] and the falciform ligament.", a: "Lesser Omentum", cat: "Mesenteries" },
        { q: "The spleen develops within the [...] mesogastrium.", a: "Dorsal", cat: "Mesenteries" },
        
        // ARTERIAL SUPPLY
        { q: "The foregut is supplied by the [...] artery.", a: "Celiac", cat: "Arteries" },
        { q: "The midgut is supplied by the [...] artery.", a: "SMA (Superior Mesenteric)", cat: "Arteries" },
        { q: "The hindgut is supplied by the [...] artery.", a: "IMA (Inferior Mesenteric)", cat: "Arteries" },

        // FOREGUT: ESOPHAGUS & STOMACH
        { q: "The respiratory diverticulum (lung bud) appears at approximately [...] weeks.", a: "4 weeks", cat: "Foregut" },
        { q: "The [...] septum partitions the foregut into the esophagus and respiratory primordium.", a: "Tracheoesophageal", cat: "Foregut" },
        { q: "Esophageal atresia with [...] fistula is the most common esophageal anomaly (90%).", a: "Distal Tracheoesophageal", cat: "Clinical" },
        { q: "A classic sign of esophageal atresia in the fetus is [...].", a: "Polyhydramnios", cat: "Clinical" },
        { q: "The stomach rotates 90° clockwise around its [...] axis.", a: "Longitudinal", cat: "Foregut" },
        { q: "Due to rotation, the left vagus nerve innervates the [...] wall of the stomach.", a: "Anterior", cat: "Foregut" },
        { q: "The space created behind the stomach by its rotation is the [...].", a: "Omental Bursa", cat: "Foregut" },
        { q: "Pyloric stenosis is characterized by hypertrophy of the [...] muscle layer.", a: "Circular", cat: "Clinical" },
        { q: "The clinical presentation of pyloric stenosis is [...] vomiting.", a: "Projectile Non-bilious", cat: "Clinical" },

        // DUODENUM & LIVER
        { q: "The duodenum becomes C-shaped and rotates to the right, becoming [...] retroperitoneal.", a: "Secondarily", cat: "Foregut" },
        { q: "The hepatic diverticulum (liver bud) appears in the middle of the [...] week.", a: "3rd", cat: "Foregut" },
        { q: "Kupffer cells and hematopoietic cells of the liver are derived from [...].", a: "Mesoderm", cat: "Foregut" },
        { q: "The connection between the liver bud and foregut narrows to form the [...].", a: "Bile Duct", cat: "Foregut" },
        
        // PANCREAS
        { q: "The pancreas is formed by two buds: the [...] and dorsal buds.", a: "Ventral", cat: "Pancreas" },
        { q: "The ventral pancreatic bud forms the [...] and the inferior part of the head.", a: "Uncinate process", cat: "Pancreas" },
        { q: "The main pancreatic duct (Wirsung) is formed by the ventral duct and the distal part of the [...] duct.", a: "Dorsal", cat: "Pancreas" },
        { q: "The master gene for pancreatic development is [...].", a: "PDX1", cat: "Molecular" },
        { q: "Annular pancreas creates a ring around the duodenum causing [...] of the duodenum.", a: "Stenosis", cat: "Clinical" },
        { q: "Insulin secretion begins at approximately the [...] month of fetal life.", a: "5th", cat: "Pancreas" },

        // MIDGUT: ROTATION & HERNIA
        { q: "The midgut communicates with the yolk sac via the [...].", a: "Vitelline Duct", cat: "Midgut" },
        { q: "Physiological herniation of intestinal loops occurs during the [...] week.", a: "6th", cat: "Midgut" },
        { q: "The midgut rotates a total of [...] degrees counterclockwise.", a: "270", cat: "Midgut" },
        { q: "The axis of midgut rotation is the [...] artery.", a: "Superior Mesenteric", cat: "Midgut" },
        { q: "The first 90° of rotation occurs during herniation; the remaining [...] occur during the return.", a: "180°", cat: "Midgut" },
        { q: "Herniated loops return to the abdominal cavity during the [...] week.", a: "10th", cat: "Midgut" },
        { q: "The [...] is the last part of the gut to reenter the abdominal cavity.", a: "Cecal bud", cat: "Midgut" },

        // MIDGUT ANOMALIES
        { q: "An [...] involves herniation through the umbilical ring covered by amnion.", a: "Omphalocele", cat: "Clinical" },
        { q: "Gastroschisis involves protrusion of viscera directly through the body wall and is NOT covered by [...].", a: "Amnion", cat: "Clinical" },
        { q: "Meckel's diverticulum is a remnant of the [...].", a: "Vitelline Duct", cat: "Clinical" },
        { q: "Meckel's diverticulum follows the Rule of 2s: 2 feet from ileocecal valve, 2% of population, contains [...] types of ectopic tissue.", a: "2 (Gastric/Pancreatic)", cat: "Clinical" },
        { q: "A [...] fistula connects the umbilicus to the intestinal lumen (fecal discharge).", a: "Vitelline", cat: "Clinical" },
        { q: "Left-sided colon results from a rotation of only [...] degrees.", a: "90", cat: "Clinical" },
        { q: "Reversed rotation causes the transverse colon to pass [...] the duodenum.", a: "Behind", cat: "Clinical" },

        // HINDGUT
        { q: "The hindgut forms the distal transverse colon to the upper part of the [...].", a: "Anal Canal", cat: "Hindgut" },
        { q: "The cloaca is partitioned by the [...] septum.", a: "Urorectal", cat: "Hindgut" },
        { q: "The upper 2/3 of the anal canal is [...] in origin.", a: "Endodermal", cat: "Hindgut" },
        { q: "The lower 1/3 of the anal canal is ectodermal, derived from the [...].", a: "Proctodeum", cat: "Hindgut" },
        { q: "The junction between endodermal and ectodermal parts of the anal canal is the [...] line.", a: "Pectinate", cat: "Hindgut" },
        
        // HINDGUT ANOMALIES
        { q: "Hirschsprung disease (megacolon) is caused by the absence of [...] ganglia.", a: "Parasympathetic", cat: "Clinical" },
        { q: "Hirschsprung disease results from failed migration of [...] cells.", a: "Neural Crest", cat: "Clinical" },
        { q: "Imperforate anus results when the [...] membrane fails to break down.", a: "Anal", cat: "Clinical" },
        { q: "Rectovaginal fistulas are caused by defects in the formation of the [...].", a: "Cloaca / Urorectal Septum", cat: "Clinical" },

        // EXTRA HIGH YIELD REVIEWS
        { q: "The appendix is initially located in the [...] quadrant before descending.", a: "Right Upper (RUQ)", cat: "Midgut" },
        { q: "Most common position of the appendix is [...].", a: "Retrocecal", cat: "Midgut" },
        { q: "Apple peel atresia occurs in the [...] and accounts for 10% of atresias.", a: "Jejunum", cat: "Clinical" },
        { q: "Extrahepatic biliary atresia often requires a [...] transplant.", a: "Liver", cat: "Clinical" },
        { q: "Accessory pancreatic tissue is most often found in the [...].", a: "Stomach mucosa / Meckel's", cat: "Pancreas" },
        { q: "Double bubble sign on X-ray is indicative of [...] atresia.", a: "Duodenal", cat: "Clinical" },
        { q: "Volvulus is a twisting of the bowel that compromises the [...] supply.", a: "Blood", cat: "Clinical" },
        { q: "The primitive gut is formed during [...] folding of the embryo.", a: "Cephalocaudal/Lateral", cat: "General" }
        ];

        // --- STATE MANAGEMENT ---
        let currentIndex = 0;
        let isRevealed = false; // State: Hidden vs Revealed

        // --- DOM ELEMENTS ---
        const contentDiv = document.getElementById('content-text');
        const catDisplay = document.getElementById('category-display');
        const countDisplay = document.getElementById('counter-display');
        const progressBar = document.getElementById('progress-bar');
        const instruction = document.getElementById('instruction-text');
        const container = document.getElementById('app-container');

        // --- LOGIC ---

        function renderCard() {
            const card = db[currentIndex];
            
            // Text Processing
            // We split the question at '[...]' to insert the specialized span
            const parts = card.q.split('[...]');
            
            // Build HTML
            // Note: We assign an ID to the cloze box to animate it later
            contentDiv.innerHTML = `
                ${parts[0]}<span id="cloze-target" class="cloze-box">???</span>${parts[1]}
            `;

            // Update UI
            catDisplay.textContent = card.cat;
            countDisplay.textContent = `${currentIndex + 1} / ${db.length}`;
            instruction.textContent = "Tap or Press Vol Up to Reveal";
            
            // Reset State
            isRevealed = false;
            
            // Animation Reset
            contentDiv.classList.remove('fade-in');
            void contentDiv.offsetWidth; // Trigger reflow
            contentDiv.classList.add('fade-in');

            // Progress Bar
            const pct = ((currentIndex) / db.length) * 100;
            progressBar.style.width = `${pct}%`;
        }

        function reveal() {
            const clozeBox = document.getElementById('cloze-target');
            const card = db[currentIndex];
            
            clozeBox.textContent = card.a;
            clozeBox.classList.add('revealed');
            
            instruction.textContent = "Tap for Next";
            isRevealed = true;
        }

        function next() {
            if(currentIndex < db.length - 1) {
                currentIndex++;
                renderCard();
            } else {
                // End of Deck
                contentDiv.innerHTML = `<span style="color:var(--answer)">All Done!</span><br>Good luck on your exam.`;
                instruction.textContent = "Tap to Restart";
                currentIndex = -1; // Next tap resets
            }
        }

        function restart() {
            currentIndex = 0;
            renderCard();
        }

        // --- INTERACTION HANDLER ---
        function handleInteraction() {
            if (currentIndex === -1) {
                restart();
                return;
            }

            if (!isRevealed) {
                reveal();
            } else {
                next();
            }
        }

        // --- EVENT LISTENERS ---

        // 1. Touch / Click Anywhere
        container.addEventListener('click', (e) => {
            // Simple debounce to prevent accidental double taps
            handleInteraction();
        });

        // 2. Volume Button & Keyboard Logic
        document.addEventListener('keydown', (e) => {
            // List of keys to trigger interaction
            // 'AudioVolumeUp' is standard for media keys
            // 'ArrowRight', 'Space', 'Enter' for desktop usage
            const triggerKeys = ['Space', 'Enter', 'ArrowRight', 'ArrowDown', 'AudioVolumeUp', 'VolumeUp'];

            if (triggerKeys.includes(e.code) || triggerKeys.includes(e.key)) {
                // Prevent default behavior (e.g., scrolling or volume change)
                // Note: Modern mobile OS often ignore preventDefault for Volume keys for security, 
                // but we listen to the event anyway.
                // e.preventDefault(); 
                
                handleInteraction();
            }
        });

        // Initialize
        renderCard();

    </script>
</body>
</html>

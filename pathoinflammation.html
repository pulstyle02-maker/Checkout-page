<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pathology - Inflammation Module</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a0b2e; /* Deep Purple Background */
            color: #ffffff;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #2d1b4e; 
        }
        ::-webkit-scrollbar-thumb {
            background: #fbbf24; 
            border-radius: 4px;
        }

        /* Animations */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .btn-glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .btn-glass:hover {
            background: rgba(255, 215, 0, 0.2);
            border-color: #fbbf24;
            transform: translateY(-2px);
        }

        .option-btn {
            transition: all 0.2s;
        }
        
        .option-btn.selected {
            border-color: #fbbf24;
            background: rgba(251, 191, 36, 0.1);
        }

        .correct-anim {
            background-color: #22c55e !important;
            border-color: #22c55e !important;
            color: white !important;
        }

        .wrong-anim {
            background-color: #ef4444 !important;
            border-color: #ef4444 !important;
            color: white !important;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Navbar -->
    <nav class="p-4 bg-opacity-90 backdrop-blur-md bg-[#2d1b4e] border-b border-yellow-500/30 sticky top-0 z-50 shadow-lg">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <i class="fa-solid fa-microscope text-yellow-400 text-2xl"></i>
                <h1 class="text-xl md:text-2xl font-bold tracking-wider text-white">
                    PATHOLOGY <span class="text-yellow-400">QUIZ</span>
                </h1>
            </div>
            <button onclick="goHome()" class="text-sm text-gray-300 hover:text-yellow-400 transition">
                <i class="fa-solid fa-house"></i> Home
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto p-4 md:p-6 flex flex-col items-center justify-center">
        
        <!-- Section Selection Screen -->
        <div id="section-menu" class="w-full max-w-4xl grid gap-6 fade-in">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-yellow-400 mb-2">Inflammation & Repair Module</h2>
                <p class="text-gray-400">Select a Learning Objective to begin</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4">
                <!-- Buttons generated by JS -->
            </div>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-container" class="w-full max-w-2xl hidden fade-in">
            <!-- Progress Header -->
            <div class="flex justify-between items-center mb-4 text-sm text-gray-400">
                <span id="progress-text">Question 1/25</span>
                <span id="score-badge" class="bg-yellow-500/20 text-yellow-400 px-3 py-1 rounded-full border border-yellow-500/30">
                    Score: 0
                </span>
            </div>
            
            <!-- Progress Bar -->
            <div class="w-full bg-gray-700 h-2 rounded-full mb-6 overflow-hidden">
                <div id="progress-bar" class="bg-gradient-to-r from-yellow-400 to-orange-500 h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
            </div>

            <!-- Question Card -->
            <div class="bg-[#2d1b4e] border border-purple-500/30 rounded-2xl p-6 md:p-8 shadow-2xl relative overflow-hidden">
                <div class="absolute top-0 right-0 w-32 h-32 bg-yellow-500/10 rounded-full blur-3xl -mr-16 -mt-16"></div>
                
                <h3 id="question-text" class="text-xl md:text-2xl font-semibold mb-8 leading-relaxed text-gray-100">
                    Loading Question...
                </h3>

                <!-- Options -->
                <div id="options-container" class="grid gap-3">
                    <!-- Options injected here -->
                </div>

                <!-- Explanation Box -->
                <div id="explanation-box" class="mt-6 p-4 bg-blue-900/30 border border-blue-500/30 rounded-xl hidden">
                    <p class="text-blue-200 text-sm"><i class="fa-solid fa-circle-info mr-2"></i><span id="explanation-text"></span></p>
                </div>

                <!-- Next Button -->
                <button id="next-btn" onclick="nextQuestion()" class="mt-8 w-full bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-3 px-6 rounded-xl shadow-lg transform transition hover:-translate-y-1 hidden">
                    Next Question <i class="fa-solid fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="w-full max-w-3xl hidden fade-in text-center">
            <div class="bg-[#2d1b4e] border border-yellow-500/30 rounded-3xl p-8 shadow-2xl">
                <div class="w-24 h-24 bg-yellow-400 rounded-full flex items-center justify-center mx-auto mb-6 shadow-[0_0_20px_rgba(251,191,36,0.5)]">
                    <i class="fa-solid fa-trophy text-4xl text-black"></i>
                </div>
                
                <h2 class="text-3xl font-bold text-white mb-2">Module Completed!</h2>
                <p class="text-gray-400 mb-6">Here is how you performed</p>

                <div class="text-6xl font-bold text-yellow-400 mb-8" id="final-score">0%</div>

                <div class="flex flex-col md:flex-row gap-4 justify-center mb-8">
                    <button onclick="restartModule()" class="btn-glass text-white px-8 py-3 rounded-xl font-semibold hover:bg-white/10">
                        <i class="fa-solid fa-rotate-right mr-2"></i> Retry Module
                    </button>
                    <button onclick="goHome()" class="bg-yellow-400 text-black px-8 py-3 rounded-xl font-semibold hover:bg-yellow-500 transition">
                        <i class="fa-solid fa-list mr-2"></i> Main Menu
                    </button>
                </div>

                <!-- Wrong Answers Section -->
                <div id="review-section" class="text-left mt-8 border-t border-gray-700 pt-8 hidden">
                    <h3 class="text-xl font-bold text-red-400 mb-4"><i class="fa-solid fa-circle-exclamation mr-2"></i>Review Incorrect Answers</h3>
                    <div id="wrong-answers-list" class="space-y-4">
                        <!-- Wrong answers injected here -->
                    </div>
                </div>
            </div>
        </div>

    </main>

    <footer class="text-center p-6 text-gray-600 text-sm">
        <p>Pathology Inflammation Module â€¢ Designed for Mobile</p>
    </footer>

    <script>
        // --- DATA: 100 MCQs for PATHOLOGY ---
        const questionBank = [
            // PATH-01 (Q1-25): Acute Inflammation (LO1)
            {
                id: 1, section: "PATH-01", question: "A 45-year-old male sustains a deep stab wound. Which of the following is the hallmark response that initiates the process of acute inflammation?",
                options: ["Fibrosis and scar tissue formation", "Vasodilation and increased vascular permeability", "Macrophage activation and granuloma formation", "Lymphocyte proliferation and antibody synthesis"], answer: 1,
                explanation: "The cardinal signs of acute inflammation (heat, redness, swelling) are primarily driven by vasodilation and increased vascular permeability."
            },
            {
                id: 2, section: "PATH-01", question: "Which clinical sign of inflammation is directly attributed to the process of vasodilation and increased blood flow?",
                options: ["Tumor (Swelling)", "Dolor (Pain)", "Calor (Heat)", "Functio Laesa (Loss of function)"], answer: 2,
                explanation: "Calor (heat) and Rubor (redness) result from increased local blood flow due to arteriolar vasodilation."
            },
            {
                id: 3, section: "PATH-01", question: "The primary cellular element responsible for the acute inflammatory response in the first 6 to 24 hours is the:",
                options: ["Lymphocyte", "Plasma cell", "Eosinophil", "Neutrophil"], answer: 3,
                explanation: "Neutrophils (polymorphonuclear leukocytes) are the first responders and dominate the cellular infiltrate in most forms of acute inflammation."
            },
            {
                id: 4, section: "PATH-01", question: "A 2-year-old child presents with a sudden onset of fever, painful joint swelling, and a high neutrophil count. This is characteristic of a(n):",
                options: ["Serous inflammation", "Fibrinous inflammation", "Suppurative (Purulent) inflammation", "Ulcerative inflammation"], answer: 2,
                explanation: "Suppurative inflammation is characterized by the production of pus, which is rich in neutrophils, cellular debris, and pyogenic bacteria."
            },
            {
                id: 5, section: "PATH-01", question: "Edema fluid accumulating during acute inflammation that has a high protein content and often contains inflammatory cells is referred to as a(n):",
                options: ["Transudate", "Exudate", "Lymphatic fluid", "Interstitial fluid"], answer: 1,
                explanation: "An exudate is inflammatory edema fluid that leaks out due to increased vascular permeability and has a high specific gravity and protein concentration, distinguishing it from a transudate."
            },
            {
                id: 6, section: "PATH-01", question: "Which of the following conditions is an example of acute inflammation leading to a serous exudate?",
                options: ["Abscess formation in the lung", "Tuberculous pleuritis", "Skin blister due to burn injury", "Fibrinous pericarditis"], answer: 2,
                explanation: "A skin blister is a classic example of serous inflammation, characterized by the accumulation of a thin, watery fluid (serous exudate) derived from plasma."
            },
            {
                id: 7, section: "PATH-01", question: "A key event that immediately follows transient vasoconstriction at the site of acute injury is:",
                options: ["Endothelial cell apoptosis", "Sustained arteriolar vasodilation", "Platelet aggregation without activation", "Leukocyte emigration"], answer: 1,
                explanation: "The immediate, brief vasoconstriction is rapidly followed by sustained vasodilation, increasing blood flow and causing redness and heat."
            },
            {
                id: 8, section: "PATH-01", question: "The phenomenon where blood flow velocity slows down in the microcirculation, allowing leukocytes to settle along the endothelial surface, is known as:",
                options: ["Emigration", "Chemotaxis", "Rolling", "Stasis"], answer: 3,
                explanation: "Vasodilation and increased permeability lead to loss of fluid, concentrating red cells and increasing viscosity, resulting in stasis (slowing) of blood flow."
            },
            {
                id: 9, section: "PATH-01", question: "Which component of the acute inflammatory response is responsible for the symptom of Dolor (Pain)?",
                options: ["Neutrophil migration", "Vasodilation", "Activation of kinin system and Prostaglandin E2", "Formation of abscess"], answer: 2,
                explanation: "Pain is caused by the release of mediators like Bradykinin (from the kinin system) and Prostaglandin E2, which sensitize peripheral nerve endings."
            },
            {
                id: 10, section: "PATH-01", question: "A patient develops a thick, yellow coating over the surface of the pericardium following a myocardial infarction. This type of inflammation is termed:",
                options: ["Serous", "Catarrhal", "Hemorrhagic", "Fibrinous"], answer: 3,
                explanation: "Fibrinous inflammation results from a severe increase in vascular permeability allowing large plasma proteins, including fibrinogen, to leak and form a fibrin mesh."
            },
            {
                id: 11, section: "PATH-01", question: "Which outcome of acute inflammation involves minimal tissue damage and return to normal structure?",
                options: ["Fibrosis", "Scarring", "Resolution", "Progression to chronic inflammation"], answer: 2,
                explanation: "Resolution is the ideal outcome where the exudate is cleared, and the site returns to normal architecture."
            },
            {
                id: 12, section: "PATH-01", question: "In the setting of severe bacterial infection (sepsis), widespread endothelial activation by systemic inflammatory mediators can lead to:",
                options: ["Localized healing", "Systemic vasodilation and shock", "Decreased vascular permeability", "Lymphocyte activation only"], answer: 1,
                explanation: "Excessive systemic inflammation leads to widespread vasodilation, hypoperfusion, and septic shock."
            },
            {
                id: 13, section: "PATH-01", question: "What is the primary function of the lysosomal enzymes released by neutrophils at the site of inflammation?",
                options: ["To neutralize chemical mediators", "To promote endothelial cell proliferation", "To kill internalized microbes and degrade tissue", "To inhibit the complement cascade"], answer: 2,
                explanation: "Lysosomal enzymes, including myeloperoxidase, are crucial for the intracellular killing of phagocytosed bacteria and tissue degradation."
            },
            {
                id: 14, section: "PATH-01", question: "A pyogenic bacterium causing an acute inflammation that results in a localized collection of pus is likely to form a/an:",
                options: ["Fistula", "Abscess", "Ulcer", "Granuloma"], answer: 1,
                explanation: "An abscess is a localized collection of purulent inflammatory tissue (pus) caused by pyogenic bacteria."
            },
            {
                id: 15, section: "PATH-01", question: "A young boy suffers from recurrent attacks of hereditary angioedema. This is due to a deficiency in the regulation of which inflammatory cascade?",
                options: ["Coagulation Cascade", "Fibrinolytic System", "Complement System", "Kinin System"], answer: 3,
                explanation: "Hereditary angioedema is often due to a deficiency of C1-inhibitor, which normally regulates the kinin system, leading to excessive bradykinin generation."
            },
            {
                id: 16, section: "PATH-01", question: "What is the role of Nitric Oxide (NO) released by endothelial cells during the vascular phase of acute inflammation?",
                options: ["Potent vasoconstriction", "Platelet aggregation", "Vasodilation", "Increased leukocyte adhesion"], answer: 2,
                explanation: "Nitric oxide is a potent, short-lived vasodilator that relaxes smooth muscle cells."
            },
            {
                id: 17, section: "PATH-01", question: "A deep ulcer in the stomach lining is an example of which morphological type of inflammation?",
                options: ["Serous", "Catarrhal", "Fibrinous", "Ulcerative"], answer: 3,
                explanation: "An ulcer is a local defect on the surface of an organ or tissue (mucosa) produced by the sloughing of inflamed necrotic tissue."
            },
            {
                id: 18, section: "PATH-01", question: "Which statement correctly describes the nature of Leukocyte Adhesion Deficiency (LAD)?",
                options: ["Decreased production of inflammatory cytokines", "Defect in the C3 component of complement", "Impaired ability of leukocytes to perform rolling and firm adhesion", "Excessive synthesis of adhesion molecules"], answer: 2,
                explanation: "LAD results from defective synthesis of $\\beta_2$ integrins (CD18), essential for firm adhesion, or selectin ligands, impairing rolling."
            },
            {
                id: 19, section: "PATH-01", question: "In the classical pathway of complement activation, the component that is the central point for amplification is:",
                options: ["C1", "C3", "C5", "C9"], answer: 1,
                explanation: "C3 cleavage into C3a and C3b is the critical step, as C3b acts as a potent opsonin and leads to the formation of the C5 convertase."
            },
            {
                id: 20, section: "PATH-01", question: "Which structure is primarily responsible for forming the 'leaky junctions' between endothelial cells during the histamine-mediated phase of acute inflammation?",
                options: ["Tight junctions (Zonula occludens)", "Desmosomes", "Adherens junctions", "Gap junctions"], answer: 0,
                explanation: "Histamine causes endothelial cell contraction, creating gaps at the intercellular junctions (specifically the tight junctions), which increases permeability."
            },
            {
                id: 21, section: "PATH-01", question: "Which type of necrosis is commonly associated with suppurative inflammation and pus formation?",
                options: ["Coagulative necrosis", "Liquefactive necrosis", "Caseous necrosis", "Fat necrosis"], answer: 1,
                explanation: "Pus contains large amounts of tissue debris digested by the hydrolytic enzymes released from neutrophils, resulting in liquefactive necrosis."
            },
            {
                id: 22, section: "PATH-01", question: "Systemic manifestation of acute inflammation, characterized by an elevation in body temperature, is induced primarily by which pair of cytokines?",
                options: ["TNF and IL-1", "TGF-$\\beta$ and PDGF", "IL-4 and IL-5", "IFN-$\\gamma$ and IL-10"], answer: 0,
                explanation: "TNF-$\\alpha$ and IL-1 (along with PGE2) are the main pyrogens that act on the hypothalamus to reset the body's thermostat."
            },
            {
                id: 23, section: "PATH-01", question: "The production of acute-phase proteins (like C-reactive protein) by the liver is mainly stimulated by the cytokine:",
                options: ["IL-10", "IL-1", "IL-6", "IFN-$\\gamma$"], answer: 2,
                explanation: "Interleukin-6 (IL-6) is the key mediator that acts on hepatocytes to stimulate the synthesis of most acute-phase proteins."
            },
            {
                id: 24, section: "PATH-01", question: "The process by which leukocytes squeeze through intact blood vessel walls into the interstitial tissue is called:",
                options: ["Margination", "Rolling", "Chemotaxis", "Diapedesis (Emigration)"], answer: 3,
                explanation: "Diapedesis is the trans-endothelial migration of leukocytes, predominantly occurring in the postcapillary venules."
            },
            {
                id: 25, section: "PATH-01", question: "A key regulator that prevents the inflammatory response from causing excessive tissue damage is:",
                options: ["Continuous release of TNF-$\\alpha$", "Production of prostaglandins", "Release of glucocorticoids", "Production of anti-inflammatory mediators (e.g., TGF-$\\beta$ and IL-10)"], answer: 3,
                explanation: "TGF-$\\beta$ and IL-10 are powerful anti-inflammatory cytokines that downregulate the inflammatory response, promoting healing and limiting tissue damage."
            },
            // PATH-02 (Q26-50): Process of Acute Inflammation (LO2)
            {
                id: 26, section: "PATH-02", question: "In the cellular events of acute inflammation, which adhesion molecule primarily mediates the 'rolling' of neutrophils along the endothelial surface?",
                options: ["Integrins", "Immunoglobulin-family adhesion molecules", "Selectins", "Cadherins"], answer: 2,
                explanation: "E-selectin and P-selectin bind to Sialyl Lewis X-modified proteins on leukocytes, mediating the weak, transient adhesion known as rolling."
            },
            {
                id: 27, section: "PATH-02", question: "Firm adhesion of neutrophils to the endothelium is primarily mediated by the interaction between which two molecules?",
                options: ["P-selectin and Sialyl Lewis X", "ICAM-1 and Integrins (LFA-1, VLA-4)", "PECAM-1 and PECAM-1", "VCAM-1 and Selectins"], answer: 1,
                explanation: "Leukocyte integrins (like LFA-1 and VLA-4) are activated by chemokines and bind strongly to endothelial receptors like ICAM-1 and VCAM-1, mediating firm adhesion."
            },
            {
                id: 28, section: "PATH-02", question: "The process of chemotaxis is defined as the unidirectional movement of leukocytes towards an area of injury along a concentration gradient of:",
                options: ["Platelets", "Glucose", "Chemokines and bacterial products", "Fibrin"], answer: 2,
                explanation: "Chemokines and bacterial products (like N-formyl peptides) are the key chemotactic agents that guide leukocytes to the site of infection."
            },
            {
                id: 29, section: "PATH-02", question: "Which arachidonic acid metabolite is a potent chemoattractant for neutrophils and a mediator of vasoconstriction?",
                options: ["Prostaglandin E2 (PGE2)", "Leukotriene B4 (LTB4)", "Leukotriene C4 (LTC4)", "Thromboxane A2 (TXA2)"], answer: 1,
                explanation: "LTB4 is one of the most potent chemotactic agents for neutrophils."
            },
            {
                id: 30, section: "PATH-02", question: "The most important opsonin in the acute inflammatory response, enhancing phagocytosis of microbes, is:",
                options: ["Fibrinogen", "C-reactive protein (CRP) and C3b", "Histamine", "Leukotriene C4"], answer: 1,
                explanation: "Opsonins coat microbes, making them recognizable by phagocytes. C3b (from complement) and acute-phase proteins like CRP are key opsonins."
            },
            {
                id: 31, section: "PATH-02", question: "Which cell-derived mediator is responsible for both pain sensitization and vasodilation in acute inflammation?",
                options: ["Histamine", "Leukotriene B4", "Prostaglandin E2 (PGE2)", "Platelet-Activating Factor (PAF)"], answer: 2,
                explanation: "PGE2 is a major mediator of fever, pain (by sensitizing nerve endings), and vasodilation."
            },
            {
                id: 32, section: "PATH-02", question: "The most rapid (immediate transient) increase in vascular permeability during acute inflammation is typically mediated by:",
                options: ["C5a", "Bradykinin", "Histamine", "TNF-$\\alpha$"], answer: 2,
                explanation: "Histamine, released mainly by mast cells, causes rapid endothelial contraction and gap formation lasting minutes."
            },
            {
                id: 33, section: "PATH-02", question: "The production of which inflammatory mediator is irreversibly inhibited by low-dose aspirin?",
                options: ["Leukotriene C4", "Thromboxane A2 (TXA2)", "Bradykinin", "Platelet-Activating Factor (PAF)"], answer: 1,
                explanation: "Aspirin irreversibly acetylates COX-1 in platelets, blocking the synthesis of TXA2."
            },
            {
                id: 34, section: "PATH-02", question: "The membrane attack complex (MAC) which causes direct lysis of microbial cells, is formed by which complement component?",
                options: ["C1", "C3b", "C5b-C9", "C4"], answer: 2,
                explanation: "The terminal components of the complement cascade (C5b-C9) assemble to form the MAC."
            },
            {
                id: 35, section: "PATH-02", question: "Which pre-formed mediator is stored primarily in the granules of mast cells and basophils?",
                options: ["Prostaglandin E2", "Histamine", "Interleukin-1 (IL-1)", "Nitric Oxide (NO)"], answer: 1,
                explanation: "Histamine is a biogenic amine stored pre-formed and released immediately upon mast cell degranulation."
            },
            {
                id: 36, section: "PATH-02", question: "Leukocyte rolling is mediated by the Selectins, which are characterized by:",
                options: ["Strong, high-affinity bonds", "Binding to collagen", "Low-affinity, easily reversible bonds", "Binding to ICAM-1"], answer: 2,
                explanation: "The weak binding of selectins allows the leukocytes to slow down and 'roll' along the endothelium."
            },
            {
                id: 37, section: "PATH-02", question: "The 'slow-reacting substance of anaphylaxis' (SRS-A) is a mixture of which three leukotrienes, responsible for prolonged bronchoconstriction?",
                options: ["LTB4, LTD4, LTB5", "LTB4, LTC4, LTE4", "LTC4, LTD4, LTE4", "TXA2, PGI2, PGD2"], answer: 2,
                explanation: "These cysteinyl leukotrienes cause intense smooth muscle contraction, leading to bronchospasm."
            },
            {
                id: 38, section: "PATH-02", question: "Platelet-Activating Factor (PAF) is produced by several cell types and causes all of the following *except*:",
                options: ["Platelet aggregation", "Vasoconstriction (at low concentration)", "Bronchoconstriction", "Increased plasma protein synthesis"], answer: 3,
                explanation: "PAF is a lipid mediator involved in vascular and cellular events (aggregation, bronchoconstriction, vasodilation/permeability) but not plasma protein synthesis (driven by IL-6)."
            },
            {
                id: 39, section: "PATH-02", question: "Which enzyme synthesizes prostaglandins from Arachidonic Acid?",
                options: ["Phospholipase A2", "Cyclooxygenase (COX)", "Lipoxygenase (LOX)", "Thromboxane Synthase"], answer: 1,
                explanation: "COX converts Arachidonic Acid into unstable intermediates that are then converted into prostaglandins and thromboxanes."
            },
            {
                id: 40, section: "PATH-02", question: "The extravasation of leukocytes typically occurs predominantly in which part of the microcirculation?",
                options: ["Arterioles", "Capillaries", "Postcapillary venules", "Arteries"], answer: 2,
                explanation: "Postcapillary venules have more prominent gaps and slower blood flow, making them the preferred site for leukocyte emigration (diapedesis)."
            },
            {
                id: 41, section: "PATH-02", question: "A major action of the anaphylatoxins C3a and C5a is to:",
                options: ["Form the membrane attack complex", "Promote chemotaxis of monocytes", "Cause mast cell degranulation", "Inhibit vasodilation"], answer: 2,
                explanation: "C3a and C5a cause the release of histamine from mast cells, leading to increased vascular permeability and vasodilation."
            },
            {
                id: 42, section: "PATH-02", question: "Which mediator is a chemokine (chemotactic cytokine) that primarily attracts and activates neutrophils?",
                options: ["Eotaxin", "IL-8 (CXCL8)", "IL-4", "TNF-$\\alpha$"], answer: 1,
                explanation: "IL-8 is the classic chemokine for neutrophil recruitment."
            },
            {
                id: 43, section: "PATH-02", question: "During phagocytosis, the oxygen-dependent killing mechanism within the phagolysosome generates microbicidal agents primarily via the:",
                options: ["Myeloperoxidase system", "Production of lysozyme", "Production of lactoferrin", "Release of major basic protein"], answer: 0,
                explanation: "MPO converts H2O2 into hypochlorite (bleach), which is highly microbicidal."
            },
            {
                id: 44, section: "PATH-02", question: "The vascular event responsible for concentrating red blood cells and increasing blood viscosity at the inflammatory site is:",
                options: ["Vasoconstriction", "Increased capillary hydrostatic pressure", "Increased vascular permeability leading to fluid exudation", "Leukocyte rolling"], answer: 2,
                explanation: "Loss of protein-free plasma fluid into the extravascular space makes the remaining blood viscous, leading to stasis."
            },
            {
                id: 45, section: "PATH-02", question: "The activation of leukocytes by inflammatory stimuli leads to a rapid increase in oxygen consumption known as the:",
                options: ["Oxidative burst", "Glycolytic shunt", "Kinin activation", "Complement cascade"], answer: 0,
                explanation: "The oxidative burst produces Reactive Oxygen Species (ROS) like superoxide and H2O2, essential for microbial killing."
            },
            {
                id: 46, section: "PATH-02", question: "Which component is primarily responsible for the prolonged increase in vascular permeability (hours to days) seen in certain severe injuries?",
                options: ["Histamine", "Direct endothelial injury", "Nitric Oxide", "Bradykinin"], answer: 1,
                explanation: "Severe damage (burns, toxins) causes necrosis of endothelial cells, leading to a prolonged, non-receptor-mediated leak."
            },
            {
                id: 47, section: "PATH-02", question: "A key function of the $\\alpha_1$-antitrypsin, an acute-phase protein, is to:",
                options: ["Promote clotting", "Increase vascular permeability", "Inhibit neutrophil elastase", "Act as an opsonin"], answer: 2,
                explanation: "$\\alpha_1$-antitrypsin protects host tissues by inhibiting powerful proteolytic enzymes released by neutrophils (e.g., elastase)."
            },
            {
                id: 48, section: "PATH-02", question: "The kinin system generates bradykinin, which primarily contributes to inflammation by:",
                options: ["Inducing fever", "Causing pain and vasodilation", "Promoting coagulation", "Enhancing complement activation"], answer: 1,
                explanation: "Bradykinin is a critical mediator of pain, vasodilation, and increased vascular permeability."
            },
            {
                id: 49, section: "PATH-02", question: "What is the mechanism by which TNF-$\\alpha$ and IL-1 contribute to leukocyte recruitment?",
                options: ["Directly promoting diapedesis", "Upregulating endothelial adhesion molecules", "Inhibiting complement", "Causing mast cell degranulation"], answer: 1,
                explanation: "These cytokines activate the endothelium, increasing the expression of E-selectin, ICAM-1, and VCAM-1, enhancing leukocyte binding."
            },
            {
                id: 50, section: "PATH-02", question: "Lipoxin A4 and Lipoxin B4 are distinct from other eicosanoids because they function primarily as:",
                options: ["Pro-inflammatory mediators", "Vasoconstrictors", "Stop signals (resolution phase mediators)", "Chemotactic agents"], answer: 2,
                explanation: "Lipoxins act to *suppress* inflammation by inhibiting neutrophil chemotaxis and adhesion, promoting resolution."
            },
            // PATH-03 (Q51-75): Chronic & Granulomatous Inflammation (LO3)
            {
                id: 51, section: "PATH-03", question: "The hallmark histological feature that distinguishes chronic inflammation from acute inflammation is the presence of:",
                options: ["Neutrophilic infiltrate", "Extensive edema and hyperemia", "Fibrous exudate", "Mononuclear cell infiltrate (macrophages, lymphocytes, plasma cells)"], answer: 3,
                explanation: "Chronic inflammation is dominated by macrophages, lymphocytes, and plasma cells, along with tissue destruction and attempts at healing (fibrosis)."
            },
            {
                id: 52, section: "PATH-03", question: "Which cell type is the principal driver of the chronic inflammatory response and plays a critical role in tissue destruction and fibrosis?",
                options: ["Neutrophil", "Mast cell", "Macrophage", "Platelet"], answer: 2,
                explanation: "Macrophages (activated by IFN-$\\gamma$) secrete destructive enzymes, ROS, and growth factors (TGF-$\\beta$) that drive fibrosis."
            },
            {
                id: 53, section: "PATH-03", question: "In chronic inflammation, activated T-lymphocytes primarily communicate with macrophages via the release of:",
                options: ["Histamine", "LTB4", "Complement components", "Cytokines (e.g., IFN-$\\gamma$)"], answer: 3,
                explanation: "Interferon-gamma (IFN-$\\gamma$) is the critical cytokine released by T-helper 1 (Th1) cells that activates macrophages."
            },
            {
                id: 54, section: "PATH-03", question: "A granuloma is a microscopic focus of chronic inflammation characterized by a central aggregation of:",
                options: ["Neutrophils", "Plasma cells", "Activated macrophages (Epithelioid cells)", "Fibroblasts"], answer: 2,
                explanation: "The defining feature of a granuloma is the collection of epithelioid macrophages, often surrounded by lymphocytes."
            },
            {
                id: 55, section: "PATH-03", question: "The giant cells seen within a granuloma, formed by the fusion of multiple macrophages, are known as:",
                options: ["Osteoclasts", "Monoblasts", "Langhans giant cells", "Reed-Sternberg cells"], answer: 2,
                explanation: "Langhans giant cells are characteristic of granulomatous conditions, formed from fused epithelioid macrophages."
            },
            {
                id: 56, section: "PATH-03", question: "Granulomatous inflammation is typically induced by:",
                options: ["Acute streptococcal infection", "Viruses", "Persistent T-cell mediated immune response against difficult-to-eradicate agents", "Simple trauma"], answer: 2,
                explanation: "Granulomas form when macrophages cannot fully clear a pathogen (like Mycobacteria or fungi) or a foreign body."
            },
            {
                id: 57, section: "PATH-03", question: "A non-caseating granuloma is classically found in which of the following diseases?",
                options: ["Tuberculosis", "Syphilis", "Sarcoidosis", "Histoplasmosis"], answer: 2,
                explanation: "Sarcoidosis and Crohn's disease are primary examples of non-caseating (non-necrotizing) granulomas."
            },
            {
                id: 58, section: "PATH-03", question: "Which form of Leprosy is characterized by a strong cell-mediated immune response (Th1), resulting in few lesions and paucibacillary status?",
                options: ["Tuberculoid Leprosy", "Lepromatous Leprosy", "Borderline Leprosy", "Indeterminate Leprosy"], answer: 0,
                explanation: "Tuberculoid leprosy has a robust Th1 response (IFN-$\\gamma$), which successfully walls off the bacteria."
            },
            {
                id: 59, section: "PATH-03", question: "Lepromatous Leprosy is characterized by:",
                options: ["High Th1 response", "Abundant macrophages and few bacilli", "A weak Th1 response and high bacterial load (multibacillary)", "Non-caseating granulomas"], answer: 2,
                explanation: "Lepromatous leprosy is associated with a poor Th1 response, leading to unchecked proliferation of *M. leprae* within foamy macrophages."
            },
            {
                id: 60, section: "PATH-03", question: "The causative agent of Leprosy, *Mycobacterium leprae*, is classified as a:",
                options: ["Typical Mycobacteria", "Nontuberculous Mycobacteria (NTM)", "Pyogenic bacterium", "Anaerobic fungus"], answer: 1,
                explanation: "*M. leprae* is an atypical or nontuberculous mycobacterium (NTM)."
            },
            {
                id: 61, section: "PATH-03", question: "In the context of mycobacterial infection, caseous necrosis is a common feature found in the granulomas of:",
                options: ["Tuberculoid Leprosy", "Sarcoidosis", "Foreign body reaction", "Primary Tuberculosis"], answer: 3,
                explanation: "Caseous necrosis (cheese-like amorphous debris) is highly characteristic of the immune response to *Mycobacterium tuberculosis*."
            },
            {
                id: 62, section: "PATH-03", question: "Which cytokine, released by activated macrophages, is known to promote the proliferation of fibroblasts and the synthesis of collagen, thus driving fibrosis?",
                options: ["Tumor Necrosis Factor (TNF-$\\alpha$)", "Platelet-Derived Growth Factor (PDGF)", "Transforming Growth Factor-beta (TGF-$\\beta$)", "Interleukin-1 (IL-1)"], answer: 2,
                explanation: "TGF-$\\beta$ is the single most important fibrogenic agent, stimulating fibroblast chemotaxis and collagen deposition."
            },
            {
                id: 63, section: "PATH-03", question: "Runyon Group I of Nontuberculous Mycobacteria is classified as:",
                options: ["Photochromogens", "Scotochromogens", "Nonphotochromogens", "Rapid growers"], answer: 0,
                explanation: "Runyon Group I (e.g., *M. kansasii*) produces pigment only when exposed to light (photochromogens)."
            },
            {
                id: 64, section: "PATH-03", question: "An example of a Runyon Group IV mycobacterium is *Mycobacterium fortuitum*, which is characterized by:",
                options: ["Rapid growth in culture (under 7 days)", "Pigment production in the dark", "Slow growth and no pigment", "Only growing in living tissue"], answer: 0,
                explanation: "Group IV (Rapid Growers) are NTMs that show visible growth in culture within a week."
            },
            {
                id: 65, section: "PATH-03", question: "The main function of plasma cells (differentiated B lymphocytes) in chronic inflammation is to:",
                options: ["Phagocytose bacteria", "Initiate granuloma formation", "Produce antibodies (immunoglobulins)", "Release histamine"], answer: 2,
                explanation: "Plasma cells are specialized factories for antibody production."
            },
            {
                id: 66, section: "PATH-03", question: "A key inflammatory cell that is often associated with parasitic infections and IgE-mediated allergy in chronic inflammation is the:",
                options: ["Neutrophil", "Eosinophil", "Basophil", "Monocyte"], answer: 1,
                explanation: "Eosinophils are recruited by chemokines like Eotaxin and are involved in defense against parasites and allergic reactions."
            },
            {
                id: 67, section: "PATH-03", question: "The persistent production of which cytokine by Th2 lymphocytes is characteristic of chronic allergic inflammation (e.g., asthma)?",
                options: ["IFN-$\\gamma$", "IL-12", "IL-4 and IL-5", "TNF-$\\alpha$"], answer: 2,
                explanation: "IL-4 promotes IgE production (allergy), and IL-5 activates and recruits eosinophils."
            },
            {
                id: 68, section: "PATH-03", question: "A foreign body granuloma differs from an immune granuloma by:",
                options: ["Lack of epithelioid cells", "Absence of caseous necrosis", "Formation in response to inert material without T-cell involvement", "Being always infectious"], answer: 2,
                explanation: "Foreign body granulomas are a direct reaction to inert material, lacking the classic T-cell-mediated immune activation."
            },
            {
                id: 69, section: "PATH-03", question: "What is the primary role of macrophages (M1 activation) in the initial phases of chronic inflammation?",
                options: ["Promote angiogenesis", "Initiate scar formation", "Microbicidal activity and tissue destruction", "Secrete anti-inflammatory IL-10"], answer: 2,
                explanation: "M1 macrophages (classically activated) are microbicidal and release inflammatory mediators and destructive enzymes."
            },
            {
                id: 70, section: "PATH-03", question: "The conversion of a macrophage into an epithelioid cell during granuloma formation involves:",
                options: ["Loss of phagocytic ability", "Increased synthesis of collagen", "Becoming larger with abundant pink cytoplasm", "Decreased expression of surface MHC molecules"], answer: 2,
                explanation: "Epithelioid cells are large, elongated macrophages that resemble epithelial cells but have minimal phagocytic activity."
            },
            {
                id: 71, section: "PATH-03", question: "Which Runyon Group (NTM) is known as Scotochromogens, producing pigment both in the light and the dark (e.g., *M. scrofulaceum*)?",
                options: ["Group I", "Group II", "Group III", "Group IV"], answer: 1,
                explanation: "Scotochromogens produce a yellow-orange pigment constitutively."
            },
            {
                id: 72, section: "PATH-03", question: "A common feature shared by both Tuberculoid and Lepromatous Leprosy is the tropism of *M. leprae* for:",
                options: ["Renal epithelial cells", "Endothelial cells", "Schwann cells of peripheral nerves", "Hepatocytes"], answer: 2,
                explanation: "*M. leprae* infects Schwann cells, leading to peripheral neuropathy in both forms of the disease."
            },
            {
                id: 73, section: "PATH-03", question: "The formation of a dense fibrous capsule around a site of chronic inflammation is termed:",
                options: ["Regeneration", "Suppuration", "Resolution", "Fibrosis"], answer: 3,
                explanation: "Fibrosis is the deposition of collagen and other ECM components, often as a result of chronic inflammation, leading to scarring."
            },
            {
                id: 74, section: "PATH-03", question: "In chronic viral infections, the dominant cell type present, which directly attacks infected host cells, is the:",
                options: ["Neutrophil", "Plasma cell", "Cytotoxic T lymphocyte (CTL)", "Eosinophil"], answer: 2,
                explanation: "CTLs (CD8+) are key effectors in chronic viral inflammation, killing virus-infected cells."
            },
            {
                id: 75, section: "PATH-03", question: "The characteristic lesion of Tertiary Syphilis, known as a gumma, is an example of which type of granuloma?",
                options: ["Caseating granuloma", "Non-caseating granuloma", "Immune granuloma with central necrosis", "Foreign body granuloma"], answer: 2,
                explanation: "A gumma is a distinct form of necrotizing (immune) granuloma often called a 'gummatous necrosis'."
            },
            // PATH-04 (Q76-100): Cell Repair & Healing (LO4)
            {
                id: 76, section: "PATH-04", question: "Tissues that have the capacity to continuously proliferate throughout life to replace lost cells are classified as:",
                options: ["Permanent tissues", "Stable tissues", "Labile tissues", "Connective tissues"], answer: 2,
                explanation: "Labile tissues (e.g., hematopoietic cells, gut epithelium) are constantly being replaced by stem cell division."
            },
            {
                id: 77, section: "PATH-04", question: "Cardiac myocytes and neurons are examples of which tissue type, characterized by being non-proliferative in postnatal life?",
                options: ["Labile", "Stable", "Permanent", "Epithelial"], answer: 2,
                explanation: "Permanent tissues have left the cell cycle and cannot regenerate; injury is repaired only by scarring (fibrosis)."
            },
            {
                id: 78, section: "PATH-04", question: "Hepatocytes and renal tubular cells are examples of which tissue type that normally exhibits a low level of replication but can rapidly proliferate in response to injury?",
                options: ["Labile", "Stable", "Permanent", "Hematopoietic"], answer: 1,
                explanation: "Stable tissues (e.g., liver, kidney, smooth muscle) are normally quiescent (G0) but can re-enter the cell cycle."
            },
            {
                id: 79, section: "PATH-04", question: "Which phase of the cell cycle involves DNA synthesis and replication?",
                options: ["G1 phase", "S phase", "G2 phase", "M phase"], answer: 1,
                explanation: "The S (Synthesis) phase is dedicated to replicating the cell's genetic material."
            },
            {
                id: 80, section: "PATH-04", question: "Cyclins and Cyclin-Dependent Kinases (CDKs) are essential for:",
                options: ["Phagocytosis", "Inhibiting apoptosis", "Regulating progression through the cell cycle checkpoints", "Initiating acute inflammation"], answer: 2,
                explanation: "CDKs are activated by binding to cyclins, forming complexes that phosphorylate targets, driving the cell from one phase to the next."
            },
            {
                id: 81, section: "PATH-04", question: "Epidermal Growth Factor (EGF) and Hepatocyte Growth Factor (HGF) primarily act by binding to which type of cell surface receptor?",
                options: ["G protein-coupled receptors", "Nuclear receptors", "Tyrosine Kinase Receptors (RTKs)", "Ion channels"], answer: 2,
                explanation: "Growth factors typically bind to RTKs, triggering intracellular phosphorylation cascades."
            },
            {
                id: 82, section: "PATH-04", question: "The primary difference between healing by **first intention** (primary union) and **second intention** (secondary union) is:",
                options: ["Presence of infection", "Presence of granulation tissue", "Amount of tissue loss and wound contraction", "Rate of re-epithelialization"], answer: 2,
                explanation: "First intention occurs in clean wounds with minimal loss; second intention occurs in large wounds with extensive tissue loss and prominent wound contraction."
            },
            {
                id: 83, section: "PATH-04", question: "The specialized connective tissue that forms at the base of a healing wound (e.g., by second intention) is known as:",
                options: ["Scar tissue", "Hypertrophic fascia", "Granulation tissue", "Adhesion"], answer: 2,
                explanation: "Granulation tissue is a temporary, highly vascularized, edematous tissue composed of new capillaries, fibroblasts, and loose ECM."
            },
            {
                id: 84, section: "PATH-04", question: "Which cell type is primarily responsible for the process of wound contraction in healing by secondary intention?",
                options: ["Macrophage", "Endothelial cell", "Lymphocyte", "Myofibroblast"], answer: 3,
                explanation: "Myofibroblasts are specialized fibroblasts containing contractile filaments that physically pull the wound edges together, leading to contraction."
            },
            {
                id: 85, section: "PATH-04", question: "The main component of a mature scar that provides tensile strength is:",
                options: ["Elastic fibers", "Type III collagen", "Type I collagen", "Proteoglycans"], answer: 2,
                explanation: "Type I collagen replaces the weaker Type III collagen in the process of scar maturation, increasing strength."
            },
            {
                id: 86, section: "PATH-04", question: "A complication of wound healing characterized by the excessive formation of scar tissue that extends *beyond* the borders of the original wound is called a:",
                options: ["Hypertrophic scar", "Keloid", "Contraction", "Ulceration"], answer: 1,
                explanation: "A keloid is an aberrant healing response where the scar tissue extends outside the boundaries of the original injury."
            },
            {
                id: 87, section: "PATH-04", question: "Which factor that impairs tissue repair is most directly linked to Vitamin C deficiency?",
                options: ["Diabetes mellitus", "Defective synthesis of collagen (hydroxylation)", "Foreign body", "Increased glucocorticoid usage"], answer: 1,
                explanation: "Vitamin C is a required cofactor for the hydroxylation of procollagen, a critical step for triple helix formation and scar strength."
            },
            {
                id: 88, section: "PATH-04", question: "Which of the following is the most significant mechanism by which chronic Glucocorticoid (Steroid) use impairs wound healing?",
                options: ["Increased blood flow to the wound", "Enhanced fibroblast proliferation", "Inhibition of TGF-$\\beta$ synthesis and anti-inflammatory effects", "Premature re-epithelialization"], answer: 2,
                explanation: "Glucocorticoids suppress fibroblast activity, inhibit collagen synthesis, and decrease the formation of granulation tissue."
            },
            {
                id: 89, section: "PATH-04", question: "Basement membrane integrity is essential for:",
                options: ["Scar tissue formation", "Resolution and regeneration in labile tissues", "Wound contraction", "Immune cell recruitment"], answer: 1,
                explanation: "An intact basement membrane provides the scaffold and cues necessary for the correct migration and organization of regenerating cells."
            },
            {
                id: 90, section: "PATH-04", question: "Platelet-Derived Growth Factor (PDGF) and Vascular Endothelial Growth Factor (VEGF) both play a major role in which step of the repair process?",
                options: ["Scar remodeling", "Angiogenesis (new vessel formation)", "Epithelial cell maturation", "Macrophage apoptosis"], answer: 1,
                explanation: "VEGF is the most potent inducer of new blood vessel formation (angiogenesis), and PDGF attracts cells involved in the repair process."
            },
            {
                id: 91, section: "PATH-04", question: "The Extracellular Matrix (ECM) provides structural support and also serves as a reservoir for:",
                options: ["Glucose", "Calcium ions", "Growth factors and cytokines", "Reactive Oxygen Species"], answer: 2,
                explanation: "The ECM sequesters and presents growth factors, controlling their localized release and signaling, such as TGF-$\\beta$."
            },
            {
                id: 92, section: "PATH-04", question: "Which type of signaling mechanism involves a cell producing a growth factor that then acts upon itself (the same cell)?",
                options: ["Paracrine", "Endocrine", "Autocrine", "Synaptic"], answer: 2,
                explanation: "Autocrine signaling involves a cell stimulating itself, often seen in tumor cells and inflammatory cells."
            },
            {
                id: 93, section: "PATH-04", question: "In the context of wound healing, the term 'dehiscence' refers to:",
                options: ["Excessive granulation tissue", "Separation of wound edges", "Formation of a keloid", "Contracture of joints"], answer: 1,
                explanation: "Dehiscence is the rupture of a wound, commonly seen in abdominal surgical incisions due to mechanical stress."
            },
            {
                id: 94, section: "PATH-04", question: "The function of Matrix Metalloproteinases (MMPs) in tissue repair is to:",
                options: ["Synthesize new collagen fibers", "Degrade and remodel the Extracellular Matrix (ECM)", "Attract inflammatory cells", "Stimulate re-epithelialization"], answer: 1,
                explanation: "MMPs break down collagen and other ECM components, necessary for tissue remodeling and scar maturation."
            },
            {
                id: 95, section: "PATH-04", question: "Which type of stem cell is multipotent, found in the bone marrow, and is responsible for producing blood cells?",
                options: ["Embryonic stem cells", "Induced pluripotent stem cells", "Hematopoietic stem cells", "Mesenchymal stem cells"], answer: 2,
                explanation: "HSCs give rise to all blood cell lineages (RBCs, WBCs, platelets)."
            },
            {
                id: 96, section: "PATH-04", question: "Re-epithelialization, a key event in wound healing, is primarily driven by the migration and proliferation of:",
                options: ["Endothelial cells", "Keratinocytes", "Myofibroblasts", "Plasma cells"], answer: 1,
                explanation: "Epithelial cells (keratinocytes in the skin) migrate over the granulation tissue to re-establish the epithelial barrier."
            },
            {
                id: 97, section: "PATH-04", question: "A contracture as a complication of wound healing is most common in which site?",
                options: ["Brain tissue", "Abdominal incision", "Palms, soles, and burns crossing joints", "Liver parenchyma"], answer: 2,
                explanation: "Contractures are exaggerated wound contraction, often seen over joints or the palms/soles, leading to limitation of movement."
            },
            {
                id: 98, section: "PATH-04", question: "In the cell cycle, the restriction point (G1 checkpoint) ensures that the cell:",
                options: ["Has completed DNA replication", "Has sufficient growth signals to commit to division", "Has aligned its chromosomes correctly", "Is ready for mitosis"], answer: 1,
                explanation: "The G1 checkpoint is the crucial decision point where the cell commits to entering the S phase and dividing, dependent on growth factor signals."
            },
            {
                id: 99, section: "PATH-04", question: "The process of tissue repair that restores the native architecture of the tissue is termed:",
                options: ["Fibrosis", "Scar formation", "Organization", "Regeneration"], answer: 3,
                explanation: "Regeneration is the complete replacement of damaged cells with cells of the same type, often dependent on an intact ECM scaffold."
            },
            {
                id: 100, section: "PATH-04", question: "The role of the **M2 (alternatively activated) macrophage** in tissue repair is primarily to:",
                options: ["Produce destructive ROS", "Phagocytose bacteria", "Secrete anti-inflammatory cytokines and growth factors (e.g., TGF-$\\beta$)", "Upregulate MHC class I"], answer: 2,
                explanation: "M2 macrophages are involved in tissue repair and remodeling, promoting angiogenesis, fibroblast activation, and collagen deposition."
            }
        ];

        // --- STATE MANAGEMENT ---
        let currentSectionQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let wrongAnswers = [];

        // --- DOM ELEMENTS ---
        const sectionMenu = document.getElementById('section-menu');
        const quizContainer = document.getElementById('quiz-container');
        const resultScreen = document.getElementById('result-screen');
        
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const scoreBadge = document.getElementById('score-badge');
        const explanationBox = document.getElementById('explanation-box');
        const explanationText = document.getElementById('explanation-text');
        const nextBtn = document.getElementById('next-btn');
        const finalScoreDisplay = document.getElementById('final-score');
        const reviewSection = document.getElementById('review-section');
        const wrongAnswersList = document.getElementById('wrong-answers-list');

        // --- INITIALIZATION ---
        function init() {
            const sections = [
                { id: "PATH-01", title: "LO1: Acute Inflammation Basics", desc: "Cardinal Signs, Morphology, Neutrophil Role." },
                { id: "PATH-02", title: "LO2: Acute Inflammation Mechanisms", desc: "Vascular/Cellular Events & Chemical Mediators." },
                { id: "PATH-03", title: "LO3: Chronic & Granulomatous Infl.", desc: "Macrophage, Fibrosis, Mycobacteria & Leprosy." },
                { id: "PATH-04", title: "LO4: Cell Repair & Wound Healing", desc: "Cell Cycle, Growth Factors, ECM & Healing Types." }
            ];

            const container = sectionMenu.querySelector('.grid');
            container.innerHTML = '';

            sections.forEach(sec => {
                const btn = document.createElement('button');
                btn.className = "bg-[#2d1b4e] border border-purple-500/30 hover:border-yellow-400 p-6 rounded-2xl text-left transition-all hover:bg-purple-900/50 group shadow-lg";
                btn.onclick = () => startQuiz(sec.id);
                btn.innerHTML = `
                    <div class="flex items-center justify-between mb-2">
                        <span class="bg-yellow-400/10 text-yellow-400 text-xs px-2 py-1 rounded uppercase tracking-wide">${sec.id}</span>
                        <i class="fa-solid fa-chevron-right text-gray-500 group-hover:text-yellow-400 transition"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-1 group-hover:text-yellow-300 transition">${sec.title}</h3>
                    <p class="text-sm text-gray-400">${sec.desc}</p>
                `;
                container.appendChild(btn);
            });
        }

        // --- QUIZ LOGIC ---
        function startQuiz(sectionId) {
            currentSectionQuestions = questionBank.filter(q => q.section === sectionId);
            currentQuestionIndex = 0;
            score = 0;
            wrongAnswers = [];
            
            sectionMenu.classList.add('hidden');
            resultScreen.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            
            renderQuestion();
        }

        function renderQuestion() {
            const q = currentSectionQuestions[currentQuestionIndex];
            
            // Update UI
            questionText.innerText = `${currentQuestionIndex + 1}. ${q.question}`;
            progressText.innerText = `Question ${currentQuestionIndex + 1}/${currentSectionQuestions.length}`;
            scoreBadge.innerText = `Score: ${score}`;
            progressBar.style.width = `${((currentQuestionIndex) / currentSectionQuestions.length) * 100}%`;
            
            // Reset State
            optionsContainer.innerHTML = '';
            explanationBox.classList.add('hidden');
            nextBtn.classList.add('hidden');

            // Create Options
            q.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = "option-btn w-full text-left p-4 rounded-xl border border-gray-600 bg-gray-800/50 hover:bg-gray-700 text-gray-200 font-medium relative";
                btn.innerHTML = `<span class="inline-block w-6 h-6 rounded-full bg-gray-700 text-center text-xs leading-6 mr-3 border border-gray-600">${String.fromCharCode(65 + index)}</span> ${opt}`;
                btn.onclick = () => checkAnswer(index, btn);
                optionsContainer.appendChild(btn);
            });
        }

        function checkAnswer(selectedIndex, btnElement) {
            // Disable all buttons
            const buttons = optionsContainer.querySelectorAll('button');
            buttons.forEach(b => b.disabled = true);

            const q = currentSectionQuestions[currentQuestionIndex];
            const isCorrect = selectedIndex === q.answer;

            if (isCorrect) {
                score++;
                btnElement.classList.add('correct-anim');
                btnElement.querySelector('span').classList.replace('bg-gray-700', 'bg-green-600');
                scoreBadge.innerText = `Score: ${score}`;
            } else {
                btnElement.classList.add('wrong-anim');
                btnElement.querySelector('span').classList.replace('bg-gray-700', 'bg-red-600');
                
                // Highlight correct answer
                buttons[q.answer].classList.add('correct-anim');
                buttons[q.answer].querySelector('span').classList.replace('bg-gray-700', 'bg-green-600');
                
                wrongAnswers.push({
                    question: q.question,
                    yourAnswer: q.options[selectedIndex],
                    correctAnswer: q.options[q.answer],
                    explanation: q.explanation
                });
            }

            // Show Explanation
            explanationText.innerHTML = `<strong>${isCorrect ? "Correct!" : "Incorrect."}</strong> ${q.explanation}`;
            explanationBox.classList.remove('hidden');
            
            // Show Next Button
            nextBtn.classList.remove('hidden');
            
            // Update Progress Bar
            progressBar.style.width = `${((currentQuestionIndex + 1) / currentSectionQuestions.length) * 100}%`;
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < currentSectionQuestions.length) {
                renderQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            quizContainer.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            
            const percentage = Math.round((score / currentSectionQuestions.length) * 100);
            finalScoreDisplay.innerText = `${percentage}%`;
            finalScoreDisplay.className = `text-6xl font-bold mb-8 ${percentage >= 70 ? 'text-green-400' : 'text-red-400'}`;

            // Render Wrong Answers
            if (wrongAnswers.length > 0) {
                reviewSection.classList.remove('hidden');
                wrongAnswersList.innerHTML = '';
                wrongAnswers.forEach(item => {
                    const div = document.createElement('div');
                    div.className = "bg-gray-800/50 p-4 rounded-xl border border-red-500/20";
                    div.innerHTML = `
                        <p class="text-white font-semibold mb-2 text-sm md:text-base">${item.question}</p>
                        <div class="text-xs md:text-sm grid gap-1">
                            <p class="text-red-400"><i class="fa-solid fa-xmark mr-2"></i>Your Answer: ${item.yourAnswer}</p>
                            <p class="text-green-400"><i class="fa-solid fa-check mr-2"></i>Correct Answer: ${item.correctAnswer}</p>
                            <p class="text-blue-300 mt-2 italic border-t border-gray-700 pt-2"><i class="fa-solid fa-lightbulb mr-1"></i> ${item.explanation}</p>
                        </div>
                    `;
                    wrongAnswersList.appendChild(div);
                });
            } else {
                reviewSection.classList.add('hidden');
            }
        }

        function restartModule() {
            // Identify current section ID by checking the first question of the last set
            const currentSecID = currentSectionQuestions[0].section;
            startQuiz(currentSecID);
        }

        function goHome() {
            quizContainer.classList.add('hidden');
            resultScreen.classList.add('hidden');
            sectionMenu.classList.remove('hidden');
        }

        // Run
        init();
These must be in the HTML above this script block)
    const passcodeScreen = document.getElementById('passcode-screen');
    const passcodeInput = document.getElementById('passcode-input');
    const passcodeError = document.getElementById('passcode-error');
    const mainNav = document.getElementById('main-nav');
    const mainContent = document.getElementById('main-content');
    const mainFooter = document.getElementById('main-footer');

    function grantAccess() {
        // Hide the lock screen
        passcodeScreen.classList.add('hidden');
        
        // Show the main content
        mainNav.classList.remove('hidden');
        mainContent.classList.remove('hidden');
        mainFooter.classList.remove('hidden');
        
        // Initialize the quiz application
        init();
</script>
</body>
</html>

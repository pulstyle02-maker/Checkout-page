<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ModMedicalis | Let the visuals speak</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Import Fonts */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Parisienne&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Lilita+One&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Londrina+Solid:wght@100;300;400;900&display=swap');
        
        @font-face {
            font-family: 'BBH SANS BOGLE';
            src: local('Arial'), local('Helvetica'), local('sans-serif'); 
            font-weight: 300;
        }

        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .londrina-solid-font {
            font-family: 'Londrina Solid', sans-serif;
            font-weight: 400;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
            transition: background-color 0.3s, color 0.3s;
        }
        
        .grid-pattern-bg {
             position: absolute;
             top: 0;
             left: 0;
             width: 100%;
             height: 100%;
             z-index: 1;
             background-image: linear-gradient(to right, rgba(255, 255, 255, 0.2) 2px, transparent 2px),
                               linear-gradient(to bottom, rgba(255, 255, 255, 0.2) 2px, transparent 2px);
             background-size: 40px 40px;
        }
        
        .red-curved-section {
            background-color: #ef4444;
            border-bottom-left-radius: 50px;
            border-bottom-right-radius: 50px;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .red-curved-section .content-z {
            position: relative;
            z-index: 10;
        }

        .medical-pattern-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.05;
        }
        
        .avail-btn {
            background-color: #1e293b;
            color: white;
            padding: 1rem 2.5rem;
            font-weight: 700;
            border-radius: 1.5rem;
            transition: background-color 0.3s, transform 0.2s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .avail-btn:hover {
            background-color: #334155;
            transform: translateY(-2px);
        }
        
        .top-resources-gradient {
            background: linear-gradient(90deg, #1A5693, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
            font-weight: 800;
        }
        
        .filter-text-button {
            position: relative;
            cursor: pointer;
            padding: 0.5rem 1rem;
            font-weight: 700;
            transition: color 0.3s ease;
            padding-bottom: 0.75rem; 
        }
        
        .filter-text-button::after {
            content: '';
            position: absolute;
            left: 50%; 
            bottom: 0;
            height: 3px;
            width: 0;
            background-color: #3b82f6; 
            transition: width 0.3s ease, transform 0.3s ease;
            transform: translateX(-50%);
        }

        .filter-text-button.active {
            color: #3b82f6; 
        }
        
        #filter-buttons-container .filter-text-button.active::after {
             background-color: white !important;
        }

        .filter-text-button.active::after {
            width: 100%;
        }
        
        .review-box-design {
            background-color: white;
            border: 1px solid #e5e7eb;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border-radius: 1rem; 
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            height: 100%;
        }
        
        .review-box-design:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        
        .review-box-design::before {
             content: '';
             position: absolute;
             top: 0;
             left: 0;
             width: 100%;
             height: 4px;
             background-color: #1A5693;
             transform: scaleX(0);
             transform-origin: left;
             transition: transform 0.3s ease;
        }
        
        .review-box-design:hover::before {
            transform: scaleX(1);
        }

        .product-popup-overlay {
            z-index: 60; 
            background-color: rgba(0, 0, 0, 0.7);
        }

        #product-details-popup {
             background-color: white;
             max-width: 32rem; 
        }

        .product-popup-image-container {
            width: 100%;
            padding-top: 125%; 
            position: relative;
            overflow: hidden;
            background-color: #f3f4f6;
        }
        
        .product-popup-image-container img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain; 
        }
        
        .glass-card {
            background-color: #ffffff;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            position: relative;
        }

        .horizontal-scroll-container {
            display: flex;
            overflow-x: scroll;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            padding-bottom: 1rem;
        }

        .horizontal-scroll-container::-webkit-scrollbar {
            display: none; 
        }
        .horizontal-scroll-container {
            -ms-overflow-style: none;  
            scrollbar-width: none;  
        }

        .product-image-box {
            background-color: #e5e7eb; 
            position: relative;
            height: 9rem; 
            margin-bottom: 0.5rem; 
            cursor: pointer; 
        }
        .product-image-box img {
            object-fit: contain;
            width: 100%;
            height: 100%;
        }
        .product-card-title {
            font-size: 1rem; 
            line-height: 1.2;
            font-weight: 900; 
            text-transform: uppercase;
            cursor: pointer; 
        }
        .product-price-main {
            color: #ef4444; 
            font-size: 1.25rem; 
            font-weight: 900;
        }
        .product-price-cut {
            color: #9ca3af; 
            text-decoration: line-through;
            font-size: 0.875rem; 
        }
        .add-to-cart-btn {
            width: 2rem; 
            height: 2rem; 
            font-size: 1.25rem; 
            background-color: #1e293b; 
            color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            position: absolute; 
            bottom: 0.75rem; 
            right: 0.75rem; 
        }
        
        .cart-item-card {
            background-color: #fff;
            border: 1px solid #e5e7eb;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            background-image: linear-gradient(to right, #ffffff 1px, transparent 1px),
                              linear-gradient(to bottom, #ffffff 1px, transparent 1px);
            background-size: 15px 15px; 
        }
        
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .product-slide-up {
          animation: slideUp 0.4s ease-out forwards;
        }

        @keyframes slide { from { transform: translateX(0); } to { transform: translateX(-50%); } }
        .sliding-row { display: flex; width: fit-content; animation: slide 30s linear infinite; }
        .sliding-item-container { display: inline-block; white-space: nowrap; padding-right: 50vw; }
        .sliding-feature-box { display: inline-flex; align-items: center; padding: 0.5rem 1rem; background-color: #ffffff; border-radius: 9999px; margin: 0 1rem; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05); }
        .sliding-feature-text { background: linear-gradient(90deg, #3b82f6, #f25f61, #facc15); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; color: transparent; font-weight: 700; font-size: 0.875rem; }
        .sliding-row:nth-child(2) { animation-direction: reverse; animation-duration: 35s; }
        .parisienne-font { font-family: 'Parisienne', cursive; font-weight: 400; }
        .playfair-font { font-family: 'Playfair Display', serif; font-weight: 800; }
        .insight-banner-bg { background-image: linear-gradient(to right, #1A5693, #3b82f6); color: #ffffff; }
        .insight-text-yellow { color: #facc15; font-weight: 700; }
        @keyframes floatAndRotate { 0% { transform: translate(0, 0) rotate(0deg); } 33% { transform: translate(10px, -10px) rotate(3deg); } 66% { transform: translate(-8px, 8px) rotate(-2deg); } 100% { transform: translate(0, 0) rotate(0deg); } }
        .dynamic-bg-img { position: absolute; opacity: 0.12; background-size: contain; background-repeat: no-repeat; pointer-events: none; animation: floatAndRotate 20s ease-in-out infinite alternate; }
        .dynamic-bg-img:nth-child(1) { top: 5%; left: 5%; width: 80px; height: 80px; animation-duration: 22s; animation-delay: 0s; } .dynamic-bg-img:nth-child(2) { top: 40%; left: 15%; width: 70px; height: 70px; animation-duration: 25s; animation-delay: 2s; animation-direction: alternate-reverse; } .dynamic-bg-img:nth-child(3) { top: 10%; right: 10%; width: 90px; height: 90px; animation-duration: 18s; animation-delay: 4s; } .dynamic-bg-img:nth-child(4) { bottom: 10%; right: 5%; width: 60px; height: 60px; animation-duration: 20s; animation-delay: 6s; animation-direction: alternate-reverse; } .dynamic-bg-img:nth-child(5) { bottom: 25%; left: 8%; width: 50px; height: 50px; animation-duration: 28s; animation-delay: 8s; } .dynamic-bg-img:nth-child(6) { top: 55%; right: 20%; width: 85px; height: 85px; animation-duration: 23s; animation-delay: 10s; animation-direction: alternate-reverse; } .dynamic-bg-img:nth-child(7) { top: 30%; left: 25%; width: 65px; height: 65px; animation-duration: 24s; animation-delay: 1s; } .dynamic-bg-img:nth-child(8) { top: 70%; left: 5%; width: 75px; height: 75px; animation-duration: 26s; animation-delay: 3s; animation-direction: alternate; } .dynamic-bg-img:nth-child(9) { top: 45%; right: 5%; width: 80px; height: 80px; animation-duration: 19s; animation-delay: 5s; animation-direction: alternate-reverse; } .dynamic-bg-img:nth-child(10) { bottom: 20%; right: 25%; width: 55px; height: 55px; animation-duration: 21s; animation-delay: 7s; } .dynamic-bg-img:nth-child(11) { top: 15%; left: 40%; width: 60px; height: 60px; animation-duration: 29s; animation-delay: 9s; animation-direction: alternate; } .dynamic-bg-img:nth-child(12) { bottom: 5%; left: 35%; width: 70px; height: 70px; animation-duration: 17s; animation-delay: 11s; animation-direction: alternate-reverse; }

        .comparison-container {
            position: relative;
            overflow: hidden;
            padding-top: 75%;
            max-width: 42rem; 
            margin: 0 auto;
            user-select: none;
            cursor: ew-resize;
            border-radius: 1rem; 
        }

        .comparison-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain; 
            transition: clip-path 0.3s ease-out; 
            -webkit-transition: clip-path 0.3s ease-out;
            pointer-events: none; 
        }
        
        .comparison-image.after {
            clip-path: inset(0 0 0 50%); 
            -webkit-clip-path: inset(0 0 0 50%);
        }

        .comparison-line {
            position: absolute;
            top: 0;
            left: 50%; 
            width: 6px; 
            height: 100%;
            background-color: #1A5693;
            transform: translateX(-50%);
            z-index: 20;
            transition: left 0.3s ease-out;
            pointer-events: none;
            border-radius: 9999px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
        }

        .slider-handle {
            position: absolute;
            top: 50%;
            left: 50%; 
            width: 40px;
            height: 40px;
            background-color: white;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 30;
            transition: left 0.3s ease-out;
            pointer-events: none; 
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        .tilted-overlap-image {
            position: absolute;
            top: -2.5rem;
            right: 0.5rem;
            width: 120px; 
            height: 120px; 
            z-index: 20;
            transform: rotate(10deg);
            object-fit: contain;
            pointer-events: none;
        }
        
        .logo-font {
            font-family: 'Lilita One', cursive;
            background: linear-gradient(90deg, #1A5693, #ef4444);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
        }
        
        .prebook-notification-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            pointer-events: none;
        }

        .prebook-notification-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        .prebook-notification-popup {
            background-color: #eff6ff;
            border: 2px solid #93c5fd;
            box-shadow: 0 10px 25px 0 rgba(0, 0, 0, 0.3);
            border-radius: 16px;
            color: #1e293b;
            padding: 1.5rem;
            max-width: 90%;
            width: 380px;
            transform: scale(0.9);
            transition: transform 0.3s ease-in-out;
            position: relative;
            text-align: center;
        }
        
        .prebook-notification-overlay.active .prebook-notification-popup {
             transform: scale(1);
        }
        
        .close-popup-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #dbeafe;
            border-radius: 50%;
            padding: 4px;
            line-height: 1;
            cursor: pointer;
            transition: background 0.2s;
        }
        .close-popup-btn:hover {
            background: #93c5fd;
        }
        
        @keyframes confetti-fall {
            0% { opacity: 1; transform: translateY(-100%) rotate(0deg); }
            100% { opacity: 0; transform: translateY(100vh) rotate(720deg); }
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--color);
            border-radius: 50%;
            animation: confetti-fall var(--duration) linear infinite;
        }
        
        .overflow-hidden-body {
            overflow: hidden;
        }

        #bottom-notification-bar.hidden-down {
            transform: translateY(150%);
        }

        .progress-bar-container {
            width: 100%;
            height: 8px;
            background-color: #e5e7eb;
            border-radius: 4px;
            margin-bottom: 1.5rem;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(to right, #1A5693, #3b82f6);
            border-radius: 4px;
            transition: width 0.5s ease-in-out;
        }
        
        .checkout-step {
            display: none;
        }
        
        .checkout-step.active {
            display: block;
        }
        
        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            position: relative;
        }
        
        .step-indicator::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background-color: #e5e7eb;
            transform: translateY(-50%);
            z-index: 1;
        }
        
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 2;
            position: relative;
            flex: 1;
        }
        
        .step-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #6b7280;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
        }
        
        .step.active .step-circle {
            background-color: #1A5693;
            color: white;
        }
        
        .step.completed .step-circle {
            background-color: #10b981;
            color: white;
        }
        
        .step-label {
            font-size: 0.75rem;
            color: #6b7280;
            text-align: center;
        }
        
        .step.active .step-label {
            color: #1A5693;
            font-weight: 600;
        }
        
        .step.completed .step-label {
            color: #10b981;
        }
        
        .checkout-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 1.5rem;
        }
        
        .search-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            max-height: 200px;
            overflow-y: auto;
            z-index: 50;
        }
        
        .search-dropdown-item {
            padding: 0.75rem 1rem;
            cursor: pointer;
            border-bottom: 1px solid #f3f4f6;
            transition: background-color 0.2s;
        }
        
        .search-dropdown-item:hover {
            background-color: #f9fafb;
        }
        
        .search-dropdown-item:last-child {
            border-bottom: none;
        }

        @media (prefers-color-scheme: dark) {
            body {
                background-color: #f8fafc !important;
                color: #1e293b !important;
            }
        }
    </style>
</head>
<body class="min-h-screen antialiased">

    <div class="bg-red-600 text-white text-center py-2 text-xs font-semibold sticky top-0 z-50">
        Mind your minors BLOCK 6 on its way!
        <button class="ml-2 px-2 py-0.5 bg-white text-red-600 rounded-full text-xs font-bold hover:bg-gray-100 transition duration-200" onclick="showPopup()">
            Prebook now
        </button>
    </div>

    <header class="bg-white shadow-lg sticky top-8 md:top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-14 sm:h-16">
                <a href="javascript:location.reload()" class="flex-shrink-0 flex items-center">
                    <img src="https://i.imgur.com/osPp3Sa.jpeg" alt="ModMedicalis Logo" class="h-10 sm:h-12 w-auto rounded-lg">
                </a>
                
                <nav class="hidden md:flex items-center space-x-6">
                    <div class="relative">
                        <input type="text" id="search-input" placeholder="Search products..." class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-[#1A5693] focus:border-[#1A5693] w-64">
                        <button id="search-button" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-600 hover:text-[#1A5693]">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                        </button>
                        <div id="search-dropdown" class="search-dropdown hidden"></div>
                    </div>
                    <button id="desktop-cart-button" class="relative text-gray-600 hover:text-[#1A5693] transition duration-150">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shopping-cart"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.38a2 2 0 0 0 1.84-1.11L22 7H4"/></svg>
                        <span id="desktop-cart-count" class="absolute -top-1 -right-1 inline-flex items-center justify-center px-2 py-0.5 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-[#1A5693] rounded-full">0</span>
                    </button>
                </nav>

                <div class="flex items-center md:hidden space-x-4">
                    <button id="mobile-cart-button" class="relative text-gray-600 hover:text-[#1A5693] transition duration-150">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shopping-cart"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.38a2 2 0 0 0 1.84-1.11L22 7H4"/></svg>
                        <span id="mobile-cart-count" class="absolute -top-1 -right-1 inline-flex items-center justify-center px-2 py-0.5 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-[#1A5693] rounded-full">0</span>
                    </button>
                    <button id="mobile-menu-button" class="text-gray-600 hover:text-[#1A5693]">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-100">
            <div class="px-4 py-3 space-y-2">
                <div class="relative w-full">
                    <input type="text" id="mobile-search-input" placeholder="Search products..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-[#1A5693] focus:border-[#1A5693]">
                    <button id="mobile-search-button" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-600 hover:text-[#1A5693]">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                    </button>
                    <div id="mobile-search-dropdown" class="search-dropdown hidden"></div>
                </div>
            </div>
        </div>
    </header>

    <main>
        <section class="pt-6 pb-12 sm:pt-6 sm:pb-16 bg-white relative overflow-hidden">
            <div class="absolute inset-0 z-0">
                </div>
            
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">

                <div class="inline-block px-3 py-1.5 insight-banner-bg rounded-full text-xs font-medium mb-6 shadow-md">
                    Pakistan's first <span class="insight-text-yellow">insightful</span> platform for MBBS
                </div>

                <h1 class="text-3xl sm:text-6xl font-extrabold tracking-tight mb-4">
                    <span class="text-3xl sm:text-6xl text-gray-700" style="font-family: 'BBH SANS BOGLE', sans-serif; font-weight: 300;">When the words get dull</span>
                    <div class="text-[#1A5693] text-5xl sm:text-7xl mt-1 mb-3 londrina-solid-font">
                        Let the <span class="text-red-600" style="font-family: 'Londrina Solid', sans-serif; font-weight: 400;">VISUALS</span> speak!
                    </div>
                </h1>
                
                <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
                    </div>
            </div>
            
        </section>

        <section class="py-3 bg-gray-100 overflow-hidden border-y border-gray-200 space-y-2">
            
            <div class="flex">
                <div class="sliding-row">
                    <div class="sliding-item-container">
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Aligned with UHS LOs</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">From UHS recommended books</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Mnemonics</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Illustration</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Past papers</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">OSPE</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Online quiz & flashcards</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Flowcharts</span></span>
                    </div>
                    <div class="sliding-item-container">
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Aligned with UHS LOs</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">From UHS recommended books</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Mnemonics</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Illustration</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Past papers</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">OSPE</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Online quiz & flashcards</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Flowcharts</span></span>
                    </div>
                </div>
            </div>

            <div class="flex">
                <div class="sliding-row">
                    <div class="sliding-item-container">
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Mnemonics</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Illustration</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Aligned with UHS LOs</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Past papers</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">From UHS recommended books</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Flowcharts</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Online quiz & flashcards</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">OSPE</span></span>
                    </div>
                    <div class="sliding-item-container">
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Mnemonics</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Illustration</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Aligned with UHS LOs</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Past papers</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">From UHS recommended books</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Flowcharts</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">Online quiz & flashcards</span></span>
                        <span class="sliding-feature-box"><span class="sliding-feature-text">OSPE</span></span>
                    </div>
                </div>
            </div>
            
        </section>

        <section id="notes" class="py-12 sm:py-20 mx-0 mt-8 mb-4 shadow-2xl bg-red-600 relative overflow-hidden">
            <div class="grid-pattern-bg"></div>

            <img src="https://i.imgur.com/QRYh6HS.png" alt="Medical Diagram" class="tilted-overlap-image">

             <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-30">
                 <h2 class="text-2xl sm:text-4xl font-bold mb-4 text-white">
                     TOP RESOURCES
                 </h2>
                 
                 <div id="filter-buttons-container" class="flex justify-center space-x-6 mb-8">
                    <span id="filter-all" data-year="all" class="filter-text-button active text-base text-white" style="color: white;">ALL</span> 
                    <span id="filter-1st" data-year="1" class="filter-text-button text-base text-gray-300">1st Year</span>
                    <span id="filter-2nd" data-year="2" class="filter-text-button text-base text-gray-300">2nd Year</span>
                 </div>

                 <div id="product-container" class="horizontal-scroll-container">
                    
                    <div class="glass-card snap-center flex-shrink-0 w-48 p-3 rounded-xl text-center product-card mr-3" data-year="1" data-product-id="1">
                        <div class="product-image-box rounded-lg flex items-center justify-center product-trigger" data-product-id="1">
                            <img src="https://i.imgur.com/c4XSHmA.jpeg" alt="Block 2 Flashcards" class="rounded-lg">
                        </div>
                        
                        <h3 class="product-card-title text-gray-900 mb-0.5 product-trigger" data-product-id="1">BLOCK 2 FLASHCARDS</h3>
                        
                        <div class="flex flex-col items-center justify-center space-y-0.5">
                            <span class="product-price-cut text-xs">Rs. 1100 (pkr)</span>
                            <span class="product-price-main">Rs. 900</span>
                        </div>
                        
                        <button class="add-to-cart-btn rounded-full flex items-center justify-center" data-product-id="1">
                            <span class="text-xl font-light leading-none">+</span>
                        </button>
                    </div>

                    <div class="glass-card snap-center flex-shrink-0 w-48 p-3 rounded-xl text-center product-card mr-3 hidden" data-year="2" data-product-id="2">
                        <div class="product-image-box rounded-lg flex items-center justify-center product-trigger" data-product-id="2">
                            <img src="https://i.imgur.com/mTnWoeB.png" alt="Mind Your Minors Block 5" class="rounded-lg">
                            <span class="absolute top-1 left-1 text-xs font-bold text-white bg-blue-500 px-2 py-0.5 rounded-full shadow-md">BEST VALUE</span>
                        </div>
                        
                        <h3 class="product-card-title text-gray-900 mb-0.5 product-trigger" data-product-id="2">MIND YOUR MINORS - BLOCK 5</h3>
                        
                        <div class="flex flex-col items-center justify-center space-y-0.5">
                            <span class="product-price-main">Rs. 500</span>
                        </div>
                        
                        <button class="add-to-cart-btn rounded-full flex items-center justify-center" data-product-id="2">
                            <span class="text-xl font-light leading-none">+</span>
                        </button>
                    </div>

                    <div class="glass-card snap-center flex-shrink-0 w-48 p-3 rounded-xl text-center product-card mr-3 hidden" data-year="2" data-product-id="3">
                        <div class="product-image-box rounded-lg flex items-center justify-center product-trigger" data-product-id="3">
                             <img src="https://i.imgur.com/wLiYfOr.jpeg" alt="Mind Your Minors Block 6" class="rounded-lg">
                        </div>
                        
                        <div class="text-center text-gray-300 text-xs font-medium my-2">
                            Pre-book only
                        </div>
                        
                        <h3 class="product-card-title text-gray-900 mb-0.5 product-trigger" data-product-id="3">MIND YOUR MINORS - BLOCK 6</h3>
                        
                        <div class="flex flex-col items-center justify-center space-y-0.5 mt-2">
                            <span class="text-base font-bold text-red-300">Launching Soon...</span>
                        </div>
                        
                        <button class="absolute bottom-3 right-3 px-2 py-1 bg-gradient-to-r from-blue-500 to-[#1A5693] text-white text-xs font-semibold rounded-full shadow-lg hover:shadow-xl transition duration-200" onclick="showPrebookModal()">
                            Pre-book
                        </button>
                    </div>
                    
                 </div>

             </div>
        </section>
        <section class="pt-6 pb-12 sm:pt-8 sm:pb-16 bg-gray-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-2xl sm:text-4xl font-extrabold text-center mb-8 text-gray-900">
                    <span class="text-[#1A5693]">SEE WHAT</span> STUDENTS SAY
                </h2>

                <div class="horizontal-scroll-container pb-0 space-x-4">
                    
                    <div class="snap-center flex-shrink-0 w-72 sm:w-80 p-5 review-box-design">
                        <div class="flex items-center space-x-1 text-yellow-500 text-base mb-2">
                            <span>⭐️</span><span>⭐️</span><span>⭐️</span><span>⭐️</span><span>⭐️</span>
                        </div>
                        <p class="italic text-gray-700 mb-3 text-sm leading-relaxed">
                            "your FLASHCARDS are super effective and a lifesaver indeed...really admire your efforts behind these &lt;3 BIG thanks for the mnemonics !!"
                        </p>
                        <div class="font-bold text-gray-900 text-sm">MBBS Student</div>
                        <div class="text-xs text-gray-500">1st year MBBS student AIMC</div>
                    </div>

                    <div class="snap-center flex-shrink-0 w-72 sm:w-80 p-5 review-box-design">
                        <div class="flex items-center space-x-1 text-yellow-500 text-base mb-2">
                            <span>⭐️</span><span>⭐️</span><span>⭐️</span><span>⭐️</span><span>⭐️</span>
                        </div>
                        <p class="italic text-gray-700 mb-3 text-sm leading-relaxed">
                            "Mind your minors is literally a v good initiative. The illustrations are quite appealing and all the minors being covered in a book with past ppr questions is cherry on top.... The quality of book is great. Thank yuh so much for your kind efforts"
                        </p>
                        <div class="font-bold text-gray-900 text-sm">MBBS Student</div>
                        <div class="text-xs text-gray-500">2nd year MBBS student AIMC</div>
                    </div>

                    <div class="snap-center flex-shrink-0 w-72 sm:w-80 p-5 review-box-design">
                        <div class="flex items-center space-x-1 text-yellow-500 text-base mb-2">
                            <span>⭐️</span><span>⭐️</span><span>⭐️</span><span>⭐️</span>
                        </div>
                        <p class="italic text-gray-700 mb-3 text-sm leading-relaxed">
                            "9.5/10. The idea, the design, the packaging and a good initiative for helping students achieve marks in minor subjects. Near to perfect. May ALLAH grant you with great success and fulfil your desires. Ameen"
                        </p>
                        <div class="font-bold text-gray-900 text-sm">Hamza</div>
                        <div class="text-xs text-gray-500">1st year central park medical college</div>
                    </div>
                    
                    <div class="snap-center flex-shrink-0 w-72 sm:w-80 p-5 review-box-design">
                        <div class="flex items-center space-x-1 text-yellow-500 text-base mb-2">
                            <span>⭐️</span><span>⭐️</span><span>⭐️</span><span>⭐️</span><span>⭐️</span>
                        </div>
                        <p class="italic text-gray-700 mb-3 text-sm leading-relaxed">
                            "AJ ke assessment mein pharmacology ke all 3 LOS THAY AND 9 MCQS THAY ALL COVERED FROM FLASHCARDS"
                        </p>
                        <div class="font-bold text-gray-900 text-sm">Abd-ur-Rehman</div>
                        <div class="text-xs text-gray-500">1st year MBBS Sialkot medical college</div>
                    </div>

                    <div class="snap-center flex-shrink-0 w-72 sm:w-80 p-5 review-box-design">
                        <div class="flex items-center space-x-1 text-yellow-500 text-base mb-2">
                            <span>⭐️</span><span>⭐️</span><span>⭐️</span><span>⭐️</span><span>⭐️</span>
                        </div>
                        <p class="italic text-gray-700 mb-3 text-sm leading-relaxed">
                            "For the first time in my life i have recieved a book in this packaging ... and everything is on top notch ... quality over everything More powers to you guys"
                        </p>
                        <div class="font-bold text-gray-900 text-sm">Meerab Murtaza</div>
                        <div class="text-xs text-gray-500">2nd year MBBS AIMC</div>
                    </div>

                </div>
            </div>
        </section>
        <section id="comparison-slider" class="py-6 sm:py-8 bg-gray-900">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="text-2xl sm:text-4xl font-extrabold text-white mb-8">
                    <span class="text-[#1A5693]"></span> COMPARISON
                </h2>

                <div id="image-comparison-wrapper" class="comparison-container rounded-xl">
                    <img id="image-before" src="https://i.imgur.com/kPxsoe1.jpeg" alt="UHS Recommended Book" class="comparison-image">
                    <img id="image-after" src="https://i.imgur.com/3yiZGYe.png" alt="Our Notes" class="comparison-image after">
                    
                    <div id="comparison-line" class="comparison-line">
                        <div id="slider-handle" class="slider-handle">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#1A5693" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 absolute left-0 ml-1">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#1A5693" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 absolute right-0 mr-1">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-between max-w-lg mx-auto mt-4 text-lg font-bold">
                    <span class="text-[#1A5693]">Book View</span> 
                    <span class="text-white">Our Notes</span> 
                </div>
            </div>
        </section>

        <section class="py-12 sm:py-20 red-curved-section mb-4">
            <svg class="medical-pattern-svg" viewBox="0 0 100 100" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <pattern id="medicalPattern" patternUnits="userSpaceOnUse" width="20" height="20">
                        <path d="M 10 0 L 10 20 M 0 10 L 20 10" stroke="#fef2f2" stroke-width="1.5" />
                        <path d="M 5 5 Q 10 0 15 5 Q 20 10 15 15 Q 10 20 5 15" fill="none" stroke="#fef2f2" stroke-width="0.5" />
                        <path d="M 0 12 L 5 12 L 7 8 L 9 16 L 11 8 L 13 12 L 20 12" fill="none" stroke="#fef2f2" stroke-width="0.25" />
                    </pattern>
                </defs>
                <rect width="100%" height="100%" fill="url(#medicalPattern)" />
            </svg>
            
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center content-z">
                <h2 class="text-4xl sm:text-6xl font-extrabold text-white mb-8 londrina-solid-font">
                    FREE RESOURCES
                </h2>
                <a href="https://modmedicalis.online/FREE-RESOURCES" class="avail-btn">
                    CLICK TO AVAIL
                </a>
                <p class="text-white text-opacity-80 mt-4 text-sm font-medium">Flashcards, Quizzes, Past Papers & UHS Notes</p>
            </div>
        </section>
        
        <section class="py-12 sm:py-20 bg-gray-100 border-t border-gray-200">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-2xl sm:text-4xl font-extrabold text-center mb-10 text-gray-900">
                    <span class="text-red-600">MESSAGE FROM THE</span> <span class="text-[#1A5693]">FOUNDER</span>
                </h2>
                
                <div class="p-6 sm:p-8 bg-white rounded-xl shadow-2xl border-t-0">
                    <p class="italic text-gray-700 mb-6 text-base leading-relaxed">
                        Mind Your Minors was born from the real struggles of every medical student; endless notes, massive books, and not enough time. We wanted to change the way students learn, making it smarter, simpler, and more visual. Each page blends clarity with creativity, turning complex topics into quick, memorable insights. Designed by students who've been in your shoes, this book makes learning the minor subjects not a burden, but a breakthrough in your MB  BS journey.
                    </p>
                    
                    <div class="flex items-center justify-end space-x-4 pt-4 border-t border-gray-100">
                        <div class="text-right">
                            <p class="font-bold text-lg text-gray-900">Muhammad Hasnain</p>
                            <p class="text-sm text-[#1A5693] font-semibold">Founder, ModMedicalis</p>
                        </div>
                        <img src="https://i.imgur.com/2y4pFZW.jpeg" alt="Founder's Photo" class="h-16 w-16 rounded-full object-cover ring-2 ring-[#1A5693] p-0.5">
                    </div>
                </div>
            </div>
        </section>
        
        <section class="py-12 sm:py-20 bg-gray-50 border-t border-gray-200">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-2xl sm:text-4xl font-extrabold text-center mb-10 text-gray-900">
                    <span class="text-[#1A5693]">OUR</span> TEAM
                </h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8">
                    
                    <div class="flex flex-col items-center text-center p-4 bg-white rounded-xl shadow-lg hover:shadow-xl transition duration-300">
                        <img src="https://i.imgur.com/2y4pFZW.jpeg" alt="Muhammad Hasnain Photo" class="h-24 w-24 rounded-full object-cover ring-4 ring-red-600 mb-3">
                        <p class="font-bold text-lg text-gray-900">Muhammad Hasnain</p>
                        <p class="text-sm text-red-600 font-semibold">Founder | Developer | Graphic designer</p>
                        <p class="text-xs text-gray-500 mt-1">MS-II (AIMC)</p>
                    </div>
                    
                    <div class="flex flex-col items-center text-center p-4 bg-white rounded-xl shadow-lg hover:shadow-xl transition duration-300">
                        <img src="https://i.imgur.com/RbGRiTF.jpeg" alt="Hamza Masood Gondal Photo" class="h-24 w-24 rounded-full object-cover ring-4 ring-red-600 mb-3">
                        <p class="font-bold text-lg text-gray-900">Hamza Masood Gondal</p>
                        <p class="text-sm text-red-600 font-semibold">Co-Founder | 1st Position holder AIMC (MS-I)</p>
                        <p class="text-xs text-gray-500 mt-1">MS-II (AIMC)</p>
                    </div>
                    
                    <div class="flex flex-col items-center text-center p-4 bg-white rounded-xl shadow-lg hover:shadow-xl transition duration-300">
                        <img src="https://i.imgur.com/A3rIAiM.jpeg" alt="Mahrukh Nadeem Photo" class="h-24 w-24 rounded-full object-cover ring-4 ring-red-600 mb-3">
                        <p class="font-bold text-lg text-gray-900">Mahrukh Nadeem</p>
                        <p class="text-sm text-red-600 font-semibold">Admin | Designer</p>
                        <p class="text-xs text-gray-500 mt-1">MS-II (AIMC)</p>
                    </div>
                    
                    <div class="flex flex-col items-center text-center p-4 bg-white rounded-xl shadow-lg hover:shadow-xl transition duration-300">
                        <img src="https://i.imgur.com/VQH3Rqp.png" alt="Hadia Gulshan Photo" class="h-24 w-24 rounded-full object-cover ring-4 ring-red-600 mb-3">
                        <p class="font-bold text-lg text-gray-900">Hadia Gulshan</p>
                        <p class="text-sm text-red-600 font-semibold">Graphic designer</p>
                        <p class="text-xs text-gray-500 mt-1">MS-II (AIMC)</p>
                    </div>

                </div>
                </div>
        </section>
        
        </main>
    
    <footer id="contact" class="bg-gray-800 text-white py-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-lg font-bold text-[#1A5693] mb-3">MODMEDICALIS</h3>
                    <p class="text-xs text-gray-400">Your trusted partner for medical education excellence.</p>
                    <p class="text-xs text-gray-400 mt-3">&copy; 2025 ModMedicalis</p>
                    <p class="text-xs text-gray-400 mt-3">
                        Developed by <span class="text-xl font-extrabold logo-font">HASNAIN & MAHRUKH</span>
                    </p>
                </div>

                <div>
                    <h4 class="text-base font-semibold mb-3">Quick Links</h4>
                    <ul class="space-y-1 text-sm">
                        <li><a href="#notes" class="text-gray-400 hover:text-[#1A5693]">TOP RESOURCES</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-[#1A5693]">Order Tracking</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="text-base font-semibold mb-3">Resources</h4>
                    <ul class="space-y-1 text-sm">
                        <li><a href="https://modmedicalis.online/FREE-RESOURCES" class="text-gray-400 hover:text-[#1A5693]">FREE RESOURCES</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="text-base font-semibold mb-3">Get In Touch</h4>
                    <p class="text-sm text-gray-400">Email: modmedicalis@gmail.com</p>
                    <p class="text-sm text-gray-400">Phone: 03096554421</p>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Cart Modal -->
    <div id="cart-modal-overlay" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div id="cart-modal" class="bg-white rounded-xl shadow-2xl w-full max-w-sm sm:max-w-md transform transition-all duration-300 scale-95 opacity-0">
            <div class="p-4 border-b flex justify-between items-center bg-red-600 rounded-t-xl">
                <h3 class="text-xl font-bold text-white">Your Cart</h3>
                <button id="close-cart-button" class="text-red-200 hover:text-white transition p-1">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            
            <div id="cart-items-container" class="p-4 max-h-72 overflow-y-auto space-y-3">
                <p id="empty-cart-message" class="text-gray-500 text-center italic text-sm">Your cart is empty.</p>
            </div>
            
            <div id="cart-footer" class="p-4 border-t space-y-2 rounded-b-xl bg-blue-50">
                <div class="flex justify-between font-semibold text-gray-700 text-sm">
                    <span>Subtotal:</span>
                    <span id="cart-subtotal">Rs. 0</span>
                </div>
                <div class="flex justify-between text-lg font-extrabold text-red-600">
                    <span>Total:</span>
                    <span id="cart-total">Rs. 0</span>
                </div>
                <button id="proceed-to-checkout-btn" class="w-full bg-[#1A5693] text-white py-2 rounded-lg font-bold text-sm hover:bg-blue-700 transition duration-200 shadow-lg">
                    Proceed to Checkout
                </button>
            </div>
        </div>
    </div>
    
    <!-- Checkout Modal -->
    <div id="checkout-modal-overlay" class="hidden fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4">
        <div id="checkout-modal" class="bg-white rounded-xl shadow-2xl w-full max-w-md max-h-[95vh] overflow-y-auto transform transition-all duration-300 scale-95 opacity-0">
            <div class="p-4 border-b flex justify-between items-center bg-[#1A5693] rounded-t-xl">
                <h3 class="text-xl font-bold text-white">Checkout</h3>
                <button id="close-checkout-button" class="text-blue-200 hover:text-white transition p-1">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            
            <div class="p-4 border-b">
                <div class="step-indicator">
                    <div class="step active" data-step="1">
                        <div class="step-circle">1</div>
                        <div class="step-label">Shipping</div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-circle">2</div>
                        <div class="step-label">Payment</div>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-circle">3</div>
                        <div class="step-label">Confirmation</div>
                    </div>
                </div>
                <div class="progress-bar-container">
                    <div id="checkout-progress-bar" class="progress-bar" style="width: 33%"></div>
                </div>
            </div>
            
            <form id="checkout-form" action="https://formsubmit.co/modmedicalis@gmail.com" method="POST">
                <input type="hidden" name="_subject" value="ModMedicalis Order Confirmation">
                <input type="hidden" name="_template" value="table">
                <input type="hidden" name="_captcha" value="false">
                <input type="hidden" name="_next" value="data:text/html,<h1 style='font-family:sans-serif;text-align:center;margin-top:20vh'>Order received! Check your email.</h1>">
                <input type="hidden" name="Cart Details" id="form-cart-details">
                <input type="hidden" name="Final Bill" id="form-final-bill">

                <div id="checkout-step-1" class="checkout-step active p-6 space-y-5">
                    <h4 class="text-lg font-bold text-gray-700">Shipping Details</h4>
                    <hr class="border-gray-100">

                    <div>
                        <label for="full_name" class="block text-sm font-medium text-gray-700 mb-1">FULL NAME</label>
                        <input type="text" id="full_name" name="FULL NAME" required class="w-full p-2 border border-gray-300 rounded-lg focus:ring-[#1A5693] focus:border-[#1A5693]">
                    </div>

                    <div>
                        <label for="college" class="block text-sm font-medium text-gray-700 mb-1">SELECT COLLEGE</label>
                        <select id="college" name="COLLEGE" required class="w-full p-2 border border-gray-300 rounded-lg focus:ring-[#1A5693] focus:border-[#1A5693]">
                            <option value="" disabled selected>Select your medical college</option>
                            <optgroup label="Public Medical Colleges (Sample)">
                                <option value="KEMU">King Edward Medical University (KEMU)</option>
                                <option value="AIMC">Allama Iqbal Medical College (AIMC)</option>
                                <option value="FJMC">Fatima Jinnah Medical University (FJMU)</option>
                                <option value="GMC">Services Institute of Medical Sciences (SIMS)</option>
                                <option value="PGMI">Postgraduate Medical Institute (PGMI)</option>
                                <option value="DMC">Dow Medical College (DMC)</option>
                                <option value="A-I-K-M-U">Aga Khan University Hospital (AKUH)</option>
                                <option value="P-I-M-S">Pakistan Institute of Medical Sciences (PIMS)</option>
                                <option value="B-O-K-C">Bolan Medical College (BMC)</option>
                                <option value="Q-U-A-I-D-E-M-C">Quaid-e-Azam Medical College (QAMC)</option>
                                <option value="L-I-A-Q-A-T-M-C">Liaquat University of Medical and Health Sciences (LUMHS)</option>
                                <option value="K-P-K">Khyber Medical College (KMC)</option>
                                <option value="N-I-U-M-S">National University of Medical Sciences (NUMS)</option>
                                <option value="R-A-W-A-L-P-I-N-D-I">Rawalpindi Medical University (RMU)</option>
                            </optgroup>
                            <optgroup label="Private Medical Colleges (Sample)">
                                <option value="CMH-L">CMH Lahore Medical College</option>
                                <option value="FMH">Fatima Memorial Hospital (FMH)</option>
                                <option value="RMU">Riphah International University</option>
                                <option value="SKMCH">Shaukat Khanum Memorial Cancer Hospital</option>
                                <option value="LCMD">Lahore Central College of Medicine and Dentistry</option>
                                <option value="SMU">Shaheed Zulfiqar Ali Bhutto Medical University (SZABMU)</option>
                                <option value="I-M-C-H">Indus Medical College and Hospital (IMCH)</option>
                                <option value="S-H-I-E-L-D">Shield College of Medicine and Dentistry (SCMD)</option>
                                <option value="P-K-R-I">Pak International Medical College (PIMC)</option>
                                <option value="M-A-R-Y-A-M-I-N-T">Maryam International Medical College (MIMC)</option>
                            </optgroup>
                            <option value="Other">Other (Please specify in Address)</option>
                        </select>
                    </div>

                    <div>
                        <label for="contact_number" class="block text-sm font-medium text-gray-700 mb-1">CONTACT NUMBER</label>
                        <input type="tel" id="contact_number" name="CONTACT NUMBER" required class="w-full p-2 border border-gray-300 rounded-lg focus:ring-[#1A5693] focus:border-[#1A5693]">
                    </div>

                    <div>
                        <label for="shipping_address" class="block text-sm font-medium text-gray-700 mb-1">SHIPPING ADDRESS (Full Details for Courier)</label>
                        <textarea id="shipping_address" name="SHIPPING ADDRESS" rows="3" required class="w-full p-2 border border-gray-300 rounded-lg focus:ring-[#1A5693] focus:border-[#1A5693]"></textarea>
                    </div>
                    
                    <div class="checkout-navigation">
                        <button type="button" id="cancel-checkout-btn" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 transition duration-200">
                            Cancel
                        </button>
                        <button type="button" id="next-to-payment-btn" class="px-4 py-2 bg-[#1A5693] text-white rounded-lg font-medium hover:bg-blue-700 transition duration-200">
                            Next: Payment Details
                        </button>
                    </div>
                </div>

                <div id="checkout-step-2" class="checkout-step p-6 space-y-5">
                    <h4 class="text-lg font-bold text-gray-700">Payment Details</h4>
                    <hr class="border-gray-100">

                    <div class="bg-gray-100 p-4 rounded-lg border border-gray-200 text-center">
                        <p class="text-sm font-semibold text-gray-800 mb-2">PAYMENT TO:</p>
                        <p class="text-lg font-bold text-gray-900">MUHAMMAD HASNAIN</p>
                        <div class="flex items-center justify-center space-x-2 mt-2">
                            <span id="payment-number" class="text-lg font-mono text-blue-600">03096554421</span>
                            <button type="button" onclick="copyPaymentNumber()" class="bg-blue-600 text-white px-3 py-1 rounded-lg text-xs font-semibold hover:bg-blue-700 transition">Copy</button>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">Jazzcash / Easypaisa</p>
                        <p class="text-base font-extrabold text-red-600 mt-3">
                            Total Amount: <span id="payment-amount">Rs. 0</span>
                        </p>
                    </div>
                    
                    <div>
                        <label for="payment_slip" class="block text-sm font-medium text-gray-700 mb-1">Upload Payment Slip (Required for confirmation)</label>
                        <input type="file" id="payment_slip" name="Upload Payment Slip" accept="image/*,.pdf" required class="w-full p-2 border border-gray-300 rounded-lg focus:ring-[#1A5693] focus:border-[#1A5693] text-sm">
                    </div>
                    
                    <h4 class="text-lg font-bold text-gray-700 pt-3">How did you hear about us?</h4>
                    <hr class="border-gray-100">
                    
                    <div class="space-y-2">
                        <div class="flex items-center">
                            <input id="source-ambassador" name="How do you know about us?" type="radio" value="Ambassador" required class="h-4 w-4 text-[#1A5693] border-gray-300 focus:ring-[#1A5693]">
                            <label for="source-ambassador" class="ml-3 block text-sm font-medium text-gray-700">Ambassador</label>
                        </div>
                        <div class="flex items-center">
                            <input id="source-social" name="How do you know about us?" type="radio" value="Social Media" class="h-4 w-4 text-[#1A5693] border-gray-300 focus:ring-[#1A5693]">
                            <label for="source-social" class="ml-3 block text-sm font-medium text-gray-700">Social Media</label>
                        </div>
                        <div class="flex items-center">
                            <input id="source-colleagues" name="How do you know about us?" type="radio" value="Colleagues" class="h-4 w-4 text-[#1A5693] border-gray-300 focus:ring-[#1A5693]">
                            <label for="source-colleagues" class="ml-3 block text-sm font-medium text-gray-700">Colleagues</label>
                        </div>
                        <div class="flex items-center">
                            <input id="source-other" name="How do you know about us?" type="radio" value="Other" class="h-4 w-4 text-[#1A5693] border-gray-300 focus:ring-[#1A5693]">
                            <label for="source-other" class="ml-3 block text-sm font-medium text-gray-700">Other</label>
                        </div>
                    </div>
                    
                    <div class="checkout-navigation">
                        <button type="button" id="back-to-shipping-btn" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 transition duration-200">
                            Back
                        </button>
                        <button type="button" id="next-to-confirmation-btn" class="px-4 py-2 bg-[#1A5693] text-white rounded-lg font-medium hover:bg-blue-700 transition duration-200">
                            Next: Confirmation
                        </button>
                    </div>
                </div>

                <div id="checkout-step-3" class="checkout-step p-6 space-y-5">
                    <h4 class="text-lg font-bold text-gray-700">Order Confirmation</h4>
                    <hr class="border-gray-100">
                    
                    <div class="p-3 bg-red-50 rounded-lg border border-red-200">
                        <h5 class="text-lg font-extrabold text-red-600">Final Bill & Order Confirmation</h5>
                        <ul id="checkout-summary-list" class="text-sm text-gray-700 mt-1 space-y-0.5">
                        </ul>
                        <div class="flex justify-between font-extrabold text-[#1A5693] mt-2 pt-2 border-t border-red-200">
                            <span>TOTAL:</span>
                            <span id="checkout-final-total">Rs. 0</span>
                        </div>
                    </div>
                    
                    <div class="checkout-navigation">
                        <button type="button" id="back-to-payment-btn" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 transition duration-200">
                            Back
                        </button>
                        <button type="submit" id="confirm-order-btn" class="px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition duration-200">
                            Confirm Order & Upload Slip
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Prebook Modal -->
    <div id="prebook-page-overlay" class="hidden fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4">
        <div id="prebook-page-modal" class="bg-white rounded-xl shadow-2xl w-full max-w-lg max-h-[95vh] overflow-y-auto transform transition-all duration-300 scale-95 opacity-0">
            
            <div id="prebook-page-content">
                <div class="p-4 border-b flex justify-between items-center bg-red-600 rounded-t-xl">
                    <h3 class="text-xl font-bold text-white">Pre-Book: Mind Your Minors Block 6</h3>
                    <button id="close-prebook-page-button" class="text-red-200 hover:text-white transition p-1">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18             <div class="p-6 space-y-5">
                <div class="product-popup-image-container rounded-lg">
                    <img src="https://i.imgur.com/wLiYfOr.jpeg" alt="Mind Your Minors Block 6" class="rounded-lg">
                </div>
                
                <h4 class="text-lg font-bold text-gray-700">Pre-Book Details</h4>
                <p class="text-sm text-gray-600">
                    Secure your copy of <span class="font-semibold">Mind Your Minors - Block 6</span> before it launches! By pre-booking, you ensure priority access to this exclusive resource tailored for MBBS students.
                </p>
                
                <form id="prebook-form" action="https://formsubmit.co/modmedicalis@gmail.com" method="POST">
                    <input type="hidden" name="_subject" value="Mind Your Minors Block 6 Prebooking">
                    <input type="hidden" name="_template" value="table">
                    <input type="hidden" name="_captcha" value="false">
                    <input type="hidden" name="_next" value="data:text/html,<h1 style='font-family:sans-serif;text-align:center;margin-top:20vh'>Prebooking successful! Check your email for confirmation.</h1>">
                    
                    <div class="space-y-4">
                        <div>
                            <label for="prebook_name" class="block text-sm font-medium text-gray-700 mb-1">FULL NAME</label>
                            <input type="text" id="prebook_name" name="FULL NAME" required class="w-full p-2 border border-gray-300 rounded-lg focus:ring-[#1A5693] focus:border-[#1A5693]">
                        </div>
                        
                        <div>
                            <label for="prebook_college" class="block text-sm font-medium text-gray-700 mb-1">SELECT COLLEGE</label>
                            <select id="prebook_college" name="COLLEGE" required class="w-full p-2 border border-gray-300 rounded-lg focus:ring-[#1A5693] focus:border-[#1A5693]">
                                <option value="" disabled selected>Select your medical college</option>
                                <optgroup label="Public Medical Colleges (Sample)">
                                    <option value="KEMU">King Edward Medical University (KEMU)</option>
                                    <option value="AIMC">Allama Iqbal Medical College (AIMC)</option>
                                    <option value="FJMC">Fatima Jinnah Medical University (FJMU)</option>
                                    <option value="GMC">Services Institute of Medical Sciences (SIMS)</option>
                                    <option value="PGMI">Postgraduate Medical Institute (PGMI)</option>
                                    <option value="DMC">Dow Medical College (DMC)</option>
                                    <option value="A-I-K-M-U">Aga Khan University Hospital (AKUH)</option>
                                    <option value="P-I-M-S">Pakistan Institute of Medical Sciences (PIMS)</option>
                                    <option value="B-O-K-C">Bolan Medical College (BMC)</option>
                                    <option value="Q-U-A-I-D-E-M-C">Quaid-e-Azam Medical College (QAMC)</option>
                                    <option value="L-I-A-Q-A-T-M-C">Liaquat University of Medical and Health Sciences (LUMHS)</option>
                                    <option value="K-P-K">Khyber Medical College (KMC)</option>
                                    <option value="N-I-U-M-S">National University of Medical Sciences (NUMS)</option>
                                    <option value="R-A-W-A-L-P-I-N-D-I">Rawalpindi Medical University (RMU)</option>
                                </optgroup>
                                <optgroup label="Private Medical Colleges (Sample)">
                                    <option value="CMH-L">CMH Lahore Medical College</option>
                                    <option value="FMH">Fatima Memorial Hospital (FMH)</option>
                                    <option value="RMU">Riphah International University</option>
                                    <option value="SKMCH">Shaukat Khanum Memorial Cancer Hospital</option>
                                    <option value="LCMD">Lahore Central College of Medicine and Dentistry</option>
                                    <option value="SMU">Shaheed Zulfiqar Ali Bhutto Medical University (SZABMU)</option>
                                    <option value="I-M-C-H">Indus Medical College and Hospital (IMCH)</option>
                                    <option value="S-H-I-E-L-D">Shield College of Medicine and Dentistry (SCMD)</option>
                                    <option value="P-K-R-I">Pak International Medical College (PIMC)</option>
                                    <option value="M-A-R-Y-A-M-I-N-T">Maryam International Medical College (MIMC)</option>
                                </optgroup>
                                <option value="Other">Other (Please specify in Message)</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="prebook_contact" class="block text-sm font-medium text-gray-700 mb-1">CONTACT NUMBER</label>
                            <input type="tel" id="prebook_contact" name="CONTACT NUMBER" required class="w-full p-2 border border-gray-300 rounded-lg focus:ring-[#1A5693] focus:border-[#1A5693]">
                        </div>
                        
                        <div>
                            <label for="prebook_message" class="block text-sm font-medium text-gray-700 mb-1">MESSAGE (Optional)</label>
                            <textarea id="prebook_message" name="MESSAGE" rows="3" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-[#1A5693] focus:border-[#1A5693]"></textarea>
                        </div>
                        
                        <button type="submit" class="w-full bg-red-600 text-white py-2 rounded-lg font-bold text-sm hover:bg-red-700 transition duration-200 shadow-lg">
                            Confirm Pre-Booking
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Product Details Popup -->
<div id="product-details-overlay" class="product-popup-overlay hidden fixed inset-0 flex items-center justify-center p-4">
    <div id="product-details-popup" class="rounded-xl shadow-2xl w-full transform transition-all duration-300 scale-95 opacity-0">
        <div class="p-4 border-b flex justify-between items-center bg-[#1A5693] rounded-t-xl">
            <h3 id="popup-product-title" class="text-xl font-bold text-white">Product Details</h3>
            <button id="close-product-details-button" class="text-blue-200 hover:text-white transition p-1">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
            </button>
        </div>
        
        <div class="p-6 space-y-5">
            <div id="popup-product-image" class="product-popup-image-container rounded-lg"></div>
            
            <div id="popup-product-description" class="text-sm text-gray-600">
                <p>Loading product details...</p>
            </div>
            
            <div class="flex justify-between items-center">
                <div>
                    <span id="popup-product-price-cut" class="product-price-cut hidden"></span>
                    <span id="popup-product-price" class="product-price-main"></span>
                </div>
                <button id="popup-add-to-cart-btn" class="bg-[#1A5693] text-white py-2 px-4 rounded-lg font-bold text-sm hover:bg-blue-700 transition duration-200 shadow-lg">
                    Add to Cart
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Prebook Notification Popup -->
<div id="prebook-notification-overlay" class="prebook-notification-overlay hidden">
    <div class="prebook-notification-popup">
        <button onclick="closePrebookNotification()" class="close-popup-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#1e293b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
        <h3 class="text-xl font-bold text-gray-900 mb-2">Pre-Book Now!</h3>
        <p class="text-sm text-gray-600 mb-4">
            Be the first to get <span class="font-semibold">Mind Your Minors - Block 6</span>! Pre-book today to secure your copy of this exclusive MBBS resource.
        </p>
        <button onclick="showPrebookModal()" class="bg-red-600 text-white py-2 px-4 rounded-lg font-bold text-sm hover:bg-red-700 transition duration-200 shadow-lg">
            Pre-Book Now
        </button>
    </div>
</div>

<!-- Bottom Notification Bar -->
<div id="bottom-notification-bar" class="fixed bottom-0 left-0 right-0 bg-[#1A5693] text-white p-4 flex justify-between items-center shadow-lg transform transition-transform duration-500 z-40">
    <p class="text-sm font-medium">Mind Your Minors Block 6 is coming soon! Pre-book now to secure your copy.</p>
    <div class="flex items-center space-x-3">
        <button onclick="showPrebookModal()" class="bg-white text-[#1A5693] px-4 py-1 rounded-full font-bold text-sm hover:bg-gray-100 transition duration-200">Pre-Book</button>
        <button id="close-notification-bar" class="text-white hover:text-gray-200">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
    </div>
</div>

<script>
    // Product Data
    const products = [
        {
            id: 1,
            year: 1,
            title: "BLOCK 2 FLASHCARDS",
            image: "https://i.imgur.com/c4XSHmA.jpeg",
            description: "Comprehensive flashcards covering Block 2 topics, designed to help 1st-year MBBS students master key concepts with visual aids and mnemonics.",
            price: 900,
            originalPrice: 1100
        },
        {
            id: 2,
            year: 2,
            title: "MIND YOUR MINORS - BLOCK 5",
            image: "https://i.imgur.com/mTnWoeB.png",
            description: "The ultimate guide for 2nd-year MBBS students, covering all minor subjects in Block 5 with illustrations, past papers, and flowcharts.",
            price: 500,
            originalPrice: null,
            bestValue: true
        },
        {
            id: 3,
            year: 2,
            title: "MIND YOUR MINORS - BLOCK 6",
            image: "https://i.imgur.com/wLiYfOr.jpeg",
            description: "Pre-book the upcoming Block 6 resource, packed with visual notes, OSPE prep, and UHS-aligned content for 2nd-year MBBS students.",
            price: null,
            originalPrice: null,
            prebook: true
        }
    ];

    // Cart Management
    let cart = [];

    // DOM Elements
    const cartModalOverlay = document.getElementById('cart-modal-overlay');
    const cartModal = document.getElementById('cart-modal');
    const closeCartButton = document.getElementById('close-cart-button');
    const cartItemsContainer = document.getElementById('cart-items-container');
    const emptyCartMessage = document.getElementById('empty-cart-message');
    const cartSubtotal = document.getElementById('cart-subtotal');
    const cartTotal = document.getElementById('cart-total');
    const desktopCartCount = document.getElementById('desktop-cart-count');
    const mobileCartCount = document.getElementById('mobile-cart-count');
    const checkoutModalOverlay = document.getElementById('checkout-modal-overlay');
    const checkoutModal = document.getElementById('checkout-modal');
    const closeCheckoutButton = document.getElementById('close-checkout-button');
    const checkoutForm = document.getElementById('checkout-form');
    const checkoutSteps = document.querySelectorAll('.checkout-step');
    const progressBar = document.getElementById('checkout-progress-bar');
    const nextToPaymentBtn = document.getElementById('next-to-payment-btn');
    const nextToConfirmationBtn = document.getElementById('next-to-confirmation-btn');
    const backToShippingBtn = document.getElementById('back-to-shipping-btn');
    const backToPaymentBtn = document.getElementById('back-to-payment-btn');
    const cancelCheckoutBtn = document.getElementById('cancel-checkout-btn');
    const confirmOrderBtn = document.getElementById('confirm-order-btn');
    const checkoutSummaryList = document.getElementById('checkout-summary-list');
    const checkoutFinalTotal = document.getElementById('checkout-final-total');
    const paymentAmount = document.getElementById('payment-amount');
    const productContainer = document.getElementById('product-container');
    const prebookModalOverlay = document.getElementById('prebook-page-overlay');
    const prebookModal = document.getElementById('prebook-page-modal');
    const closePrebookPageButton = document.getElementById('close-prebook-page-button');
    const prebookForm = document.getElementById('prebook-form');
    const productDetailsOverlay = document.getElementById('product-details-overlay');
    const productDetailsPopup = document.getElementById('product-details-popup');
    const closeProductDetailsButton = document.getElementById('close-product-details-button');
    const popupProductTitle = document.getElementById('popup-product-title');
    const popupProductImage = document.getElementById('popup-product-image');
    const popupProductDescription = document.getElementById('popup-product-description');
    const popupProductPrice = document.getElementById('popup-product-price');
    const popupProductPriceCut = document.getElementById('popup-product-price-cut');
    const popupAddToCartBtn = document.getElementById('popup-add-to-cart-btn');
    const prebookNotificationOverlay = document.getElementById('prebook-notification-overlay');
    const bottomNotificationBar = document.getElementById('bottom-notification-bar');
    const closeNotificationBar = document.getElementById('close-notification-bar');
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const searchInput = document.getElementById('search-input');
    const mobileSearchInput = document.getElementById('mobile-search-input');
    const searchDropdown = document.getElementById('search-dropdown');
    const mobileSearchDropdown = document.getElementById('mobile-search-dropdown');
    const searchButton = document.getElementById('search-button');
    const mobileSearchButton = document.getElementById('mobile-search-button');

    // Initialize Products
    function initializeProducts() {
        productContainer.innerHTML = '';
        products.forEach(product => {
            const productCard = document.createElement('div');
            productCard.className = `glass-card snap-center flex-shrink-0 w-48 p-3 rounded-xl text-center product-card mr-3 ${product.prebook || product.year !== 1 ? 'hidden' : ''}`;
            productCard.dataset.year = product.year;
            productCard.dataset.productId = product.id;
            productCard.innerHTML = `
                <div class="product-image-box rounded-lg flex items-center justify-center product-trigger" data-product-id="${product.id}">
                    <img src="${product.image}" alt="${product.title}" class="rounded-lg">
                    ${product.bestValue ? '<span class="absolute top-1 left-1 text-xs font-bold text-white bg-blue-500 px-2 py-0.5 rounded-full shadow-md">BEST VALUE</span>' : ''}
                </div>
                ${product.prebook ? '<div class="text-center text-gray-300 text-xs font-medium my-2">Pre-book only</div>' : ''}
                <h3 class="product-card-title text-gray-900 mb-0.5 product-trigger" data-product-id="${product.id}">${product.title}</h3>
                <div class="flex flex-col items-center justify-center space-y-0.5">
                    ${product.originalPrice ? `<span class="product-price-cut text-xs">Rs. ${product.originalPrice} (pkr)</span>` : ''}
                    ${product.price ? `<span class="product-price-main">Rs. ${product.price}</span>` : '<span class="text-base font-bold text-red-300">Launching Soon...</span>'}
                </div>
                ${product.prebook ? `
                    <button class="absolute bottom-3 right-3 px-2 py-1 bg-gradient-to-r from-blue-500 to-[#1A5693] text-white text-xs font-semibold rounded-full shadow-lg hover:shadow-xl transition duration-200" onclick="showPrebookModal()">
                        Pre-book
                    </button>
                ` : `
                    <button class="add-to-cart-btn rounded-full flex items-center justify-center" data-product-id="${product.id}">
                        <span class="text-xl font-light leading-none">+</span>
                    </button>
                `}
            `;
            productContainer.appendChild(productCard);
        });
        initializeEventListeners();
    }

    // Initialize Event Listeners
    function initializeEventListeners() {
        document.querySelectorAll('.add-to-cart-btn').forEach(button => {
            button.addEventListener('click', () => {
                const productId = parseInt(button.dataset.productId);
                addToCart(productId);
            });
        });

        document.querySelectorAll('.product-trigger').forEach(trigger => {
            trigger.addEventListener('click', () => {
                const productId = parseInt(trigger.dataset.productId);
                showProductDetails(productId);
            });
        });

        document.querySelectorAll('.filter-text-button').forEach(button => {
            button.addEventListener('click', () => {
                const year = button.dataset.year;
                filterProducts(year);
            });
        });

        closeCartButton.addEventListener('click', closeCartModal);
        closeCheckoutButton.addEventListener('click', closeCheckoutModal);
        cancelCheckoutBtn.addEventListener('click', closeCheckoutModal);
        closePrebookPageButton.addEventListener('click', closePrebookModal);
        closeProductDetailsButton.addEventListener('click', closeProductDetails);
        document.getElementById('proceed-to-checkout-btn').addEventListener('click', openCheckoutModal);
        closeNotificationBar.addEventListener('click', hideBottomNotification);
        mobileMenuButton.addEventListener('click', toggleMobileMenu);
        searchButton.addEventListener('click', () => performSearch(searchInput.value));
        mobileSearchButton.addEventListener('click', () => performSearch(mobileSearchInput.value));
        searchInput.addEventListener('input', () => performSearch(searchInput.value));
        mobileSearchInput.addEventListener('input', () => performSearch(mobileSearchInput.value));
        nextToPaymentBtn.addEventListener('click', () => switchCheckoutStep(2));
        nextToConfirmationBtn.addEventListener('click', () => switchCheckoutStep(3));
        backToShippingBtn.addEventListener('click', () => switchCheckoutStep(1));
        backToPaymentBtn.addEventListener('click', () => switchCheckoutStep(2));
        checkoutForm.addEventListener('submit', handleCheckoutSubmit);
        prebookForm.addEventListener('submit', handlePrebookSubmit);
        popupAddToCartBtn.addEventListener('click', () => {
            const productId = parseInt(popupAddToCartBtn.dataset.productId);
            addToCart(productId);
            closeProductDetails();
        });
    }

    // Cart Functions
    function addToCart(productId) {
        const product = products.find(p => p.id === productId);
        if (!product || product.prebook) return;

        const existingItem = cart.find(item => item.id === productId);
        if (existingItem) {
            existingItem.quantity += 1;
        } else {
            cart.push({
                id: productId,
                title: product.title,
                price: product.price,
                quantity: 1
            });
        }
        updateCart();
        openCartModal();
        createConfetti();
    }

    function removeFromCart(productId) {
        cart = cart.filter(item => item.id !== productId);
        updateCart();
    }

    function updateCartItemQuantity(productId, change) {
        const item = cart.find(item => item.id === productId);
        if (item) {
            item.quantity = Math.max(1, item.quantity + change);
            updateCart();
        }
    }

    function updateCart() {
        cartItemsContainer.innerHTML = '';
        if (cart.length === 0) {
            emptyCartMessage.classList.remove('hidden');
        } else {
            emptyCartMessage.classList.add('hidden');
            cart.forEach(item => {
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item-card rounded-lg p-3 flex justify-between items-center';
                cartItem.innerHTML = `
                    <div class="flex-1 pr-4">
                        <h4 class="text-sm font-semibold text-gray-900">${item.title}</h4>
                        <p class="text-xs text-gray-500">Rs. ${item.price} x ${item.quantity}</p>
                    </div>
                    <div class="flex items-center space-x-2">
                        <button class="decrease-quantity-btn bg-gray-200 text-gray-700 w-6 h-6 rounded-full flex items-center justify-center text-sm" data-product-id="${item.id}">-</button>
                        <span class="text-sm font-semibold">${item.quantity}</span>
                        <button class="increase-quantity-btn bg-gray-200 text-gray-700 w-6 h-6 rounded-full flex items-center justify-center text-sm" data-product-id="${item.id}">+</button>
                        <button class="remove-from-cart-btn text-red-600 hover:text-red-700" data-product-id="${item.id}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash-2"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>
                        </button>
                    </div>
                `;
                cartItemsContainer.appendChild(cartItem);
            });
        }

        const subtotal = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
        cartSubtotal.textContent = `Rs. ${subtotal}`;
        cartTotal.textContent = `Rs. ${subtotal}`;
        paymentAmount.textContent = `Rs. ${subtotal}`;
        checkoutFinalTotal.textContent = `Rs. ${subtotal}`;
        desktopCartCount.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
        mobileCartCount.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);

        checkoutSummaryList.innerHTML = cart.map(item => `
            <li class="flex justify-between">
                <span>${item.title} x${item.quantity}</span>
                <span>Rs. ${item.price * item.quantity}</span>
            </li>
        `).join('');

        document.getElementById('form-cart-details').value = JSON.stringify(cart);
        document.getElementById('form-final-bill').value = `Rs. ${subtotal}`;

        document.querySelectorAll('.remove-from-cart-btn').forEach(button => {
            button.addEventListener('click', () => {
                const productId = parseInt(button.dataset.productId);
                removeFromCart(productId);
            });
        });

        document.querySelectorAll('.increase-quantity-btn').forEach(button => {
            button.addEventListener('click', () => {
                const productId = parseInt(button.dataset.productId);
                updateCartItemQuantity(productId, 1);
            });
        });

        document.querySelectorAll('.decrease-quantity-btn').forEach(button => {
            button.addEventListener('click', () => {
                const productId = parseInt(button.dataset.productId);
                updateCartItemQuantity(productId, -1);
            });
        });
    }

    // Modal Functions
    function openCartModal() {
        cartModalOverlay.classList.remove('hidden');
        cartModal.classList.remove('scale-95', 'opacity-0');
        cartModal.classList.add('scale-100', 'opacity-100');
        document.body.classList.add('overflow-hidden-body');
    }

    function closeCartModal() {
        cartModalOverlay.classList.add('hidden');
        cartModal.classList.add('scale-95', 'opacity-0');
        cartModal.classList.remove('scale-100', 'opacity-100');
        document.body.classList.remove('overflow-hidden-body');
    }

    function openCheckoutModal() {
        if (cart.length === 0) {
            alert('Your cart is empty!');
            return;
        }
        closeCartModal();
        checkoutModalOverlay.classList.remove('hidden');
        checkoutModal.classList.remove('scale-95', 'opacity-0');
        checkoutModal.classList.add('scale-100', 'opacity-100');
        document.body.classList.add('overflow-hidden-body');
        switchCheckoutStep(1);
    }

    function closeCheckoutModal() {
        checkoutModalOverlay.classList.add('hidden');
        checkoutModal.classList.add('scale-95', 'opacity-0');
        checkoutModal.classList.remove('scale-100', 'opacity-100');
        document.body.classList.remove('overflow-hidden-body');
        checkoutForm.reset();
        switchCheckoutStep(1);
    }

    function switchCheckoutStep(step) {
        checkoutSteps.forEach(s => s.classList.remove('active'));
        document.getElementById(`checkout-step-${step}`).classList.add('active');
        document.querySelectorAll('.step').forEach(s => s.classList.remove('active', 'completed'));
        for (let i = 1; i <= step; i++) {
            const stepEl = document.querySelector(`.step[data-step="${i}"]`);
            stepEl.classList.add(i === step ? 'active' : 'completed');
        }
        progressBar.style.width = `${(step / 3) * 100}%`;
    }

    function showPrebookModal() {
        prebookModalOverlay.classList.remove('hidden');
        prebookModal.classList.remove('scale-95', 'opacity-0');
        prebookModal.classList.add('scale-100', 'opacity-100');
        document.body.classList.add('overflow-hidden-body');
        closePrebookNotification();
    }

    function closePrebookModal() {
        prebookModalOverlay.classList.add('hidden');
        prebookModal.classList.add('scale-95', 'opacity-0');
        prebookModal.classList.remove('scale-100', 'opacity-100');
        document.body.classList.remove('overflow-hidden-body');
        prebookForm.reset();
    }

    function showProductDetails(productId) {
        const product = products.find(p => p.id === productId);
        if (!product) return;

        popupProductTitle.textContent = product.title;
        popupProductImage.innerHTML = `<img src="${product.image}" alt="${product.title}" class="rounded-lg">`;
        popupProductDescription.innerHTML = `<p>${product.description}</p>`;
        popupProductPrice.textContent = product.price ? `Rs. ${product.price}` : 'Launching Soon...';
        popupProductPriceCut.classList.toggle('hidden', !product.originalPrice);
        if (product.originalPrice) {
            popupProductPriceCut.textContent = `Rs. ${product.originalPrice} (pkr)`;
        }
        popupAddToCartBtn.classList.toggle('hidden', product.prebook);
        popupAddToCartBtn.dataset.productId = productId;

        productDetailsOverlay.classList.remove('hidden');
        productDetailsPopup.classList.remove('scale-95', 'opacity-0');
        productDetailsPopup.classList.add('scale-100', 'opacity-100');
        document.body.classList.add('overflow-hidden-body');
    }

    function closeProductDetails() {
        productDetailsOverlay.classList.add('hidden');
        productDetailsPopup.classList.add('scale-95', 'opacity-0');
        productDetailsPopup.classList.remove('scale-100', 'opacity-100');
        document.body.classList.remove('overflow-hidden-body');
    }

    function showPrebookNotification() {
        prebookNotificationOverlay.classList.add('active');
        document.body.classList.add('overflow-hidden-body');
        createConfetti();
    }

    function closePrebookNotification() {
        prebookNotificationOverlay.classList.remove('active');
        document.body.classList.remove('overflow-hidden-body');
    }

    function hideBottomNotification() {
        bottomNotificationBar.classList.add('hidden-down');
    }

    // Form Submission Handlers
    function handleCheckoutSubmit(event) {
        event.preventDefault();
        checkoutForm.submit();
    }

    function handlePrebookSubmit(event) {
        event.preventDefault();
        prebookForm.submit();
    }

    // Search Functionality
    function performSearch(query) {
        const dropdown = searchInput === document.activeElement ? searchDropdown : mobileSearchDropdown;
        dropdown.innerHTML = '';
        if (query.trim() === '') {
            dropdown.classList.add('hidden');
            return;
        }

        const filteredProducts = products.filter(product =>
            product.title.toLowerCase().includes(query.toLowerCase())
        );

        if (filteredProducts.length === 0) {
            dropdown.innerHTML = '<div class="search-dropdown-item text-gray-500">No products found</div>';
        } else {
            filteredProducts.forEach(product => {
                const item = document.createElement('div');
                item.className = 'search-dropdown-item';
                item.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <img src="${product.image}" alt="${product.title}" class="w-10 h-10 rounded-lg object-cover">
                        <div>
                            <p class="font-semibold text-gray-900">${product.title}</p>
                            <p class="text-xs text-gray-500">${product.price ? `Rs. ${product.price}` : 'Pre-book only'}</p>
                        </div>
                    </div>
                `;
                item.addEventListener('click', () => {
                    showProductDetails(product.id);
                    dropdown.classList.add('hidden');
                    searchInput.value = '';
                    mobileSearchInput.value = '';
                });
                dropdown.appendChild(item);
            });
        }
        dropdown.classList.remove('hidden');
    }

    // Filter Products
    function filterProducts(year) {
        document.querySelectorAll('.filter-text-button').forEach(btn => {
            btn.classList.toggle('active', btn.dataset.year === year);
            if (btn.dataset.year === year) {
                btn.style.color = '#ffffff';
            } else {
                btn.style.color = '#d1d5db';
            }
        });

        document.querySelectorAll('.product-card').forEach(card => {
            if (year === 'all') {
                card.classList.remove('hidden');
                card.classList.add('product-slide-up');
            } else {
                card.classList.toggle('hidden', card.dataset.year !== year);
                if (card.dataset.year === year) {
                    card.classList.add('product-slide-up');
                }
            }
        });
    }

    // Copy Payment Number
    function copyPaymentNumber() {
        const paymentNumber = document.getElementById('payment-number').textContent;
        navigator.clipboard.writeText(paymentNumber).then(() => {
            alert('Payment number copied to clipboard!');
        });
    }

    // Image Comparison Slider
    const comparisonWrapper = document.getElementById('image-comparison-wrapper');
    const imageAfter = document.getElementById('image-after');
    const comparisonLine = document.getElementById('comparison-line');
    const sliderHandle = document.getElementById('slider-handle');

    let isDragging = false;

    comparisonWrapper.addEventListener('mousedown', startDragging);
    comparisonWrapper.addEventListener('touchstart', startDragging);
    document.addEventListener('mousemove', drag);
    document.addEventListener('touchmove', drag);
    document.addEventListener('mouseup', stopDragging);
    document.addEventListener('touchend', stopDragging);

    function startDragging(e) {
        e.preventDefault();
        isDragging = true;
    }

    function drag(e) {
        if (!isDragging) return;
        e.preventDefault();
        const rect = comparisonWrapper.getBoundingClientRect();
        const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
        let x = clientX - rect.left;
        x = Math.max(0, Math.min(x, rect.width));
        const percentage = (x / rect.width) * 100;
        imageAfter.style.clipPath = `inset(0 0 0 ${percentage}%)`;
        comparisonLine.style.left = `${percentage}%`;
        sliderHandle.style.left = `${percentage}%`;
    }

    function stopDragging() {
        isDragging = false;
    }

    // Confetti Animation
    function createConfetti() {
        const colors = ['#3b82f6', '#f25f61', '#facc15', '#10b981', '#8b5cf6'];
        for (let i = 0; i < 30; i++) {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            confetti.style.left = `${Math.random() * 100}%`;
            confetti.style.setProperty('--color', colors[Math.floor(Math.random() * colors.length)]);
            confetti.style.setProperty('--duration', `${Math.random() * 2 + 1}s`);
            confetti.style.animationDelay = `${Math.random() * 0.5}s`;
            document.body.appendChild(confetti);
            setTimeout(() => confetti.remove(), 3000);
        }
    }

    // Toggle Mobile Menu
    function toggleMobileMenu() {
        mobileMenu.classList.toggle('hidden');
    }

    // Initialize
    initializeProducts();
    setTimeout(showPrebookNotification, 5000);
</script>
</html>
